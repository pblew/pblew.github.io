{"version":3,"sources":["webpack://lib_web_settlers/HashHistory.ts","webpack://lib_web_settlers/Router.ts","webpack://lib_web_settlers/alwaysRender.ts","webpack://lib_web_settlers/StoreInjector.ts","webpack://lib_web_settlers/Route.ts","webpack://lib_web_settlers/./src/widgets/cube/model/Cube.ts","webpack://lib_web_settlers/./src/widgets/cube/CubeScene.ts","webpack://lib_web_settlers/./src/widgets/footer/Footer.tsx","webpack://lib_web_settlers/ActiveLink.ts","webpack://lib_web_settlers/index.tsx","webpack://lib_web_settlers/./src/widgets/header/Header.tsx","webpack://lib_web_settlers/./src/dojo-gl/Camera.ts","webpack://lib_web_settlers/./src/dojo-gl/KeyController.ts","webpack://lib_web_settlers/./src/widgets/mapPanel/model/MapVertexes.ts","webpack://lib_web_settlers/./src/widgets/mapPanel/model/Terrain.ts","webpack://lib_web_settlers/./src/widgets/mapPanel/model/landscape.ts","webpack://lib_web_settlers/./src/widgets/mapPanel/model/Map.ts","webpack://lib_web_settlers/./src/widgets/mapPanel/MapScene.ts","webpack://lib_web_settlers/./src/widgets/testbed/model/TestBed.ts","webpack://lib_web_settlers/./src/widgets/testbed/TestBedScene.ts","webpack://lib_web_settlers/./src/App.tsx","webpack://lib_web_settlers/./src/processes/initialState.ts","webpack://lib_web_settlers/./src/main.tsx","webpack://lib_web_settlers/RouterInjector.ts","webpack://lib_web_settlers/./src/routes.ts","webpack://lib_web_settlers/vdom.ts","webpack://lib_web_settlers/./node_modules/axios/lib/utils.js","webpack://lib_web_settlers/object.ts","webpack://lib_web_settlers/Map.ts","webpack://lib_web_settlers/wrapper.ts","webpack://lib_web_settlers/Evented.ts","webpack://lib_web_settlers/./node_modules/gl-matrix-ts/dist/common.js","webpack://lib_web_settlers/./node_modules/gl-matrix-ts/dist/mat4.js","webpack://lib_web_settlers/./node_modules/gl-matrix-ts/dist/vec3.js","webpack://lib_web_settlers/./node_modules/gl-matrix-ts/dist/index.js","webpack://lib_web_settlers/Registry.ts","webpack://lib_web_settlers/injector.ts","webpack://lib_web_settlers/Base.ts","webpack://lib_web_settlers/ResizeObserver.ts","webpack://lib_web_settlers/Resize.ts","webpack://lib_web_settlers/./src/dojo-gl/Program.ts","webpack://lib_web_settlers/./src/dojo-gl/Shader.ts","webpack://lib_web_settlers/./src/dojo-gl/FragmentShader.ts","webpack://lib_web_settlers/./src/dojo-gl/VertexShader.ts","webpack://lib_web_settlers/./src/dojo-gl/widgets/GLPanel.tsx","webpack://lib_web_settlers/Set.ts","webpack://lib_web_settlers/WeakMap.ts","webpack://lib_web_settlers/diff.ts","webpack://lib_web_settlers/icache.ts","webpack://lib_web_settlers/./src/processes/factory.ts","webpack://lib_web_settlers/process.ts","webpack://lib_web_settlers/operations.ts","webpack://lib_web_settlers/Pointer.ts","webpack://lib_web_settlers/Destroyable.ts","webpack://lib_web_settlers/RegistryHandler.ts","webpack://lib_web_settlers/theme.ts","webpack://lib_web_settlers/Link.ts","webpack://lib_web_settlers/theme.tsx","webpack://lib_web_settlers/Store.ts","webpack://lib_web_settlers/./src/api/api.ts","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/bind.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/buildURL.js","webpack://lib_web_settlers/./node_modules/axios/lib/cancel/isCancel.js","webpack://lib_web_settlers/./node_modules/axios/lib/defaults.js","webpack://lib_web_settlers/./node_modules/axios/lib/adapters/xhr.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/createError.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/mergeConfig.js","webpack://lib_web_settlers/./node_modules/axios/lib/cancel/Cancel.js","webpack://lib_web_settlers/Injector.ts","webpack://lib_web_settlers/ThemeInjector.ts","webpack://lib_web_settlers/util.ts","webpack://lib_web_settlers/array.ts","webpack://lib_web_settlers/NodeHandler.ts","webpack://lib_web_settlers/WidgetBase.ts","webpack://lib_web_settlers/Patch.ts","webpack://lib_web_settlers/compare.ts","webpack://lib_web_settlers/store.ts","webpack://lib_web_settlers/./src/middleware/store.ts","webpack://lib_web_settlers/index.ts","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/accordion.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/avatar.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/breadcrumb-group.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/button.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/calendar.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/card.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/checkbox-group.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/checkbox.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/chip-typeahead.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/chip.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/date-input.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/dialog.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/floating-action-button.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/form.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-body.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-cell.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-footer.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-header.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-paginated-footer.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-placeholder-row.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid-row.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/grid.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/header-card.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/header.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/helper-text.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/icon.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/label.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/list-item.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/list.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/loading-indicator.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/menu-item.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/native-select.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/outlined-button.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/pagination.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/password-input.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/progress.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/radio-group.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/radio.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/raised-button.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/range-slider.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/result.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/select.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/slide-pane.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/slider.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/snackbar.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/speed-dial.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/switch.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/tab-container.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/text-area.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/text-input.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/three-column-layout.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/time-picker.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/title-pane.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/tooltip.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/two-column-layout.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/typeahead.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/variants/dark.m.css.js","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/dojo/variants/default.m.css.js","webpack://lib_web_settlers/./src/App.m.css","webpack://lib_web_settlers/./src/widgets/footer/Footer.m.css","webpack://lib_web_settlers/./node_modules/@dojo/widgets/theme/default/header.m.css.js","webpack://lib_web_settlers/./src/widgets/header/Header.m.css","webpack://lib_web_settlers/./src/dojo-gl/widgets/glPanel.m.css","webpack://lib_web_settlers/./node_modules/axios/index.js","webpack://lib_web_settlers/./node_modules/axios/lib/axios.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/Axios.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/InterceptorManager.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/dispatchRequest.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/transformData.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/settle.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/enhanceError.js","webpack://lib_web_settlers/./node_modules/axios/lib/core/buildFullPath.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/combineURLs.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/cookies.js","webpack://lib_web_settlers/./node_modules/axios/lib/cancel/CancelToken.js","webpack://lib_web_settlers/./node_modules/axios/lib/helpers/spread.js"],"names":["HashHistory_HashHistory","[object Object]","window","global","onChange","this","_onChange","path","normalizePath","_window","location","hash","_current","_onChangeFunction","addEventListener","replace","prefix","current","removeEventListener","PARAM","paramRegExp","RegExp","ROUTE_SEGMENT_SCORE","DYNAMIC_SEGMENT_PENALTY","matchingParams","params","previousParams","Object","keys","every","key","Router_Router","Evented","config","options","super","_routes","_routeMap","create","_matchedRoutes","_matchedOutletMap","Map","_currentParams","_currentQueryParams","requestedPath","_stripLeadingSlash","previousMatchedRoutes","clear","queryParamString","split","_getQueryParams","segments","routeConfig","routeConfigs","map","route","parent","undefined","type","matchedRoutes","pop","segmentIndex","paramIndex","routeMatch","length","segment","shift","assign","push","children","childRoute","matchedRouteId","matchedRoute","currentMatch","score","id","title","_options","setDocumentTitle","queryParams","document","matchedRouteContext","outlet","isError","isExact","previousMatchedOutlet","routeMap","get","set","emit","action","errorRoute","previousMatchedOutletKeys","i","_currentMatchedRoute","context","resetScroll","scroll","e","_register","autostart","start","_history","HistoryManager","base","_defaultRoute","link","setPath","linkPath","fullPath","fullQueryParams","reduce","param","index","defaultParams","fullParams","routeId","outletId","currentParams","slice","routes","parentRoute","defaultRoute","parsedPath","test","queryParam","queryParameters","value","WeakMap","routing_Route","vdom","icache","middleware_icache","injector","middleware_injector","diffProperty","invalidator","properties","factory","middleware","renderer","routerKey","handle","subscribe","next","currentRouterKey","currentHandle","router","routeContext","getRoute","result","Cube","gl","vertexBuffer","createBuffer","ARRAY_BUFFER","vertexes","STATIC_DRAW","vertexSize","colourBuffer","prepareColours","colours","colourSize","indexBuffer","ELEMENT_ARRAY_BUFFER","indexes","primitiveType","TRIANGLES","vertexPositionAttr","vertexColourAttr","bindBuffer","vertexAttribPointer","FLOAT","drawElements","UNSIGNED_SHORT","target","data","usage","buffer","bufferData","rawColours","vertexColours","len","colour","j","concat","Float32Array","Uint16Array","CubeScene_CubeScene","run","timestamp","hAnim","requestAnimationFrame","glPanel","isReady","draw","animate","program","modelViewMatrix","attribute","modelViewMatrixUniform","uniform","projectionMatrixUniform","cube","lastTimestamp","dist","translate","fromValues","projectionMatrix","clearColor","enable","DEPTH_TEST","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","useProgram","uniformMatrix4fv","fract","duration","angle","Math","PI","rotate","rotationAxis","cancelAnimationFrame","footer_Footer","classes","Footer_m","routing_ActiveLink","ActiveLink_factory","to","_a","activeClasses","props","ActiveLink_rest","destroy","on","isActive","linkParams","contextParams","paramsEqual","contextIsExact","Array","isArray","Link","header","theme","widgets_middleware_theme","header_factory","header_m_css","sticky","actions","leading","trailing","variant","spacer","root","row","primary","secondary","widgets_header_Header","Header_m","Camera_Camera","position","up","matrix","lookAt","x","y","z","update","console","log","degrees","rotateX","GLPanel","rotateZ","rotateY","KeyController","pressedKeys","Set","bindings","registerEventHandler","onKeyDown","bind","onKeyUp","ev","add","code","preventDefault","delete","keyName","binding","forEach","has","v1v2","v2v3","normalVec","calculateFaceNormal","first","second","third","v1","v2","v3","subtract","cross","MapVertexes_MapVertexes","mapDefinition","nodeSize","height","nodes","width","columns","rows","xOffset","yOffset","mapVertices","node","altitude","putVertex","vertex","calculateNormal","column","isEvenRow","getIndex","rowXOffset","n","faceNormals","neighbours","calculateFaceNormals","findNeighbours","faceNormal","fixNormalAtMapEdge","normalize","clampIndex","rawIndex","abs","makeColour","rgb","r","parseInt","substr","g","b","a","Terrain_colours","GREENLAND","SAVANNAH","MOUNTAIN1","SNOW","SWAMP","DESERT1","WATER","WATER_BUILDABLE","DESERT2","MEADOW1","MEADOW2","MEADOW3","MOUNTAIN2","MOUNTAIN3","MOUNTAIN4","STEPPE","MEADOW_FLOWER","LAVA","MAGENTA","MOUNTAIN_MEADOW","WATER_BLOCKS_SHIPS","LAVA2","LAVA3","LAVA4","MOUNTAIN_BUILDABLE","LAVALAND","WINTERLAND","worldType","terrainType","sequence","getTerrain","landscape","numVertexes","normals","Uint32Array","pVertex","pColour","pNormal","pIndex","nIndex","emitVertex","mapVertex","terrain","mapVertexes","vertexSet","getVertexSet","terrain1","terrain2","terrain3","Map_Map","normalBuffer","normalSize","vertexNormalAttr","UNSIGNED_INT","MapScene_MapScene","camera","cameraAngle","cameraSpeed","keyController","cameraHeight","max","cameraDistance","reverseLightDirectionLocationUniform","reverseLightDirection","CULL_FACE","uniform3fv","deltaT","apply","moveTo","sin","cos","copy","getMatrix","NONE","BLUE","GREEN","YELLOW","ascendingsequence","descendingsequence","coordToVertex","ystart","xstart","col","TestBed","ts","numDegenerate","v","c","cols","x1","y1","z1","vertex1Colour","x2","y2","z2","vertex2Colour","generateTriangleStrip","TRIANGLE_STRIP","TestBedScene_TestBedScene","testbed","cubeScene","testbedScene","mapScene","src_App","middleware_theme","dojo_default","App_m","Loadable__","__autoRegistryItem","label","registryItem","__autoRegistryItems","Home","onGLReady","CubePanel","MapList","mapId","MapPanel","initialStateCommand","processes_factory","async","maps","api","operations","list","process","initialStateProcess","main_registry","store","registry","Registry","hasInjector","Error","toString","defineInjector","registerStoreInjector","routerOptions","__rest","registerRouterInjector","mount","EMPTY_ARRAY","nodeOperations","NAMESPACE_SVG","NAMESPACE_W3","NAMESPACE_XLINK","WNODE","VNODE","DOMVNODE","scope","setRendering","_shim_global__WEBPACK_IMPORTED_MODULE_0__","rendering","isTextNode","item","nodeType","isWNodeWrapper","child","isWNode","isVNodeWrapper","isVNode","isVirtualWrapper","tag","isBodyWrapper","wrapper","isHeadWrapper","isSpecialWrapper","Boolean","isDomVNode","w","widgetConstructorOrNode","__children__","_Registry__WEBPACK_IMPORTED_MODULE_6__","widgetConstructor","propertiesOrChildren","deferredPropertiesCallback","styles","newProperties","nodeClasses","nodeStyles","nodeProperties","REGISTRY_ITEM","FromRegistry","__properties__","tsx","_shim_array__WEBPACK_IMPORTED_MODULE_5__","Infinity","name","buildPreviousProperties","domNode","diffType","attributes","deferredProperties","events","propName","attrName","getAttribute","property","same","dnode1","dnode2","widgetConstructor1","widgetConstructor2","props1","props2","instance","findIndexOfChild","sameAs","createClassPropValue","classNames","className","updateAttribute","attrValue","namespace","setAttributeNS","removeAttribute","setAttribute","arrayFrom","arr","prototype","call","createFactory","callback","middlewares","isWidget","middlewareName","isFactory","returns","widgetInstanceMap","_shim_WeakMap__WEBPACK_IMPORTED_MODULE_2__","widgetMetaMap","_shim_Map__WEBPACK_IMPORTED_MODULE_4__","requestedDomNodes","_shim_Set__WEBPACK_IMPORTED_MODULE_3__","wrapperId","metaId","addNodeToMap","widgetMeta","nodeMap","destroyHandles","meta","destroyMap","middlewareIds","size","widgetId","mountNode","contains","body","propertyName","propertiesOrDiff","diff","customDiffMap","customDiffProperties","propertyDiffMap","originalProperties","destroyFunction","getRegistry","registryHandler","_RegistryHandler__WEBPACK_IMPORTED_MODULE_8__","isDeferred","deferRefs","wrapFunctionProperties","propertyNames","args","unwrap","__webpack_exports__","_renderScheduled","parentInvalidate","_appWrapperId","_mountOptions","sync","merge","transition","_invalidationQueue","_processQueue","_deferredProcessQueue","_applicationQueue","_eventMap","_idToWrapperMap","_wrapperSiblingMap","_idToChildrenWrappers","_insertBeforeMap","_nodeToWrapperMap","_deferredRenderCallbacks","_allMergedNodes","_deferredProcessIds","nodeOperation","propValue","previousValue","updateEvent","eventName","currentValue","previousEvent","evt","removeOrphanedEvents","previousProperties","onlyEvents","isEvent","eventCallback","resolveRegistryItem","owningNode","instanceData","registryLabel","isLazyDefine","define","renderedToWrapper","rendered","currentParent","requiresInsertBefore","hasPreviousSiblings","depth","wrappedRendered","hasParentWNode","hasVirtualParentNode","hasCurrentParentChildren","insertBefore","previousItem","mapNodeToInstance","renderedItem","text","order","parentId","exitAnimation","hasAnimations","nextParent","owningId","runDeferredProperties","processProperties","findInsertBefore","searchNode","nextSibling","childDomWrapperId","findDomNodeOnParentWrapper","childWrapper","parentNode","setValue","domValue","onInputValue","onSelectValue","setProperties","currentProperties","nextWrapper","includesEventsAndAttributes","propNames","propCount","indexOf","previousClassString","currentClassString","merged","domClasses","styleNames","styleCount","styleName","newStyleValue","style","tagName","lastIndexOf","_createDeferredRenderCallback","callbacks","_scheduleDeferredRenderCallbacks","previousAttributes","attrNames","attrCount","updateAttributes","event","_schedule","_runInvalidationQueue","getWNodeWrapper","invalidationQueue","previouslyRendered","sort","_runProcessQueue","sibling","_updateWidget","_runDomInstructionQueue","_cleanUpMergedNodes","mergedNode","removeChild","_process","reverse","parentDomNode","onAttach","parentElement","enterAnimation","enterAnimationActive","enter","owningWrapper","nodeHandler","inserted","currentDomNode","replaceChild","exitAnimationActive","exit","attached","addRoot","onDetach","createKeyMap","wrappers","mergeNodes","oldIndex","newIndex","currentLength","nextLength","instructions","currentKeys","nextKeys","currentWrapper","domElement","toUpperCase","mergeNodeIndex","splice","_processMergeNodes","_processOne","widget","dom","currentNode","parentWrapper","findParentDomNode","isVirtual","isBody","isHead","createTextNode","childNodes","head","createElementNS","createElement","_createDom","invalidate","Constructor","dirty","__setProperties__","__setChildren__","__render__","widgetName","propertiesCalled","ids","resolveMiddleware","results","uniqueId","payload","createWidgetOptions","resolvedMiddleware","_createWidget","currentChildren","_updateDom","isSpecial","remove","specialIds","wrapperChildren","_removeDom","processResult","_removeWidget","didRender","customProperties","diffMap","runDiffs","ignoreProperties","_diff__WEBPACK_IMPORTED_MODULE_7__","changed","propertiesDiff","values","childId","mountOptions","renderResult","wrapNodes","siblingId","unmount","__webpack_require__","val","isUndefined","isObject","isFunction","obj","fn","l","hasOwnProperty","module","exports","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","isString","isNumber","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","assignValue","arguments","deepMerge","extend","thisArg","trim","str","object_assign","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","is","getOwnPropertyDescriptors","entries","d","_global__WEBPACK_IMPORTED_MODULE_0__","nameOnGlobal","_shim_Map__WEBPACK_IMPORTED_MODULE_0__","_Destroyable__WEBPACK_IMPORTED_MODULE_1__","regexMap","listenersMap","methods","globString","targetString","regex","isGlobMatch","method","listener","handles","_addListener","listeners","EPSILON","mat4_create","out","mat4_clone","mat4_copy","mat4_fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","mat4_set","mat4_identity","mat4_transpose","a01","a02","a03","a12","a13","a23","mat4_invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","mat4_adjoint","mat4_determinant","mat4_multiply","b0","b1","b2","b3","mat4_translate","mat4_scale","mat4_rotate","rad","axis","s","t","b12","b20","b21","b22","sqrt","mat4_fromTranslation","mat4_fromScaling","mat4_fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getScaling","getRotation","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","mat4_fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","eye","center","x0","y0","z0","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","mat4_str","mat4_frob","pow","mat4_add","mat4_subtract","mat4_multiplyScalar","mat4_multiplyScalarAndAdd","mat4_exactEquals","mat4_equals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","vec3_create","vec3_clone","vec3_fromValues","vec3_copy","vec3_set","vec3_add","vec3_subtract","vec3_multiply","divide","ceil","floor","min","round","vec3_scale","scaleAndAdd","distance","squaredDistance","vec3_length","squaredLength","negate","inverse","dot","ax","ay","az","bx","by","bz","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","random","zScale","transformMat4","m","transformMat3","transformQuat","qx","qy","qz","qw","ix","iy","iz","iw","vec3_rotateX","p","vec3_rotateY","vec3_rotateZ","stride","offset","count","arg","vec","tempA","tempB","cosine","acos","vec3_str","vec3_exactEquals","vec3_equals","mat4_namespaceObject","vec3_namespaceObject","WIDGET_BASE_TYPE","isWidgetBaseConstructor","isWidgetFunction","isWNodeFactory","_shim_Promise__WEBPACK_IMPORTED_MODULE_0__","_shim_Map__WEBPACK_IMPORTED_MODULE_1__","_core_Evented__WEBPACK_IMPORTED_MODULE_2__","_type","widgetLabel","_widgetRegistry","then","widgetCtor","emitLoadedEvent","error","injectorFactory","_injectorRegistry","injectorItem","promise","default","isWidgetConstructorDefaultExport","_vdom__WEBPACK_IMPORTED_MODULE_0__","getInjector","Base_Base","Destroyable","_requestedNodeKeys","_invalidate","_bind","stringKey","own","meta_Base","ResizeObserver","meta_Resize","_details","predicates","getNode","defaultResponse","predicateId","resizeObserver","entry","predicateChanged","contentRect","previousDetails","predicateResponses","response","observe","disconnect","Program","fragmentShader","vertexShader","doLink","attribLocation","getAttribLocation","enableVertexAttribArray","getUniformLocation","createProgram","attachShader","linkProgram","programInfoLog","getProgramInfoLog","getProgramParameter","LINK_STATUS","Shader","source","_source","_compiled","doCompile","shaderType","shader","createShader","shaderSource","compileShader","shaderInfoLog","getShaderInfoLog","getShaderParameter","COMPILE_STATUS","FragmentShader_FragmentShader","WebGL2RenderingContext","FRAGMENT_SHADER","VertexShader_VertexShader","VERTEX_SHADER","radians","GLPanel_GLPanel","GLPanel_DomNodeMeta","WidgetBase","_canvas","_gl","createWebGLContext","fragmentSource","vertexSource","_program","displayHeight","displayWidth","canvasHeight","canvasWidth","resized","viewport","drawingBufferWidth","drawingBufferHeight","clientWidth","clientHeight","handler","onResize","glPanel_m","focus","tabIndex","destroyWebGLContext","canvas","msg","getContext","deleteProgram","extension","getExtension","loseContext","auto","_Registry__WEBPACK_IMPORTED_MODULE_0__","isObjectOrArray","reference","previousProperty","newProperty","ignore","validOldProperty","validNewProperty","previousKeys","newKeys","some","shallow","_vdom__WEBPACK_IMPORTED_MODULE_1__","cacheMap","cachedValue","status","getOrSet","createCommand","_dojo_framework_stores_process__WEBPACK_IMPORTED_MODULE_0__","createCommandFactory","createProcess","_state_operations__WEBPACK_IMPORTED_MODULE_1__","_shim_Map__WEBPACK_IMPORTED_MODULE_2__","command","processMap","valueSymbol","Symbol","proxyError","processExecutor","commands","before","after","transformer","at","executor","executorPayload","commandsCopy","undoOperations","createProxy","proxies","proxied","proxyOperations","createHandler","partialPath","prop","stringPath","proxiedValue","Proxy","removeProxies","newValue","deleteProperty","proxy","resolvedResults","commandFunction","state","Promise","all","message","resolve","nextCallback","processCallback","previousCallback","previousBefore","previousAfter","combineCallbacks","_Patch__WEBPACK_IMPORTED_MODULE_0__","_Pointer__WEBPACK_IMPORTED_MODULE_1__","op","ADD","REPLACE","REMOVE","decode","encode","walk","object","clone","continueOnUndefined","pointerTarget","String","nextSegment","isNaN","Pointer","_segments","join","noop","destroyed","_handles","_core_Evented__WEBPACK_IMPORTED_MODULE_1__","_Registry__WEBPACK_IMPORTED_MODULE_2__","_registry","_registryWidgetLabelMap","_registryInjectorLabelMap","baseRegistry","globalPrecedence","_get","getFunctionName","labelMap","registries","registeredLabels","INJECTED_THEME_KEY","_icache__WEBPACK_IMPORTED_MODULE_1__","_injector__WEBPACK_IMPORTED_MODULE_2__","themeKeys","getTheme","themeInjector","themePayload","_ThemeInjector__WEBPACK_IMPORTED_MODULE_5__","_diff__WEBPACK_IMPORTED_MODULE_4__","themeRegistry","setInvalidator","registerThemeInjector","css","cachedTheme","currentClasses","currentTheme","classKeys","classKey","_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_core_middleware_injector__WEBPACK_IMPORTED_MODULE_2__","isOutlet","onClick","linkProps","href","onclick","defaultPrevented","button","metaKey","ctrlKey","_core_has__WEBPACK_IMPORTED_MODULE_1__","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_middleware_theme__WEBPACK_IMPORTED_MODULE_1__","_dojo_framework_core_ThemeInjector__WEBPACK_IMPORTED_MODULE_2__","coreTheme","uppercaseFirstChar","charAt","isThemeWithVariant","compose","baseCss","baseKey","variantKey","virtualCss"," _key","virtualTheme","variantTheme","baseTheme","prefixedCss","prefixCss","toLowerCase","lowercaseFirstChar","variants","constructedTheme","variantComposesClass","_core_Evented__WEBPACK_IMPORTED_MODULE_0__","_state_Patch__WEBPACK_IMPORTED_MODULE_1__","_state_Pointer__WEBPACK_IMPORTED_MODULE_2__","_shim_Map__WEBPACK_IMPORTED_MODULE_3__","DefaultState","_state","patchResult","array","stringSegments","filter","hasMultipleSegments","pointer","_adapter","_changePaths","_callbackId","paths","callbackId","_addOnChange","changePaths","callbackIdsCalled","callbackItem","_runOnChanges","findAll","read","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","utils","encodeURIComponent","url","paramsSerializer","serializedParams","parts","toISOString","JSON","stringify","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","Content-Type","setContentTypeIfUnset","headers","adapter","defaults","XMLHttpRequest","transformRequest","transformResponse","parse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","Accept","settle","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","baseURL","open","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","cancel","abort","send","enhanceError","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","axiosKeys","otherKeys","Cancel","core_Injector","_payload","_invalidator","isThemeWithVariants","isThemeInjectorPayloadWithVariant","ThemeInjector_ThemeInjector","createThemeInjectorPayload","isVariantModule","wrapNative","nativeFunction","from","of","copyWithin","fill","find","findIndex","includes","flat","flatMap","NodeEventType","core_NodeHandler","_nodeMap","element","Widget","Projector","WidgetBase_WidgetBase","decoratorMap","builtDecoratorMap","boundAuto","IGNORE_LIST","getPrototypeOf","autoBindCache","_initialProperties","_changedPropertyKeys","RegistryHandler","_nodeHandler","_children","_decoratorCache","_properties","_boundRenderFunc","render","_boundInvalidate","inputProperties","_runAfterConstructors","MetaType","_metaMap","cached","changedPropertyKeys","_runBeforeProperties","registeredDiffPropertyNames","getDecorator","ownKeys","descriptors","getterKeys","filteredKeys","k","boundFunc","defineProperty","configurable","autoBind","allProperties","checkedProperties","diffPropertyResults","runReactions","diffFunctions","reactionFunctions","executedReactions","reaction","propertyChanged","reactionRun","_runBeforeRenders","_runAfterRenders","decoratorKey","decoratorList","specificDecoratorList","decorators","allDecorators","instanceMap","unshift","buildDecorators","decoratorCache","_buildDecoratorList","beforeProperties","beforePropertiesFunction","beforeRenders","beforeRenderFunction","updatedRender","warn","dNode","afterRenders","afterRenderFunction","afterRender","isDomMeta","afterConstructors","afterConstructor","OperationType","isEqual","keysForA","getFriendlyDifferenceMessage","expected","actual","actualType","getFriendlyTypeName","expectedType","findArrayDifference","findShallowObjectKeyDifference","operation","TEST","Patch_Patch","_operations","patchedObject","middleware_store","initial","Store","initialized","injectedStore","registeredPaths","accordionPane","avatar","breadcrumbGroup","calendar","card","checkboxGroup","checkbox","chipTypeahead","chip","dateInput","dialog","floatingActionButton","form","gridBody","gridCell","gridFooter","gridHeader","gridPaginatedFooter","gridPlaceholderRow","gridRow","grid","headerCard","helperText","icon","listItem","loadingIndicator","menuItem","nativeSelect","outlinedButton","pagination","passwordInput","progress","radioGroup","radio","raisedButton","rangeSlider","select","slidePane","slider","snackbar","speedDial","switchControl","tabContainer","textArea","textInput","threeColumnLayout","timePicker","titlePane","tooltip","twoColumnLayout","typeahead","darkVariant","defaultVariant","@dojo/widgets/accordion","@dojo/widgets/avatar","@dojo/widgets/breadcrumb-group","@dojo/widgets/button","@dojo/widgets/calendar","@dojo/widgets/card","@dojo/widgets/checkbox-group","@dojo/widgets/checkbox","@dojo/widgets/chip","@dojo/widgets/date-input","@dojo/widgets/dialog","@dojo/widgets/floating-action-button","@dojo/widgets/form","@dojo/widgets/grid-body","@dojo/widgets/grid-cell","@dojo/widgets/grid-footer","@dojo/widgets/grid-header","@dojo/widgets/grid-placeholder-row","@dojo/widgets/grid-paginated-footer","@dojo/widgets/grid-row","@dojo/widgets/grid","@dojo/widgets/header-card","@dojo/widgets/header","@dojo/widgets/helper-text","@dojo/widgets/icon","@dojo/widgets/label","@dojo/widgets/list-item","@dojo/widgets/loading-indicator","@dojo/widgets/menu-item","@dojo/widgets/chip-typeahead","@dojo/widgets/list","@dojo/widgets/outlined-button","@dojo/widgets/native-select","@dojo/widgets/pagination","@dojo/widgets/password-input","@dojo/widgets/progress","@dojo/widgets/radio-group","@dojo/widgets/radio","@dojo/widgets/raised-button","@dojo/widgets/range-slider","@dojo/widgets/result","@dojo/widgets/select","@dojo/widgets/slide-pane","@dojo/widgets/slider","@dojo/widgets/snackbar","@dojo/widgets/speed-dial","@dojo/widgets/switch","@dojo/widgets/tab-container","@dojo/widgets/text-area","@dojo/widgets/text-input","@dojo/widgets/three-column-layout","@dojo/widgets/time-picker","@dojo/widgets/title-pane","@dojo/widgets/tooltip","@dojo/widgets/two-column-layout","@dojo/widgets/typeahead","dark","avatarColor","avatarColorSecondary","small","medium","large","circle","square","rounded","pressed","disabled","dateGrid","weekday","date","abbr","todayDate","inactiveDate","selectedDate","topMatter","monthTrigger","yearTrigger","previous","monthTriggerActive","yearTriggerActive","calendarPagingIcon","monthGrid","yearGrid","monthFields","yearFields","monthRadio","yearRadio","monthRadioLabel","yearRadioLabel","monthRadioChecked","yearRadioChecked","monthRadioInput","yearRadioInput","actionButtons","actionIcons","content","media","mediaSquare","media16by9","titleWrapper","contentWrapper","subtitle","legend","input","inputWrapper","checked","focused","onLabel","offLabel","readonly","invalid","valid","selectedIcon","closeIcon","clickable","toggleCalendarButton","popup","main","underlayVisible","close","extended","groupRoot","fieldRoot","edit","cell","sortable","sorted","-webkit-filter","details","more","pageNav","pageNumber","active","loading","spin","filterGroup","headerContent","clockIcon","eyeIcon","eyeSlashIcon","plusIcon","minusIcon","checkIcon","leftIcon","rightIcon","upIcon","downIcon","upAltIcon","downAltIcon","searchIcon","barsIcon","settingsIcon","alertIcon","helpIcon","infoIcon","cancelIcon","checkedBoxIcon","phoneIcon","editIcon","dateIcon","linkIcon","locationIcon","secureIcon","mailIcon","starIcon","required","selected","menu","divider","bar","inner","arrow","linksWrapper","prev","currentPage","selectWrapper","toggleButton","output","radioBackground","radioOuter","radioInner","filled","thumb","hasOutput","outputTooltip","iconWrapper","statusIcon","iconIcon","alert","info","success","trigger","placeholder","menuWrapper","pane","slideIn","slideOut","track","vertical","stacked","down","actionTransition","underlay","nativeControl","tabButtons","tabButton","disabledTabButton","activeTabButton","closeable","tab","alignLeft","tabs","alignRight","alignBottom","addonRoot","addonFilled","toggleMenuButton","titleButton","contentTransition","triggerWrapper","Axios","mergeConfig","createInstance","defaultConfig","axios","instanceConfig","CancelToken","isCancel","promises","spread","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","fulfilled","rejected","getUri","handlers","use","eject","h","transformData","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","toJSON","description","number","fileName","lineNumber","columnNumber","stack","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","parsed","line","originURL","msie","userAgent","urlParsingNode","resolveURL","protocol","host","search","hostname","port","pathname","requestURL","write","expires","domain","secure","cookie","Date","toGMTString","match","decodeURIComponent","now","TypeError","resolvePromise","token"],"mappings":"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","file":"main.107c136bc2bcf571b31a.bundle.js","sourcesContent":["import global from '../../shim/global';\nimport { History, HistoryOptions, OnChangeFunction } from './../interfaces';\n\nexport class HashHistory implements History {\n\tprivate _onChangeFunction: OnChangeFunction;\n\tprivate _current: string;\n\tprivate _window: Window;\n\n\tconstructor({ window = global.window, onChange }: HistoryOptions) {\n\t\tthis._onChangeFunction = onChange;\n\t\tthis._window = window;\n\t\tthis._window.addEventListener('hashchange', this._onChange, false);\n\t\tthis._current = this.normalizePath(this._window.location.hash);\n\t\tthis._onChangeFunction(this._current);\n\t}\n\n\tpublic normalizePath(path: string): string {\n\t\treturn path.replace('#', '');\n\t}\n\n\tpublic prefix(path: string) {\n\t\tif (path[0] !== '#') {\n\t\t\treturn `#${path}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tpublic set(path: string) {\n\t\tthis._window.location.hash = this.prefix(path);\n\t\tthis._onChange();\n\t}\n\n\tpublic get current(): string {\n\t\treturn this._current;\n\t}\n\n\tpublic destroy() {\n\t\tthis._window.removeEventListener('hashchange', this._onChange);\n\t}\n\n\tprivate _onChange = () => {\n\t\tconst path = this.normalizePath(this._window.location.hash);\n\t\tif (path !== this._current) {\n\t\t\tthis._current = path;\n\t\t\tthis._onChangeFunction(this._current);\n\t\t}\n\t};\n}\n\nexport default HashHistory;\n","import global from '../shim/global';\nimport Evented from '../core/Evented';\nimport {\n\tRouteConfig,\n\tHistory,\n\tRouteContext,\n\tParams,\n\tRouterInterface,\n\tRoute,\n\tRouterOptions,\n\tMatchType\n} from './interfaces';\nimport { HashHistory } from './history/HashHistory';\nimport { EventObject } from '../core/Evented';\n\nconst PARAM = '__PARAM__';\n\nconst paramRegExp = new RegExp(/^{.+}$/);\n\ninterface RouteWrapper {\n\troute: Route;\n\tsegments: string[];\n\tparent: RouteWrapper | undefined;\n\ttype: MatchType;\n\tparams: Params;\n}\n\nexport interface NavEvent extends EventObject<string> {\n\toutlet?: string;\n\tcontext?: RouteContext;\n}\n\nexport interface RouteEvent extends EventObject<string> {\n\troute: RouteContext;\n\taction: 'enter' | 'exit';\n}\n\nexport interface OutletEvent extends EventObject<string> {\n\toutlet: RouteContext;\n\taction: 'enter' | 'exit';\n}\n\nconst ROUTE_SEGMENT_SCORE = 7;\nconst DYNAMIC_SEGMENT_PENALTY = 2;\n\nfunction matchingParams({ params: previousParams }: RouteContext, { params }: RouteContext) {\n\tconst matching = Object.keys(previousParams).every((key) => previousParams[key] === params[key]);\n\tif (!matching) {\n\t\treturn false;\n\t}\n\treturn Object.keys(params).every((key) => previousParams[key] === params[key]);\n}\n\nexport class Router extends Evented<{ nav: NavEvent; route: RouteEvent; outlet: OutletEvent }>\n\timplements RouterInterface {\n\tprivate _routes: Route[] = [];\n\tprivate _routeMap: { [index: string]: Route } = Object.create(null);\n\tprivate _matchedRoutes: { [index: string]: RouteContext } = Object.create(null);\n\tprivate _matchedOutletMap = new Map<string, Map<string, RouteContext>>();\n\tprivate _currentParams: Params = {};\n\tprivate _currentQueryParams: Params = {};\n\tprivate _defaultRoute: string | undefined;\n\tprivate _history!: History;\n\tprivate _options: RouterOptions;\n\tprivate _currentMatchedRoute: RouteContext | undefined;\n\n\tconstructor(config: RouteConfig[], options: RouterOptions = {}) {\n\t\tsuper();\n\t\tthis._options = options;\n\t\tthis._register(config);\n\t\tconst autostart = options.autostart === undefined ? true : options.autostart;\n\t\tif (autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Sets the path against the registered history manager\n\t *\n\t * @param path The path to set on the history manager\n\t */\n\tpublic setPath(path: string): void {\n\t\tthis._history.set(path);\n\t}\n\n\tpublic start() {\n\t\tconst { HistoryManager = HashHistory, base, window } = this._options;\n\t\tthis._history = new HistoryManager({ onChange: this._onChange, base, window });\n\t\tif (this._matchedRoutes.errorRoute && this._defaultRoute) {\n\t\t\tconst path = this.link(this._defaultRoute);\n\t\t\tif (path) {\n\t\t\t\tthis.setPath(path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Generate a link for a given outlet identifier and optional params.\n\t *\n\t * @param outlet The outlet to generate a link for\n\t * @param params Optional Params for the generated link\n\t */\n\tpublic link(outlet: string, params: Params = {}): string | undefined {\n\t\tlet route = this._routeMap[outlet];\n\t\tif (route === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet linkPath: string | undefined = route.fullPath;\n\t\tif (route.fullQueryParams.length > 0) {\n\t\t\tlet queryString = route.fullQueryParams.reduce((queryParamString, param, index) => {\n\t\t\t\tif (index > 0) {\n\t\t\t\t\treturn `${queryParamString}&${param}={${param}}`;\n\t\t\t\t}\n\t\t\t\treturn `?${param}={${param}}`;\n\t\t\t}, '');\n\t\t\tlinkPath = `${linkPath}${queryString}`;\n\t\t}\n\t\tparams = { ...route.defaultParams, ...this._currentQueryParams, ...this._currentParams, ...params };\n\n\t\tif (Object.keys(params).length === 0 && route.fullParams.length > 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst fullParams = [...route.fullParams, ...route.fullQueryParams];\n\t\tfor (let i = 0; i < fullParams.length; i++) {\n\t\t\tconst param = fullParams[i];\n\t\t\tif (params[param]) {\n\t\t\t\tlinkPath = linkPath.replace(`{${param}}`, params[param]);\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn this._history.prefix(linkPath);\n\t}\n\n\t/**\n\t * Returns the route context for the route identifier if one has been matched\n\t *\n\t * @param routeId The route identifer\n\t */\n\tpublic getRoute(routeId: string): RouteContext | undefined {\n\t\treturn this._matchedRoutes[routeId];\n\t}\n\n\tpublic getOutlet(outletId: string): undefined | Map<string, RouteContext> {\n\t\treturn this._matchedOutletMap.get(outletId);\n\t}\n\n\tpublic getMatchedRoute(): RouteContext | undefined {\n\t\treturn this._currentMatchedRoute;\n\t}\n\n\t/**\n\t * Returns all the params for the current matched outlets\n\t */\n\tpublic get currentParams() {\n\t\treturn this._currentParams;\n\t}\n\n\t/**\n\t * Strips the leading slash on a path if one exists\n\t *\n\t * @param path The path to strip a leading slash\n\t */\n\tprivate _stripLeadingSlash(path: string): string {\n\t\tif (path[0] === '/') {\n\t\t\treturn path.slice(1);\n\t\t}\n\t\treturn path;\n\t}\n\n\t/**\n\t * Registers the routing configuration\n\t *\n\t * @param config The configuration\n\t * @param routes The routes\n\t * @param parentRoute The parent route\n\t */\n\tprivate _register(config: RouteConfig[], routes?: Route[], parentRoute?: Route): void {\n\t\troutes = routes ? routes : this._routes;\n\t\tfor (let i = 0; i < config.length; i++) {\n\t\t\tlet { path, outlet, children, defaultRoute = false, defaultParams = {}, id, title } = config[i];\n\t\t\tlet [parsedPath, queryParamString] = path.split('?');\n\t\t\tlet queryParams: string[] = [];\n\t\t\tparsedPath = this._stripLeadingSlash(parsedPath);\n\n\t\t\tconst segments: string[] = parsedPath.split('/');\n\t\t\tconst route: Route = {\n\t\t\t\tparams: [],\n\t\t\t\tid,\n\t\t\t\toutlet,\n\t\t\t\ttitle,\n\t\t\t\tpath: parsedPath,\n\t\t\t\tsegments,\n\t\t\t\tdefaultParams: parentRoute ? { ...parentRoute.defaultParams, ...defaultParams } : defaultParams,\n\t\t\t\tchildren: [],\n\t\t\t\tfullPath: parentRoute ? `${parentRoute.fullPath}/${parsedPath}` : parsedPath,\n\t\t\t\tfullParams: [],\n\t\t\t\tfullQueryParams: [],\n\t\t\t\tscore: parentRoute ? parentRoute.score : 0\n\t\t\t};\n\t\t\tif (defaultRoute) {\n\t\t\t\tthis._defaultRoute = id;\n\t\t\t}\n\t\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\t\tconst segment = segments[i];\n\t\t\t\troute.score += ROUTE_SEGMENT_SCORE;\n\t\t\t\tif (paramRegExp.test(segment)) {\n\t\t\t\t\troute.score -= DYNAMIC_SEGMENT_PENALTY;\n\t\t\t\t\troute.params.push(segment.replace('{', '').replace('}', ''));\n\t\t\t\t\tsegments[i] = PARAM;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (queryParamString) {\n\t\t\t\tqueryParams = queryParamString.split('&').map((queryParam) => {\n\t\t\t\t\treturn queryParam.replace('{', '').replace('}', '');\n\t\t\t\t});\n\t\t\t}\n\t\t\troute.fullQueryParams = parentRoute ? [...parentRoute.fullQueryParams, ...queryParams] : queryParams;\n\n\t\t\troute.fullParams = parentRoute ? [...parentRoute.fullParams, ...route.params] : route.params;\n\n\t\t\tif (children && children.length > 0) {\n\t\t\t\tthis._register(children, route.children, route);\n\t\t\t}\n\t\t\tthis._routeMap[id] = route;\n\t\t\troutes.push(route);\n\t\t}\n\t}\n\n\t/**\n\t * Returns an object of query params\n\t *\n\t * @param queryParamString The string of query params, e.g `paramOne=one&paramTwo=two`\n\t */\n\tprivate _getQueryParams(queryParamString?: string): { [index: string]: string } {\n\t\tconst queryParams: { [index: string]: string } = {};\n\t\tif (queryParamString) {\n\t\t\tconst queryParameters = queryParamString.split('&');\n\t\t\tfor (let i = 0; i < queryParameters.length; i++) {\n\t\t\t\tconst [key, value] = queryParameters[i].split('=');\n\t\t\t\tqueryParams[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn queryParams;\n\t}\n\n\t/**\n\t * Called on change of the route by the the registered history manager. Matches the path against\n\t * the registered outlets.\n\t *\n\t * @param requestedPath The path of the requested route\n\t */\n\tprivate _onChange = (requestedPath: string): void => {\n\t\trequestedPath = this._stripLeadingSlash(requestedPath);\n\t\tconst previousMatchedRoutes = this._matchedRoutes;\n\t\tthis._matchedRoutes = Object.create(null);\n\t\tthis._matchedOutletMap.clear();\n\t\tconst [path, queryParamString] = requestedPath.split('?');\n\t\tthis._currentQueryParams = this._getQueryParams(queryParamString);\n\t\tconst segments = path.split('/');\n\t\tlet routeConfigs: RouteWrapper[] = this._routes.map((route) => ({\n\t\t\troute,\n\t\t\tsegments: [...segments],\n\t\t\tparent: undefined,\n\t\t\tparams: {},\n\t\t\ttype: 'index'\n\t\t}));\n\t\tlet routeConfig: RouteWrapper | undefined;\n\t\tlet matchedRoutes: RouteWrapper[] = [];\n\t\twhile ((routeConfig = routeConfigs.pop())) {\n\t\t\tconst { route, parent, segments, params } = routeConfig;\n\t\t\tlet segmentIndex = 0;\n\t\t\tlet type: MatchType = 'index';\n\t\t\tlet paramIndex = 0;\n\t\t\tlet routeMatch = true;\n\t\t\tif (segments.length < route.segments.length) {\n\t\t\t\trouteMatch = false;\n\t\t\t} else {\n\t\t\t\twhile (segments.length > 0) {\n\t\t\t\t\tif (route.segments[segmentIndex] === undefined) {\n\t\t\t\t\t\ttype = 'partial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst segment = segments.shift()!;\n\t\t\t\t\tif (route.segments[segmentIndex] === PARAM) {\n\t\t\t\t\t\tparams[route.params[paramIndex++]] = segment;\n\t\t\t\t\t\tthis._currentParams = { ...this._currentParams, ...params };\n\t\t\t\t\t} else if (route.segments[segmentIndex] !== segment) {\n\t\t\t\t\t\trouteMatch = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsegmentIndex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (routeMatch) {\n\t\t\t\trouteConfig.type = type;\n\t\t\t\tmatchedRoutes.push({ route, parent, type, params, segments: [] });\n\t\t\t\tif (segments.length) {\n\t\t\t\t\trouteConfigs = [\n\t\t\t\t\t\t...routeConfigs,\n\t\t\t\t\t\t...route.children.map((childRoute) => ({\n\t\t\t\t\t\t\troute: childRoute,\n\t\t\t\t\t\t\tsegments: [...segments],\n\t\t\t\t\t\t\tparent: routeConfig,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tparams: { ...params }\n\t\t\t\t\t\t}))\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet matchedRouteId: string | undefined = undefined;\n\n\t\tlet matchedRoute = matchedRoutes.shift();\n\t\twhile (matchedRoute && matchedRoutes.length) {\n\t\t\tlet currentMatch = matchedRoutes.shift();\n\t\t\tif (currentMatch && currentMatch.route.score > matchedRoute.route.score) {\n\t\t\t\tmatchedRoute = currentMatch;\n\t\t\t}\n\t\t}\n\n\t\tif (matchedRoute) {\n\t\t\tif (matchedRoute.type === 'partial') {\n\t\t\t\tmatchedRoute.type = 'error';\n\t\t\t}\n\t\t\tmatchedRouteId = matchedRoute.route.id;\n\t\t\tconst title = this._options.setDocumentTitle\n\t\t\t\t? this._options.setDocumentTitle({\n\t\t\t\t\t\tid: matchedRouteId,\n\t\t\t\t\t\ttitle: matchedRoute.route.title,\n\t\t\t\t\t\tparams: matchedRoute.params,\n\t\t\t\t\t\tqueryParams: this._currentQueryParams\n\t\t\t\t  })\n\t\t\t\t: matchedRoute.route.title;\n\t\t\tif (title) {\n\t\t\t\tglobal.document.title = title;\n\t\t\t}\n\t\t\twhile (matchedRoute) {\n\t\t\t\tlet { type, params, route } = matchedRoute;\n\t\t\t\tlet parent: RouteWrapper | undefined = matchedRoute.parent;\n\t\t\t\tconst matchedRouteContext: RouteContext = {\n\t\t\t\t\tid: route.id,\n\t\t\t\t\toutlet: route.outlet,\n\t\t\t\t\tqueryParams: this._currentQueryParams,\n\t\t\t\t\tparams,\n\t\t\t\t\ttype,\n\t\t\t\t\tisError: () => type === 'error',\n\t\t\t\t\tisExact: () => type === 'index'\n\t\t\t\t};\n\t\t\t\tconst previousMatchedOutlet = previousMatchedRoutes[route.id];\n\t\t\t\tconst routeMap = this._matchedOutletMap.get(route.outlet) || new Map();\n\t\t\t\trouteMap.set(route.id, matchedRouteContext);\n\t\t\t\tthis._matchedOutletMap.set(route.outlet, routeMap);\n\t\t\t\tthis._matchedRoutes[route.id] = matchedRouteContext;\n\t\t\t\tif (!previousMatchedOutlet || !matchingParams(previousMatchedOutlet, matchedRouteContext)) {\n\t\t\t\t\tthis.emit({ type: 'route', route: matchedRouteContext, action: 'enter' });\n\t\t\t\t\tthis.emit({ type: 'outlet', outlet: matchedRouteContext, action: 'enter' });\n\t\t\t\t}\n\t\t\t\tmatchedRoute = parent;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._matchedRoutes.errorRoute = {\n\t\t\t\tid: 'errorRoute',\n\t\t\t\toutlet: 'errorRoute',\n\t\t\t\tqueryParams: {},\n\t\t\t\tparams: {},\n\t\t\t\tisError: () => true,\n\t\t\t\tisExact: () => false,\n\t\t\t\ttype: 'error'\n\t\t\t};\n\t\t}\n\n\t\tconst previousMatchedOutletKeys = Object.keys(previousMatchedRoutes);\n\t\tfor (let i = 0; i < previousMatchedOutletKeys.length; i++) {\n\t\t\tconst key = previousMatchedOutletKeys[i];\n\t\t\tconst matchedRoute = this._matchedRoutes[key];\n\t\t\tif (!matchedRoute || !matchingParams(previousMatchedRoutes[key], matchedRoute)) {\n\t\t\t\tthis.emit({ type: 'route', route: previousMatchedRoutes[key], action: 'exit' });\n\t\t\t\tthis.emit({ type: 'outlet', outlet: previousMatchedRoutes[key], action: 'exit' });\n\t\t\t}\n\t\t}\n\t\tthis._currentMatchedRoute = matchedRouteId ? this._matchedRoutes[matchedRouteId] : undefined;\n\t\tthis.emit({\n\t\t\ttype: 'nav',\n\t\t\toutlet: matchedRouteId,\n\t\t\tcontext: this._currentMatchedRoute\n\t\t});\n\t\tif (this._options.resetScroll) {\n\t\t\tconst { window = global.window } = this._options;\n\t\t\ttry {\n\t\t\t\twindow.scroll(0, 0);\n\t\t\t} catch (e) {\n\t\t\t\t// Catch errors if we're in an environment without window.scroll\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default Router;\n","import { WidgetBase } from './../WidgetBase';\nimport { handleDecorator } from './handleDecorator';\nimport { beforeProperties } from './beforeProperties';\n\nexport function alwaysRender() {\n\treturn handleDecorator((target, propertyKey) => {\n\t\tbeforeProperties(function(this: WidgetBase) {\n\t\t\tthis.invalidate();\n\t\t})(target);\n\t});\n}\n\nexport default alwaysRender;\n","import WeakMap from '../shim/WeakMap';\nimport { WidgetBase } from '../core/WidgetBase';\nimport { handleDecorator } from '../core/decorators/handleDecorator';\nimport { beforeProperties } from '../core/decorators/beforeProperties';\nimport { alwaysRender } from '../core/decorators/alwaysRender';\nimport { InjectorItem, RegistryLabel, Constructor, DNode } from '../core/interfaces';\nimport { Store, Path } from './Store';\nimport { Registry } from '../core/Registry';\nimport { GetPaths } from './StoreProvider';\nimport { w } from '../core/vdom';\nexport { GetPaths } from './StoreProvider';\nconst registeredInjectorsMap: WeakMap<WidgetBase, InjectorItem<Store>[]> = new WeakMap();\n\nexport interface GetProperties<S extends Store, W extends WidgetBase<any, any> = WidgetBase<any, any>> {\n\t(payload: S, properties: W['properties']): W['properties'];\n}\n\nexport type StoreContainerPath<\n\tS,\n\tP0 extends keyof S = keyof S,\n\tP1 extends keyof S[P0] = keyof S[P0],\n\tP2 extends keyof S[P0][P1] = keyof S[P0][P1],\n\tP3 extends keyof S[P0][P1][P2] = keyof S[P0][P1][P2],\n\tP4 extends keyof S[P0][P1][P2][P3] = keyof S[P0][P1][P2][P3]\n> = [P0] | [P0, P1] | [P0, P1, P2] | [P0, P1, P2, P3] | [P0, P1, P2, P3, P4];\n\nexport interface StoreContainerOptions<S, W extends WidgetBase> {\n\tpaths?: GetPaths<S> | StoreContainerPath<S>[];\n\tgetProperties: GetProperties<Store<S>, W>;\n}\n\nexport interface StoreInjectConfig<S = any> {\n\tname: RegistryLabel;\n\tgetProperties: GetProperties<Store<S>, any>;\n\tpaths?: StoreContainerPath<S>[] | GetPaths<S>;\n}\n\nexport type StoreContainer<T extends WidgetBase<any, any>> = Constructor<\n\tWidgetBase<Partial<T['properties']>, T['children'][0]>\n>;\n\n/**\n * Decorator that registers a store injector with a container based on paths when provided\n *\n * @param config Configuration of the store injector\n */\nexport function storeInject<S>(config: StoreInjectConfig<S>) {\n\tconst { name, paths, getProperties } = config;\n\n\treturn handleDecorator((target, propertyKey) => {\n\t\tbeforeProperties(function(this: WidgetBase & { own: Function }, properties: any) {\n\t\t\tconst injectorItem = this.registry.getInjector<Store<S>>(name);\n\t\t\tif (injectorItem) {\n\t\t\t\tconst { injector } = injectorItem;\n\t\t\t\tconst store = injector();\n\t\t\t\tconst registeredInjectors = registeredInjectorsMap.get(this) || [];\n\t\t\t\tif (registeredInjectors.length === 0) {\n\t\t\t\t\tregisteredInjectorsMap.set(this, registeredInjectors);\n\t\t\t\t}\n\t\t\t\tif (registeredInjectors.indexOf(injectorItem) === -1) {\n\t\t\t\t\tif (paths) {\n\t\t\t\t\t\tlet invalidatePaths: Path<S, any>[];\n\t\t\t\t\t\tif (typeof paths === 'function') {\n\t\t\t\t\t\t\tinvalidatePaths = paths(store.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinvalidatePaths = paths.map((path: any) => store.path(path.join('/')));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst handle = store.onChange(invalidatePaths, () => this.invalidate());\n\t\t\t\t\t\tthis.own({\n\t\t\t\t\t\t\tdestroy: () => {\n\t\t\t\t\t\t\t\thandle.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.own(\n\t\t\t\t\t\t\tstore.on('invalidate', () => {\n\t\t\t\t\t\t\t\tthis.invalidate();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tregisteredInjectors.push(injectorItem);\n\t\t\t\t}\n\t\t\t\treturn getProperties(store, properties);\n\t\t\t}\n\t\t})(target);\n\t});\n}\n\nexport function StoreContainer<S = any, W extends WidgetBase<any, any> = WidgetBase<any, any>>(\n\tcomponent: Constructor<W> | RegistryLabel,\n\tname: RegistryLabel,\n\t{ paths, getProperties }: StoreContainerOptions<S, W>\n): StoreContainer<W> {\n\t@alwaysRender()\n\t@storeInject({ name, paths, getProperties })\n\tclass WidgetContainer extends WidgetBase<Partial<W['properties']>, W['children'][0]> {\n\t\tprotected render(): DNode {\n\t\t\treturn w(component, this.properties, this.children);\n\t\t}\n\t}\n\treturn WidgetContainer;\n}\n\n/**\n * Creates a typed `StoreContainer` for State generic.\n */\nexport function createStoreContainer<S>() {\n\treturn <W extends WidgetBase<any, any>>(\n\t\tcomponent: Constructor<W> | RegistryLabel,\n\t\tname: RegistryLabel,\n\t\t{ paths, getProperties }: StoreContainerOptions<S, W>\n\t) => {\n\t\treturn StoreContainer(component, name, { paths, getProperties });\n\t};\n}\n\nexport interface StoreInjectorOptions {\n\tkey?: RegistryLabel;\n\tregistry?: Registry;\n}\n\nexport function registerStoreInjector<T>(store: Store<T>, options: StoreInjectorOptions = {}) {\n\tconst { key = 'state', registry = new Registry() } = options;\n\n\tif (registry.hasInjector(key)) {\n\t\tthrow new Error(`Store has already been defined for key ${key.toString()}`);\n\t}\n\tregistry.defineInjector(key, () => {\n\t\treturn () => store;\n\t});\n\treturn registry;\n}\n","import { create, diffProperty, invalidator } from '../core/vdom';\nimport injector from '../core/middleware/injector';\nimport icache from '../core/middleware/icache';\nimport { DNode } from '../core/interfaces';\nimport { MatchDetails } from './interfaces';\nimport Router from './Router';\n\nexport interface RouteProperties {\n\trenderer: (matchDetails: MatchDetails) => DNode | DNode[];\n\tid: string;\n\trouterKey?: string;\n}\n\nconst factory = create({ icache, injector, diffProperty, invalidator }).properties<RouteProperties>();\n\nexport const Route = factory(function Route({\n\tmiddleware: { icache, injector, diffProperty, invalidator },\n\tproperties\n}) {\n\tconst { renderer, id, routerKey = 'router' } = properties();\n\tconst currentHandle = icache.get<Function>('handle');\n\tif (!currentHandle) {\n\t\tconst handle = injector.subscribe(routerKey);\n\t\tif (handle) {\n\t\t\ticache.set('handle', () => handle);\n\t\t}\n\t}\n\tdiffProperty('routerKey', (current: RouteProperties, next: RouteProperties) => {\n\t\tconst { routerKey: currentRouterKey = 'router' } = current;\n\t\tconst { routerKey = 'router' } = next;\n\t\tif (routerKey !== currentRouterKey) {\n\t\t\tconst currentHandle = icache.get<Function>('handle');\n\t\t\tif (currentHandle) {\n\t\t\t\tcurrentHandle();\n\t\t\t}\n\t\t\tconst handle = injector.subscribe(routerKey);\n\t\t\tif (handle) {\n\t\t\t\ticache.set('handle', () => handle);\n\t\t\t}\n\t\t}\n\t\tinvalidator();\n\t});\n\tconst router = injector.get<Router>(routerKey);\n\n\tif (router) {\n\t\tconst routeContext = router.getRoute(id);\n\t\tif (routeContext) {\n\t\t\tconst { queryParams, params, type, isError, isExact } = routeContext;\n\t\t\tconst result = renderer({ queryParams, params, type, isError, isExact, router });\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n});\n\nexport default Route;\n","/* eslint-disable prettier/prettier */\nexport default class Cube {\n    private static readonly vertexes = new Float32Array([\n        // front face\n        -1.0, -1.0, 1.0,\n        1.0, -1.0, 1.0,\n        1.0, 1.0, 1.0,\n        -1.0, 1.0, 1.0,\n        // back face\n        -1.0, -1.0, -1.0,\n        -1.0, 1.0, -1.0,\n        1.0, 1.0, -1.0,\n        1.0, -1.0, -1.0,\n        // top face\n        -1.0, 1.0, -1.0,\n        -1.0, 1.0, 1.0,\n        1.0, 1.0, 1.0,\n        1.0, 1.0, -1.0,\n        // bottom face\n        -1.0, -1.0, -1.0,\n        1.0, -1.0, -1.0,\n        1.0, -1.0, 1.0,\n        -1.0, -1.0, 1.0,\n        // right face\n        1.0, -1.0, -1.0,\n        1.0, 1.0, -1.0,\n        1.0, 1.0, 1.0,\n        1.0, -1.0, 1.0,\n        // left face\n        -1.0, -1.0, -1.0,\n        -1.0, -1.0, 1.0,\n        -1.0, 1.0, 1.0,\n        -1.0, 1.0, -1.0,\n    ]);\n    private static readonly colours = [\n        [1.0, 0.0, 0.0, 1.0], // front face\n        [0.0, 1.0, 0.0, 1.0], // back face\n        [0.0, 0.0, 1.0, 1.0], // top face\n        [1.0, 1.0, 0.0, 1.0], // bottom face\n        [1.0, 0.0, 1.0, 1.0], // right face\n        [0.0, 1.0, 1.0, 1.0], // left face\n    ];\n    private static readonly indexes = new Uint16Array([\n        0, 1, 2, 0, 2, 3, // front face\n        4, 5, 6, 4, 6, 7, // back face\n        8, 9, 10, 8, 10, 11, // top face\n        12, 13, 14, 12, 14, 15, // bottom face\n        16, 17, 18, 16, 18, 19, // right face\n        20, 21, 22, 20, 22, 23, // left face\n    ]);\n\n    private readonly gl: WebGL2RenderingContext;\n    private readonly vertexBuffer: WebGLBuffer;\n    private readonly vertexSize: number;\n    private readonly colourBuffer: WebGLBuffer;\n    private readonly colourSize: number;\n    private readonly indexBuffer: WebGLBuffer;\n    private readonly primitiveType: number;\n\n    constructor(gl: WebGL2RenderingContext) {\n        this.gl = gl;\n        this.vertexBuffer = Cube.createBuffer(gl, gl.ARRAY_BUFFER, Cube.vertexes, gl.STATIC_DRAW);\n        this.vertexSize = 3;\n        this.colourBuffer = Cube.createBuffer(gl, gl.ARRAY_BUFFER, Cube.prepareColours(Cube.colours), gl.STATIC_DRAW);\n        this.colourSize = 4;\n        this.indexBuffer = Cube.createBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, Cube.indexes, gl.STATIC_DRAW);\n        this.primitiveType = gl.TRIANGLES;\n    }\n\n    public draw(vertexPositionAttr: number, vertexColourAttr: number): void {\n        const { gl } = this;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.vertexAttribPointer(vertexPositionAttr, this.vertexSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colourBuffer);\n        gl.vertexAttribPointer(vertexColourAttr, this.colourSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        gl.drawElements(this.primitiveType, Cube.indexes.length, gl.UNSIGNED_SHORT, 0);\n    }\n\n    private static createBuffer(\n        gl: WebGL2RenderingContext,\n        target: number,\n        data: ArrayBufferView,\n        usage: number,\n    ): WebGLBuffer {\n        const buffer = gl.createBuffer() as WebGLBuffer;\n        gl.bindBuffer(target, buffer);\n        gl.bufferData(target, data, usage);\n        return buffer;\n    }\n\n    private static prepareColours(rawColours: number[][]): Float32Array {\n        let vertexColours: number[] = [];\n        const vertexesPerFace = 4;\n        for (let i = 0, len = rawColours.length; i < len; i++) {\n            const colour = rawColours[i];\n            for (let j = 0; j < vertexesPerFace; j++) {\n                vertexColours = vertexColours.concat(colour);\n            }\n        }\n        return new Float32Array(vertexColours);\n    }\n}\n","import { mat4, vec3 } from \"gl-matrix-ts\";\nimport GLPanel from \"../../dojo-gl/widgets/GLPanel\";\nimport Cube from \"./model/Cube\";\n\nexport default class CubeScene {\n    private static readonly duration: number = 2500;\n    private static readonly rotationAxis: Float32Array = vec3.fromValues(0.5, -0.5, 0.5);\n\n    private glPanel!: GLPanel;\n\n    private vertexPositionAttr!: number;\n    private vertexColourAttr!: number;\n    private modelViewMatrixUniform!: WebGLUniformLocation;\n    private projectionMatrixUniform!: WebGLUniformLocation;\n\n    private cube!: Cube;\n    private lastTimestamp?: number;\n    private hAnim!: number;\n\n    public onGLReady(glPanel: GLPanel): void {\n        this.glPanel = glPanel;\n        const { gl, program, modelViewMatrix } = glPanel;\n\n        // TODO: the next block should probably live in `Program`\n        this.vertexPositionAttr = program.attribute(\"vertexPos\");\n        this.vertexColourAttr = program.attribute(\"vertexColour\");\n        this.modelViewMatrixUniform = program.uniform(\"modelViewMatrix\");\n        this.projectionMatrixUniform = program.uniform(\"projectionMatrix\");\n\n        this.cube = new Cube(gl);\n        this.lastTimestamp = undefined;\n        mat4.translate(modelViewMatrix, modelViewMatrix, vec3.fromValues(0, 0, -6.667));\n        this.hAnim = window.requestAnimationFrame(this.run);\n    }\n\n    private draw(): void {\n        const { gl, modelViewMatrix, projectionMatrix, program } = this.glPanel;\n\n        gl.clearColor(0.15, 0.15, 0.15, 0.75);\n        gl.enable(gl.DEPTH_TEST);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        gl.useProgram(program.get());\n\n        gl.uniformMatrix4fv(this.modelViewMatrixUniform, false, modelViewMatrix);\n        gl.uniformMatrix4fv(this.projectionMatrixUniform, false, projectionMatrix);\n\n        this.cube.draw(this.vertexPositionAttr, this.vertexColourAttr);\n        // window.console.log('DRAW', JSON.stringify(obj, null, '\\t'), gl.getError());\n    }\n\n    private animate(timestamp: number): void {\n        const glPanel = this.glPanel;\n        const deltaT = timestamp - (this.lastTimestamp || timestamp);\n        const fract = deltaT / CubeScene.duration;\n        const angle = Math.PI * 2 * fract;\n        this.lastTimestamp = timestamp;\n        const { modelViewMatrix } = glPanel;\n        mat4.rotate(modelViewMatrix, modelViewMatrix, angle, CubeScene.rotationAxis);\n    }\n\n    private run = (timestamp: number): void => {\n        this.hAnim = window.requestAnimationFrame(this.run);\n        if (this.glPanel.isReady) {\n            this.draw();\n            this.animate(timestamp);\n        }\n    };\n\n    protected destroy(): void {\n        if (this.hAnim) {\n            window.cancelAnimationFrame(this.hAnim);\n        }\n    }\n}\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\n\nimport * as css from \"./Footer.m.css\";\n\nconst factory = create();\n\nexport default factory(function Footer() {\n    return <footer classes={[css.root]}>{\"\\u00a9\"} Paul Blew 2014-2020. All rights reserved</footer>;\n});\n","import { create, diffProperty, invalidator, w } from '../core/vdom';\nimport { Handle } from '../core/Destroyable';\nimport injector from '../core/middleware/injector';\nimport icache from '../core/middleware/icache';\nimport { SupportedClassName } from '../core/interfaces';\nimport Link, { LinkProperties } from './Link';\nimport Router from './Router';\n\nexport interface ActiveLinkProperties extends LinkProperties {\n\tactiveClasses: SupportedClassName[];\n\tisExact?: boolean;\n}\n\nfunction paramsEqual(linkParams: any = {}, contextParams: any = {}) {\n\treturn Object.keys(linkParams).every((key) => linkParams[key] === contextParams[key]);\n}\n\nconst factory = create({ injector, diffProperty, icache, invalidator }).properties<ActiveLinkProperties>();\n\nexport const ActiveLink = factory(function ActiveLink({\n\tmiddleware: { diffProperty, injector, icache, invalidator },\n\tproperties,\n\tchildren\n}) {\n\tconst { to, routerKey = 'router', params } = properties();\n\tlet { activeClasses, isExact, classes = [], ...props } = properties();\n\n\tdiffProperty('to', (current: ActiveLinkProperties, next: ActiveLinkProperties) => {\n\t\tif (current.to !== next.to) {\n\t\t\tconst router = injector.get<Router>(routerKey);\n\t\t\tconst currentHandle = icache.get<Handle>('handle');\n\t\t\tif (currentHandle) {\n\t\t\t\tcurrentHandle.destroy();\n\t\t\t}\n\t\t\tif (router) {\n\t\t\t\tconst handle = router.on('route', ({ route }) => {\n\t\t\t\t\tif (route.id === to) {\n\t\t\t\t\t\tinvalidator();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ticache.set('handle', () => handle);\n\t\t\t}\n\t\t\tinvalidator();\n\t\t}\n\t});\n\n\tconst router = injector.get<Router>(routerKey);\n\tif (router) {\n\t\tif (!icache.get('handle')) {\n\t\t\tconst handle = router.on('route', ({ route }) => {\n\t\t\t\tif (route.id === to) {\n\t\t\t\t\tinvalidator();\n\t\t\t\t}\n\t\t\t});\n\t\t\ticache.set('handle', () => handle);\n\t\t}\n\t\tconst context = router.getRoute(to);\n\t\tconst isActive = context && paramsEqual(params, { ...context.params, ...context.queryParams });\n\t\tconst contextIsExact = context && context.isExact();\n\n\t\tclasses = Array.isArray(classes) ? classes : [classes];\n\t\tif (isActive && (!isExact || contextIsExact)) {\n\t\t\tclasses = [...classes, ...activeClasses];\n\t\t}\n\t\tprops = { ...props, classes };\n\t}\n\treturn w(Link, props, children());\n});\n\nexport default ActiveLink;\n","import * as css from '../theme/default/header.m.css';\nimport theme from '../middleware/theme';\nimport { RenderResult } from '@dojo/framework/core/interfaces';\nimport { create, tsx } from '@dojo/framework/core/vdom';\n\nexport interface HeaderProperties {\n\t/** Determines if this header is fixed */\n\tsticky?: boolean;\n}\n\nexport type HeaderChildren = {\n\t/** Renderer for leading elements like icons */\n\tleading?: RenderResult;\n\t/** Renderer for the header title */\n\ttitle: RenderResult;\n\t/** Renderer for header actions like links */\n\tactions?: RenderResult;\n\t/** Renderer for trailing elements like search inputs */\n\ttrailing?: RenderResult;\n};\n\nconst factory = create({ theme })\n\t.properties<HeaderProperties>()\n\t.children<HeaderChildren>();\n\nexport const Header = factory(function Header({ children, properties, middleware: { theme } }) {\n\tconst classes = theme.classes(css);\n\tconst { sticky } = properties();\n\tconst { actions, leading, title, trailing } = children()[0];\n\n\treturn (\n\t\t<header key=\"header\" classes={[theme.variant(), sticky ? classes.spacer : undefined]}>\n\t\t\t<div classes={[classes.root, sticky && classes.sticky]} key=\"root\">\n\t\t\t\t<div classes={classes.row}>\n\t\t\t\t\t<div classes={classes.primary} key=\"primary\">\n\t\t\t\t\t\t{leading && <div classes={classes.leading}>{leading}</div>}\n\t\t\t\t\t\t<div classes={classes.title} key=\"title\">\n\t\t\t\t\t\t\t{title && title}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div classes={classes.secondary} key=\"secondary\">\n\t\t\t\t\t\t<nav classes={classes.actions} key=\"actions\">\n\t\t\t\t\t\t\t{actions &&\n\t\t\t\t\t\t\t\t(Array.isArray(actions) ? actions : [actions]).map((action) => (\n\t\t\t\t\t\t\t\t\t<div classes={classes.action}>{action}</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t{trailing && <div classes={classes.trailing}>{trailing}</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t);\n});\n\nexport default Header;\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\nimport Link from \"@dojo/framework/routing/ActiveLink\";\nimport Header from \"@dojo/widgets/header\";\n\nimport * as css from \"./Header.m.css\";\n\nconst factory = create();\n\nexport default factory(function () {\n    return (\n        <div classes={[css.root]}>\n            <Header sticky={true}>\n                {{\n                    title: \"Web Settlers\",\n                    actions: (\n                        <virtual>\n                            <Link to=\"home\" classes={[css.link]} activeClasses={[css.selected]}>\n                                Home\n                            </Link>\n                            <Link to=\"cube\" classes={[css.link]} activeClasses={[css.selected]}>\n                                Cube\n                            </Link>\n                            <Link to=\"testbed\" classes={[css.link]} activeClasses={[css.selected]}>\n                                TestBed\n                            </Link>\n                            <Link to=\"maps\" classes={[css.link]} activeClasses={[css.selected]}>\n                                Maps\n                            </Link>\n                        </virtual>\n                    ),\n                    trailing: <div />,\n                }}\n            </Header>\n        </div>\n    );\n});\n","import { mat4, vec3 } from \"gl-matrix-ts\";\nimport { radians } from \"./widgets/GLPanel\";\n\nexport default class Camera {\n    /**\n     * <pre>\n     * +----+----+----+----+\n     * | Xx | Xy | Xz |  0 |  <- x axis\n     * +----+----+----+----+\n     * | Yx | Yy | Yz |  0 |  <- y axis\n     * +----+----+----+----+\n     * | Zx | Zy | Zz |  0 |  <- z axis\n     * +----+----+----+----+\n     * | Tx | Ty | Tz |  1 |  <- camera position\n     * +----+----+----+----+\n     * </pre>\n     */\n    private readonly matrix: Float32Array;\n    private position: Float32Array;\n    private target: Float32Array;\n    private up: Float32Array;\n\n    public constructor(\n        position = vec3.fromValues(0.0, 0.0, 0.0),\n        target = vec3.fromValues(0.0, 0.0, -1.0),\n        up = vec3.fromValues(0.0, 1.0, 0.0),\n    ) {\n        this.matrix = mat4.create();\n        this.position = position;\n        this.target = target;\n        this.up = up;\n    }\n\n    public getMatrix(): Float32Array {\n        return this.matrix;\n    }\n\n    private update(): void {\n        mat4.lookAt(this.matrix, this.position, this.target, this.up);\n    }\n\n    public moveTo(x: number, y: number, z: number): void {\n        this.position = vec3.fromValues(x, y, z);\n        this.update();\n    }\n\n    public lookAt(x: number, y: number, z: number): void {\n        window.console.log(\"lookAt\", x, y, z);\n        this.target = vec3.fromValues(x, y, z);\n        this.update();\n    }\n\n    public adjustPitch(degrees: number): void {\n        window.console.log(\"pitch\", degrees);\n        mat4.rotateX(this.matrix, this.matrix, radians(degrees));\n    }\n\n    public adjustRoll(degrees: number): void {\n        window.console.log(\"roll\", degrees);\n        mat4.rotateZ(this.matrix, this.matrix, radians(degrees));\n    }\n\n    public adjustYaw(degrees: number): void {\n        window.console.log(\"yaw\", degrees);\n        mat4.rotateY(this.matrix, this.matrix, radians(degrees));\n    }\n}\n","import GLPanel from \"./widgets/GLPanel\";\nimport { EventHandlerResult } from \"@dojo/framework/core/interfaces\";\n\nexport default class KeyController {\n    private readonly pressedKeys: Set<string>;\n    private readonly bindings: Map<string, () => void>;\n\n    public constructor(glPanel: GLPanel) {\n        this.pressedKeys = new Set<string>();\n        this.bindings = new Map<string, () => void>();\n        glPanel.registerEventHandler(\"keydown\", this.onKeyDown.bind(this));\n        glPanel.registerEventHandler(\"keyup\", this.onKeyUp.bind(this));\n    }\n\n    private onKeyDown(ev?: KeyboardEvent): EventHandlerResult {\n        if (!ev) {\n            return;\n        }\n        this.pressedKeys.add(ev.code);\n        ev.preventDefault();\n        return false;\n    }\n\n    private onKeyUp(ev?: KeyboardEvent): EventHandlerResult {\n        if (!ev) {\n            return;\n        }\n        this.pressedKeys.delete(ev.code);\n        ev.preventDefault();\n        return false;\n    }\n\n    public bind(keyName: string, binding: () => void): void {\n        this.bindings.set(keyName, binding);\n    }\n\n    public apply(): void {\n        this.bindings.forEach((binding, keyName) => {\n            if (this.pressedKeys.has(keyName)) {\n                binding();\n            }\n        });\n    }\n}\n","import { vec3 } from \"gl-matrix-ts\";\nimport { MapDefinition } from \"../../../api/api\";\n\nexport type Normal = [number, number, number];\n\nexport interface MapVertex {\n    x: number;\n    y: number;\n    z: number;\n    n: Normal;\n}\n\nexport type MapVertexSet = readonly [MapVertex, MapVertex, MapVertex, MapVertex];\n\ntype NeighbourVertexes = readonly [MapVertex, MapVertex, MapVertex, MapVertex, MapVertex, MapVertex];\n\ntype NeighbourFaceNormals = readonly [Normal, Normal, Normal, Normal, Normal, Normal];\n\nconst v1v2 = vec3.create();\nconst v2v3 = vec3.create();\nconst normalVec = vec3.create();\nfunction calculateFaceNormal(first: MapVertex, second: MapVertex, third: MapVertex): Normal {\n    const v1 = vec3.fromValues(first.x, first.y, first.z);\n    const v2 = vec3.fromValues(second.x, second.y, second.z);\n    const v3 = vec3.fromValues(third.x, third.y, third.z);\n    vec3.subtract(v1v2, v1, v2);\n    vec3.subtract(v2v3, v2, v3);\n    vec3.cross(normalVec, v1v2, v2v3);\n    return [normalVec[0], normalVec[1], normalVec[2]];\n}\n\nfunction calculateFaceNormals(vertex: MapVertex, neighbours: NeighbourVertexes): NeighbourFaceNormals {\n    return [\n        calculateFaceNormal(vertex, neighbours[1], neighbours[0]),\n        calculateFaceNormal(vertex, neighbours[2], neighbours[1]),\n        calculateFaceNormal(vertex, neighbours[3], neighbours[2]),\n        calculateFaceNormal(vertex, neighbours[4], neighbours[3]),\n        calculateFaceNormal(vertex, neighbours[5], neighbours[4]),\n        calculateFaceNormal(vertex, neighbours[0], neighbours[5]),\n    ];\n}\n\nexport default class MapVertexes {\n    private readonly columns: number;\n    private readonly rows: number;\n    private readonly xOffset: number;\n    private readonly yOffset: number;\n    private readonly mapVertices: Array<MapVertex>;\n\n    public constructor(mapDefinition: MapDefinition, nodeSize: number) {\n        const { height, nodes, width } = mapDefinition;\n        this.columns = width + 1;\n        this.rows = height + 1;\n        this.xOffset = (-this.columns * nodeSize) / 2;\n        this.yOffset = (-this.rows * nodeSize) / 2;\n        this.mapVertices = new Array<MapVertex>(this.rows * this.columns);\n        nodes.forEach((node) => {\n            const { altitude, position } = node;\n            const { x, y } = position;\n            this.putVertex(x, y, altitude, nodeSize);\n            if (x === this.columns - 2) {\n                this.putVertex(x + 1, y, altitude, nodeSize);\n            }\n            if (y === this.rows - 2) {\n                this.putVertex(x, y + 1, altitude, nodeSize);\n                if (x === this.columns - 2) {\n                    this.putVertex(x + 1, y + 1, altitude, nodeSize);\n                }\n            }\n        });\n        this.mapVertices.forEach((vertex, index) => this.calculateNormal(vertex, index, this.columns));\n    }\n\n    public getVertexSet(row: number, column: number): MapVertexSet {\n        return MapVertexes.isEvenRow(row)\n            ? [\n                  this.mapVertices[this.getIndex(row, column)],\n                  this.mapVertices[this.getIndex(row + 1, column)],\n                  this.mapVertices[this.getIndex(row, column + 1)],\n                  this.mapVertices[this.getIndex(row + 1, column + 1)],\n              ]\n            : [\n                  this.mapVertices[this.getIndex(row + 1, column)],\n                  this.mapVertices[this.getIndex(row, column)],\n                  this.mapVertices[this.getIndex(row + 1, column + 1)],\n                  this.mapVertices[this.getIndex(row, column + 1)],\n              ];\n    }\n\n    private getIndex(row: number, column: number): number {\n        return row * this.columns + column;\n    }\n\n    private putVertex(x: number, y: number, altitude: number, nodeSize: number): void {\n        const index = this.getIndex(y, x);\n        const rowXOffset = MapVertexes.isEvenRow(y) ? 0 : nodeSize / 2;\n        this.mapVertices[index] = {\n            x: -(this.xOffset + x * nodeSize + rowXOffset),\n            y: this.yOffset + y * nodeSize,\n            z: altitude * (nodeSize / 6),\n            n: [0.0, 0.0, 0.0],\n        };\n    }\n\n    private calculateNormal(vertex: MapVertex, index: number, columns: number): void {\n        const neighbours = this.findNeighbours(index, columns);\n        const faceNormals = calculateFaceNormals(vertex, neighbours);\n        const { n } = vertex;\n        faceNormals.forEach((faceNormal) => vec3.add(n, n, faceNormal));\n        MapVertexes.fixNormalAtMapEdge(n);\n        vec3.normalize(n, n);\n    }\n\n    private findNeighbours(index: number, columns: number): NeighbourVertexes {\n        return [\n            this.mapVertices[this.clampIndex(index - 1)],\n            this.mapVertices[this.clampIndex(index - columns - 1)],\n            this.mapVertices[this.clampIndex(index - columns)],\n            this.mapVertices[this.clampIndex(index + 1)],\n            this.mapVertices[this.clampIndex(index + columns)],\n            this.mapVertices[this.clampIndex(index + columns - 1)],\n        ];\n    }\n\n    private clampIndex(rawIndex: number): number {\n        return (this.mapVertices.length + rawIndex) % this.mapVertices.length;\n    }\n\n    private static fixNormalAtMapEdge(n: Normal): void {\n        if (n[2] < 0) {\n            n[2] = Math.abs(n[2]);\n        }\n    }\n\n    private static isEvenRow(row: number): boolean {\n        return row % 2 === 0;\n    }\n}\n","import { TerrainType, WorldType } from \"../../../api/api\";\n\ntype rgba = { r: number; g: number; b: number; a: number };\ntype TerrainColours = Record<TerrainType, rgba>;\n\nconst makeColour = (rgb: string): rgba => {\n    const r = parseInt(rgb.substr(1, 2), 16) / 255;\n    const g = parseInt(rgb.substr(3, 2), 16) / 255;\n    const b = parseInt(rgb.substr(5, 2), 16) / 255;\n    return { r, g, b, a: 1.0 };\n};\n\nconst greenlandColours: TerrainColours = {\n    SAVANNAH: makeColour(\"#959d53\"),\n    MOUNTAIN1: makeColour(\"#9e8b6f\"),\n    SNOW: makeColour(\"#c6d1d7\"),\n    SWAMP: makeColour(\"#46793b\"),\n    DESERT1: makeColour(\"#c2a07f\"),\n    WATER: makeColour(\"#006887\"),\n    WATER_BUILDABLE: makeColour(\"#006887\"),\n    DESERT2: makeColour(\"#c2a07f\"),\n    MEADOW1: makeColour(\"#5a8713\"),\n    MEADOW2: makeColour(\"#568312\"),\n    MEADOW3: makeColour(\"#588513\"),\n    MOUNTAIN2: makeColour(\"#a08d71\"),\n    MOUNTAIN3: makeColour(\"#978469\"),\n    MOUNTAIN4: makeColour(\"#907e64\"),\n    STEPPE: makeColour(\"#b1a06f\"),\n    MEADOW_FLOWER: makeColour(\"#678728\"),\n    LAVA: makeColour(\"#bd6b08\"),\n    MAGENTA: makeColour(\"#ff008f\"),\n    MOUNTAIN_MEADOW: makeColour(\"#898768\"),\n    WATER_BLOCKS_SHIPS: makeColour(\"#006887\"),\n    LAVA2: makeColour(\"#ff008f\"),\n    LAVA3: makeColour(\"#ff008f\"),\n    LAVA4: makeColour(\"#ff008f\"),\n    MOUNTAIN_BUILDABLE: makeColour(\"#9e8b6f\"),\n};\n\nconst lavalandColours: TerrainColours = {\n    SAVANNAH: makeColour(\"#5a594f\"),\n    MOUNTAIN1: makeColour(\"#505251\"),\n    SNOW: makeColour(\"#7f200f\"),\n    SWAMP: makeColour(\"#692f21\"),\n    DESERT1: makeColour(\"#9d7f68\"),\n    WATER: makeColour(\"#464931\"),\n    WATER_BUILDABLE: makeColour(\"#464931\"),\n    DESERT2: makeColour(\"#9d7f68\"),\n    MEADOW1: makeColour(\"#605f52\"),\n    MEADOW2: makeColour(\"#6d6452\"),\n    MEADOW3: makeColour(\"#796b58\"),\n    MOUNTAIN2: makeColour(\"#4c484a\"),\n    MOUNTAIN3: makeColour(\"#4b433e\"),\n    MOUNTAIN4: makeColour(\"#4a3d30\"),\n    STEPPE: makeColour(\"#8c7a65\"),\n    MEADOW_FLOWER: makeColour(\"#766857\"),\n    LAVA: makeColour(\"#811900\"),\n    MAGENTA: makeColour(\"#4f1f23\"),\n    MOUNTAIN_MEADOW: makeColour(\"#5c362a\"),\n    WATER_BLOCKS_SHIPS: makeColour(\"#464931\"),\n    LAVA2: makeColour(\"#4f1f23\"),\n    LAVA3: makeColour(\"#4f1f23\"),\n    LAVA4: makeColour(\"#4f1f23\"),\n    MOUNTAIN_BUILDABLE: makeColour(\"#505251\"),\n};\n\nconst winterlandColours: TerrainColours = {\n    SAVANNAH: makeColour(\"#a8afc3\"),\n    MOUNTAIN1: makeColour(\"#6c708f\"),\n    SNOW: makeColour(\"#044980\"),\n    SWAMP: makeColour(\"#074d83\"),\n    DESERT1: makeColour(\"#006daf\"),\n    WATER: makeColour(\"#00326f\"),\n    WATER_BUILDABLE: makeColour(\"#00326f\"),\n    DESERT2: makeColour(\"#006daf\"),\n    MEADOW1: makeColour(\"#a8a7ae\"),\n    MEADOW2: makeColour(\"#a6ab9f\"),\n    MEADOW3: makeColour(\"#9aadb5\"),\n    MOUNTAIN2: makeColour(\"#6f80a4\"),\n    MOUNTAIN3: makeColour(\"#7e7990\"),\n    MOUNTAIN4: makeColour(\"#757b9e\"),\n    STEPPE: makeColour(\"#97a096\"),\n    MEADOW_FLOWER: makeColour(\"#9b9dac\"),\n    LAVA: makeColour(\"#903f02\"),\n    MAGENTA: makeColour(\"#000000\"),\n    MOUNTAIN_MEADOW: makeColour(\"#a4afce\"),\n    WATER_BLOCKS_SHIPS: makeColour(\"#00326f\"),\n    LAVA2: makeColour(\"#000000\"),\n    LAVA3: makeColour(\"#000000\"),\n    LAVA4: makeColour(\"#000000\"),\n    MOUNTAIN_BUILDABLE: makeColour(\"#575b6f\"),\n};\n\nconst colours: Record<WorldType, TerrainColours> = {\n    GREENLAND: greenlandColours,\n    LAVALAND: lavalandColours,\n    WINTERLAND: winterlandColours,\n};\n\nexport const colour = (worldType: WorldType, terrainType: TerrainType): rgba => colours[worldType][terrainType];\n","import { MapDefinition, MapNode, TerrainType } from \"../../../api/api\";\nimport MapVertexes, { MapVertex } from \"./MapVertexes\";\nimport { colour } from \"./Terrain\";\n\nfunction* sequence(length: number): Generator<number> {\n    let i = 0;\n    while (i < length) {\n        yield i++;\n    }\n}\n\nexport interface RenderArrays {\n    vertexes: Float32Array;\n    colours: Float32Array;\n    normals: Float32Array;\n    indexes: Uint32Array;\n}\n\ninterface Terrain {\n    terrain1: TerrainType;\n    terrain2: TerrainType;\n}\n\nfunction getTerrain(nodes: MapNode[], index: number): Terrain {\n    return nodes[index % nodes.length];\n}\n\nexport default function (mapDefinition: MapDefinition, nodeSize = 1.0): RenderArrays {\n    const { height, nodes, width, worldType } = mapDefinition;\n    const numVertexes = width * height * 6; // width * height * 2 + 2;\n    const numDegenerate = 0; // (height - 1) * 2;\n\n    const vertexes = new Float32Array(numVertexes * 3);\n    const colours = new Float32Array(numVertexes * 4);\n    const normals = new Float32Array(numVertexes * 3);\n    const indexes = new Uint32Array(numVertexes + numDegenerate);\n\n    let pVertex = 0;\n    let pColour = 0;\n    let pNormal = 0;\n    let pIndex = 0;\n    let nIndex = 0;\n\n    function emitVertex(mapVertex: MapVertex, terrain: TerrainType): void {\n        const { x, y, z, n } = mapVertex;\n        const { r, g, b, a } = colour(worldType, terrain);\n        vertexes[pVertex++] = x;\n        vertexes[pVertex++] = y;\n        vertexes[pVertex++] = z;\n        colours[pColour++] = r;\n        colours[pColour++] = g;\n        colours[pColour++] = b;\n        colours[pColour++] = a;\n        normals[pNormal++] = n[0];\n        normals[pNormal++] = n[1];\n        normals[pNormal++] = n[2];\n        indexes[pIndex++] = nIndex++;\n    }\n\n    const mapVertexes = new MapVertexes(mapDefinition, nodeSize);\n    const rows = sequence(height);\n    for (const row of rows) {\n        const isEvenRow = row % 2 === 0;\n        const columns = sequence(width);\n        for (const column of columns) {\n            const vertexSet = mapVertexes.getVertexSet(row, column);\n            const { terrain1, terrain2 } = getTerrain(nodes, row * width + column);\n            const { terrain1: terrain3 } = getTerrain(nodes, row * width + column + 1);\n            if (isEvenRow) {\n                emitVertex(vertexSet[0], terrain2);\n                emitVertex(vertexSet[1], terrain2);\n                emitVertex(vertexSet[2], terrain2);\n                emitVertex(vertexSet[3], terrain3);\n                emitVertex(vertexSet[2], terrain3);\n                emitVertex(vertexSet[1], terrain3);\n            } else {\n                emitVertex(vertexSet[2], terrain1);\n                emitVertex(vertexSet[1], terrain1);\n                emitVertex(vertexSet[0], terrain1);\n                emitVertex(vertexSet[1], terrain2);\n                emitVertex(vertexSet[2], terrain2);\n                emitVertex(vertexSet[3], terrain2);\n            }\n        }\n    }\n\n    return { vertexes, colours, normals, indexes };\n}\n","import { MapDefinition } from \"../../../api/api\";\nimport landscape from \"./landscape\";\n\nexport default class Map {\n    private readonly gl: WebGL2RenderingContext;\n\n    private readonly mapDefinition: MapDefinition;\n    private readonly vertexes: Float32Array;\n    private readonly colours: Float32Array;\n    private readonly normals: Float32Array;\n    private readonly indexes: Uint32Array;\n\n    private readonly vertexBuffer: WebGLBuffer;\n    private readonly vertexSize: number;\n    private readonly colourBuffer: WebGLBuffer;\n    private readonly colourSize: number;\n    private readonly normalBuffer: WebGLBuffer;\n    private readonly normalSize: number;\n    private readonly indexBuffer: WebGLBuffer;\n    private readonly primitiveType: GLenum;\n\n    constructor(gl: WebGL2RenderingContext, mapDefinition: MapDefinition) {\n        this.gl = gl;\n\n        console.log(`nodes=${mapDefinition.nodes.length} (${mapDefinition.width}x${mapDefinition.height})`);\n        this.mapDefinition = mapDefinition;\n        const { vertexes, colours, normals, indexes } = landscape(this.mapDefinition);\n        this.vertexes = vertexes;\n        this.colours = colours;\n        this.normals = normals;\n        this.indexes = indexes;\n\n        this.vertexBuffer = Map.createBuffer(gl, gl.ARRAY_BUFFER, this.vertexes, gl.STATIC_DRAW);\n        this.vertexSize = 3;\n        this.colourBuffer = Map.createBuffer(gl, gl.ARRAY_BUFFER, this.colours, gl.STATIC_DRAW);\n        this.colourSize = 4;\n        this.normalBuffer = Map.createBuffer(gl, gl.ARRAY_BUFFER, this.normals, gl.STATIC_DRAW);\n        this.normalSize = 3;\n        this.indexBuffer = Map.createBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, this.indexes, gl.STATIC_DRAW);\n        this.primitiveType = gl.TRIANGLES; // TODO: gl.TRIANGLE_STRIP;\n    }\n\n    public draw(vertexPositionAttr: number, vertexColourAttr: number, vertexNormalAttr: number): void {\n        const { gl } = this;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.vertexAttribPointer(vertexPositionAttr, this.vertexSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colourBuffer);\n        gl.vertexAttribPointer(vertexColourAttr, this.colourSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.normalBuffer);\n        gl.vertexAttribPointer(vertexNormalAttr, this.normalSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        gl.drawElements(this.primitiveType, this.indexes.length, gl.UNSIGNED_INT, 0);\n    }\n\n    private static createBuffer(\n        gl: WebGL2RenderingContext,\n        target: GLenum,\n        data: ArrayBufferView,\n        usage: GLenum,\n    ): WebGLBuffer {\n        const buffer = gl.createBuffer() as WebGLBuffer;\n        gl.bindBuffer(target, buffer);\n        gl.bufferData(target, data, usage);\n        return buffer;\n    }\n}\n","import { mat4, vec3 } from \"gl-matrix-ts\";\nimport { MapDefinition } from \"../../api/api\";\nimport Camera from \"../../dojo-gl/Camera\";\nimport KeyController from \"../../dojo-gl/KeyController\";\nimport GLPanel, { radians } from \"../../dojo-gl/widgets/GLPanel\";\nimport Map from \"./model/Map\";\n\nexport default class MapScene {\n    private static readonly duration: number = 300000;\n\n    private readonly camera: Camera;\n    private cameraDistance!: number;\n    private cameraAngle: number;\n    private cameraHeight!: number;\n    private cameraSpeed: number;\n    //TODO: identical to CubeScene -> extract to common superclass\n    private glPanel!: GLPanel;\n    private keyController!: KeyController;\n    private lastTimestamp?: number;\n    private hAnim!: number;\n\n    private vertexPositionAttr!: number;\n    private vertexColourAttr!: number;\n    private vertexNormalAttr!: number;\n    private modelViewMatrixUniform!: WebGLUniformLocation;\n    private projectionMatrixUniform!: WebGLUniformLocation;\n    private reverseLightDirectionLocationUniform!: WebGLUniformLocation;\n\n    private map!: Map;\n\n    public constructor() {\n        this.camera = new Camera(undefined, undefined, vec3.fromValues(0, 0, -1));\n        this.cameraAngle = 0.0;\n        this.cameraSpeed = 0.0;\n    }\n\n    public onGLReady(glPanel: GLPanel, data: unknown): void {\n        //TODO: identical to CubeScene -> extract to common superclass\n        this.glPanel = glPanel;\n\n        this.keyController = new KeyController(glPanel);\n        this.keyController.bind(\"ArrowDown\", () => (this.cameraHeight = Math.max(0.0, this.cameraHeight - 0.2)));\n        this.keyController.bind(\"ArrowUp\", () => (this.cameraHeight += 0.2));\n        this.keyController.bind(\"ArrowLeft\", () => (this.cameraSpeed += 0.05));\n        this.keyController.bind(\"ArrowRight\", () => (this.cameraSpeed -= 0.05));\n        this.keyController.bind(\"Home\", () => {\n            this.cameraSpeed = 0.0;\n            this.cameraAngle = 0.0;\n            this.cameraHeight = this.cameraDistance / 3;\n        });\n        this.keyController.bind(\"Space\", () => (this.cameraSpeed = 0.0));\n        const { gl, program } = glPanel;\n\n        // TODO: the next block should probably live in `Program`\n        this.vertexPositionAttr = program.attribute(\"vertexPos\");\n        this.vertexColourAttr = program.attribute(\"vertexColour\");\n        this.vertexNormalAttr = program.attribute(\"vertexNormal\");\n        this.modelViewMatrixUniform = program.uniform(\"modelViewMatrix\");\n        this.projectionMatrixUniform = program.uniform(\"projectionMatrix\");\n        this.reverseLightDirectionLocationUniform = program.uniform(\"reverseLightDirection\");\n\n        const mapDefinition = data as MapDefinition;\n        this.map = new Map(gl, mapDefinition);\n        this.cameraDistance = mapDefinition.height;\n        this.cameraHeight = this.cameraDistance / 3;\n\n        //TODO: identical to CubeScene -> extract to common superclass\n        this.lastTimestamp = undefined;\n        this.hAnim = window.requestAnimationFrame(this.run);\n    }\n\n    private draw(): void {\n        const { gl, modelViewMatrix, projectionMatrix, reverseLightDirection, program } = this.glPanel;\n\n        gl.clearColor(0.15, 0.15, 0.15, 0.75);\n        gl.enable(gl.CULL_FACE);\n        gl.enable(gl.DEPTH_TEST);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        gl.useProgram(program.get());\n\n        gl.uniformMatrix4fv(this.modelViewMatrixUniform, false, modelViewMatrix);\n        gl.uniformMatrix4fv(this.projectionMatrixUniform, false, projectionMatrix);\n        gl.uniform3fv(this.reverseLightDirectionLocationUniform, reverseLightDirection);\n\n        this.map.draw(this.vertexPositionAttr, this.vertexColourAttr, this.vertexNormalAttr);\n        // window.console.log('DRAW', JSON.stringify(obj, null, '\\t'), gl.getError());\n    }\n\n    private animate(timestamp: number): void {\n        const { camera, cameraDistance, glPanel, lastTimestamp } = this;\n        const deltaT = timestamp - (lastTimestamp || timestamp);\n        this.lastTimestamp = timestamp;\n\n        this.keyController.apply();\n\n        const angle = (this.cameraSpeed * deltaT) / MapScene.duration;\n        this.cameraAngle = (this.cameraAngle + angle) % 360;\n\n        const { modelViewMatrix } = glPanel;\n        this.camera.moveTo(\n            cameraDistance * Math.sin(radians(this.cameraAngle)),\n            cameraDistance * Math.cos(radians(this.cameraAngle)),\n            this.cameraHeight,\n        );\n        mat4.copy(modelViewMatrix, camera.getMatrix());\n    }\n\n    //TODO: identical to CubeScene -> extract to common superclass\n    private run = (timestamp: number): void => {\n        this.hAnim = window.requestAnimationFrame(this.run);\n        if (this.glPanel.isReady) {\n            this.draw();\n            this.animate(timestamp);\n        }\n    };\n\n    //TODO: identical to CubeScene -> extract to common superclass\n    protected destroy(): void {\n        if (this.hAnim) {\n            window.cancelAnimationFrame(this.hAnim);\n        }\n    }\n}\n","/* eslint-disable prettier/prettier */\nconst NONE = [ 0.0, 0.0, 0.0, 0.0 ];\n// const BLACK = [ 0.0, 0.0, 0.0, 1.0 ];\nconst BLUE = [ 0.0, 0.0, 1.0, 1.0 ];\nconst GREEN = [ 0.0, 1.0, 0.0, 1.0 ];\n// const CYAN = [ 0.0, 1.0, 1.0, 1.0 ];\nconst RED = [ 1.0, 0.0, 0.0, 1.0 ];\n// const MAGENTA = [ 1.0, 0.0, 1.0, 1.0 ];\nconst YELLOW = [ 1.0, 1.0, 0.0, 1.0 ];\n// const WHITE = [ 1.0, 1.0, 1.0, 1.0 ];\n\nconst rawColours = [\n    /*row 1*/ [ [NONE, NONE], [BLUE, GREEN], [GREEN, GREEN], [BLUE, BLUE] ],\n    /*row 2*/ [ [GREEN, BLUE], [GREEN, RED], [BLUE, YELLOW], [NONE, NONE] ],\n    /*row 3*/ [ [NONE, NONE], [BLUE, BLUE], [YELLOW, YELLOW], [YELLOW, BLUE] ],\n];\nfunction* ascendingsequence(length: number): Generator<number> {\n    let i = 0;\n    while (i < length) {\n        yield i++;\n    }\n}\nfunction* descendingsequence(length: number): Generator<number> {\n    let i = length;\n    while (i > 0) {\n        yield --i;\n    }\n}\nfunction coordToVertex(\n    ystart: number, xstart: number, row: number, col: number, nodeSize: number\n): { x: number; y: number; z: number } {\n    const xadjust = row % 2 === 0 ? 0 : nodeSize / 2;\n    const x = -(xstart + xadjust + (col * nodeSize));\n    const y = ystart + (row * nodeSize);\n    const z = 0.0;\n    return { x, y, z };\n}\nfunction generateTriangleStrip(\n    width: number, height: number, nodeSize = 1.5\n): { vertexes: Float32Array, colours: Float32Array, indexes: Uint16Array } {\n    const numVertexes = ((width * (height - 1) * 2));\n    const numDegenerate = (height - 1) * 2;\n    const vertexes = new Float32Array(numVertexes * 3);\n    const colours = new Float32Array(numVertexes * 4);\n    const indexes = new Uint16Array(numVertexes + numDegenerate);\n    let v = 0;\n    let c = 0;\n    let i = 0;\n    let n = 0;\n    const ystart = 0 - (height / 2) * nodeSize;\n    const xstart = 0 - (width / 2) * nodeSize;\n    const rows = ascendingsequence(height - 1);\n    for (const row of rows) {\n        const cols = row % 2 === 0 ? ascendingsequence(width) : descendingsequence(width);\n        for (const col of cols) {\n            const { x: x1, y: y1, z: z1 } = coordToVertex(ystart, xstart, row, col, nodeSize);\n            vertexes[v++] = x1;\n            vertexes[v++] = y1;\n            vertexes[v++] = z1;\n            const vertex1Colour = rawColours[row][col][0];\n            colours[c++] = vertex1Colour[0];\n            colours[c++] = vertex1Colour[1];\n            colours[c++] = vertex1Colour[2];\n            colours[c++] = vertex1Colour[3];\n            indexes[i++] = n++;\n\n            const { x: x2, y: y2, z: z2 } = coordToVertex(ystart, xstart, row + 1, col, nodeSize);\n            vertexes[v++] = x2;\n            vertexes[v++] = y2;\n            vertexes[v++] = z2;\n            const vertex2Colour = rawColours[row][col][1];\n            colours[c++] = vertex2Colour[0];\n            colours[c++] = vertex2Colour[1];\n            colours[c++] = vertex2Colour[2];\n            colours[c++] = vertex2Colour[3];\n            indexes[i++] = n++;\n        }\n        if (row < height - 2) {\n            indexes[i++] = n; // degenerate triangle at end of row\n        }\n    }\n    return { vertexes, colours, indexes };\n}\n/*\n      c1  c2  c3  c4\nr1    0---1---2---3\n       \\B/G\\G/G\\B/B\\\nr2      4---5---6---7\n       /B\\G/R\\G/Y\\B/\nr3    8---9---a---b\n       \\B\\B\\Y/Y\\Y/B\\\nr4      c---d---e---f\n */\nexport default class TestBed {\n    private readonly ts: ReturnType<typeof generateTriangleStrip>;\n    private readonly gl: WebGL2RenderingContext;\n    private readonly vertexBuffer: WebGLBuffer;\n    private readonly vertexSize: number;\n    private readonly colourBuffer: WebGLBuffer;\n    private readonly colourSize: number;\n    private readonly indexBuffer: WebGLBuffer;\n    private readonly primitiveType: number;\n\n    constructor(gl: WebGL2RenderingContext) {\n        this.ts = generateTriangleStrip(4, 4);\n        this.gl = gl;\n        this.vertexBuffer = TestBed.createBuffer(gl, gl.ARRAY_BUFFER, this.ts.vertexes, gl.STATIC_DRAW);\n        this.vertexSize = 3; // x, y, z\n        this.colourBuffer = TestBed.createBuffer(gl, gl.ARRAY_BUFFER, this.ts.colours, gl.STATIC_DRAW);\n        this.colourSize = 4; // r, g, b, a\n        this.indexBuffer = TestBed.createBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, this.ts.indexes, gl.STATIC_DRAW);\n        this.primitiveType = gl.TRIANGLE_STRIP;\n    }\n\n    public draw(vertexPositionAttr: number, vertexColourAttr: number): void {\n        const { gl } = this;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.vertexAttribPointer(vertexPositionAttr, this.vertexSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colourBuffer);\n        gl.vertexAttribPointer(vertexColourAttr, this.colourSize, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        gl.drawElements(this.primitiveType, this.ts.indexes.length, gl.UNSIGNED_SHORT, 0);\n    }\n\n    private static createBuffer(\n        gl: WebGL2RenderingContext,\n        target: number,\n        data: ArrayBufferView,\n        usage: number,\n    ): WebGLBuffer {\n        const buffer = gl.createBuffer() as WebGLBuffer;\n        gl.bindBuffer(target, buffer);\n        gl.bufferData(target, data, usage);\n        return buffer;\n    }\n}\n","import { mat4, vec3 } from \"gl-matrix-ts\";\nimport GLPanel from \"../../dojo-gl/widgets/GLPanel\";\nimport TestBed from \"./model/TestBed\";\n\nexport default class TestBedScene {\n    private static readonly duration: number = 75000;\n    private static readonly rotationAxis: Float32Array = vec3.fromValues(0.0, 0.0, 1.0);\n\n    //TODO: identical to CubeScene -> extract to common superclass\n    private glPanel!: GLPanel;\n    private lastTimestamp?: number;\n    private hAnim!: number;\n\n    private testbed!: TestBed;\n    private vertexPositionAttr!: number;\n    private vertexColourAttr!: number;\n    private modelViewMatrixUniform!: WebGLUniformLocation;\n    private projectionMatrixUniform!: WebGLUniformLocation;\n\n    public onGLReady(glPanel: GLPanel): void {\n        //TODO: identical to CubeScene -> extract to common superclass\n        this.glPanel = glPanel;\n        const { gl, program } = glPanel;\n\n        // TODO: the next block should probably live in `Program`\n        this.vertexPositionAttr = program.attribute(\"vertexPos\");\n        this.vertexColourAttr = program.attribute(\"vertexColour\");\n        this.modelViewMatrixUniform = program.uniform(\"modelViewMatrix\");\n        this.projectionMatrixUniform = program.uniform(\"projectionMatrix\");\n\n        mat4.translate(glPanel.modelViewMatrix, glPanel.modelViewMatrix, vec3.fromValues(0, 0, -10));\n        this.testbed = new TestBed(gl);\n\n        //TODO: identical to CubeScene -> extract to common superclass\n        this.lastTimestamp = undefined;\n        this.hAnim = window.requestAnimationFrame(this.run);\n    }\n\n    private draw(): void {\n        const { gl, modelViewMatrix, projectionMatrix, program } = this.glPanel;\n\n        gl.clearColor(0.15, 0.15, 0.15, 0.75);\n        gl.enable(gl.CULL_FACE);\n        gl.enable(gl.DEPTH_TEST);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        gl.useProgram(program.get());\n\n        gl.uniformMatrix4fv(this.modelViewMatrixUniform, false, modelViewMatrix);\n        gl.uniformMatrix4fv(this.projectionMatrixUniform, false, projectionMatrix);\n\n        this.testbed.draw(this.vertexPositionAttr, this.vertexColourAttr);\n        // window.console.log('DRAW', JSON.stringify(obj, null, '\\t'), gl.getError());\n    }\n\n    private animate(timestamp: number): void {\n        const glPanel = this.glPanel;\n        const deltaT = timestamp - (this.lastTimestamp || timestamp);\n        const fract = deltaT / TestBedScene.duration;\n        const angle = Math.PI * 5 * fract;\n        this.lastTimestamp = timestamp;\n        const { modelViewMatrix } = glPanel;\n        mat4.rotate(modelViewMatrix, modelViewMatrix, angle, TestBedScene.rotationAxis);\n    }\n\n    //TODO: identical to CubeScene -> extract to common superclass\n    private run = (timestamp: number): void => {\n        this.hAnim = window.requestAnimationFrame(this.run);\n        if (this.glPanel.isReady) {\n            this.draw();\n            this.animate(timestamp);\n        }\n    };\n\n    //TODO: identical to CubeScene -> extract to common superclass\n    protected destroy(): void {\n        if (this.hAnim) {\n            window.cancelAnimationFrame(this.hAnim);\n        }\n    }\n}\n","import { DNode } from \"@dojo/framework/core/interfaces\";\nimport theme from \"@dojo/framework/core/middleware/theme\";\nimport { create, tsx } from \"@dojo/framework/core/vdom\";\nimport { MatchDetails } from \"@dojo/framework/routing/interfaces\";\nimport Route from \"@dojo/framework/routing/Route\";\nimport themeDefinition from \"@dojo/widgets/theme/dojo\";\n\nimport * as css from \"./App.m.css\";\n\nimport CubePanel from \"./widgets/cube/Cube\";\nimport CubeScene from \"./widgets/cube/CubeScene\";\nimport Footer from \"./widgets/footer/Footer\";\nimport Menu from \"./widgets/header/Header\";\nimport Home from \"./widgets/home/Home\";\nimport MapList from \"./widgets/mapList/MapList\";\nimport MapPanel from \"./widgets/mapPanel/MapPanel\";\nimport MapScene from \"./widgets/mapPanel/MapScene\";\nimport TestBed from \"./widgets/testbed/TestBed\";\nimport TestBedScene from \"./widgets/testbed/TestBedScene\";\n\nconst cubeScene = new CubeScene();\nconst testbedScene = new TestBedScene();\nconst mapScene = new MapScene();\nconst factory = create({ theme });\n\nexport default factory(function App({ middleware: { theme } }) {\n    if (!theme.get()) {\n        theme.set(themeDefinition, \"default\");\n    }\n    return (\n        <div classes={[css.root]}>\n            <Menu />\n            <div classes={[css.main]}>\n                <Route id=\"home\" renderer={(): DNode => <Home />} />\n                <Route\n                    id=\"cube\"\n                    renderer={(): DNode => <CubePanel onGLReady={(glPanel): void => cubeScene.onGLReady(glPanel)} />}\n                />\n                <Route\n                    id=\"testbed\"\n                    renderer={(): DNode => <TestBed onGLReady={(glPanel): void => testbedScene.onGLReady(glPanel)} />}\n                />\n                <Route id=\"maps\" key=\"maps\" renderer={(): DNode => <MapList />} />\n                <Route\n                    id=\"map\"\n                    renderer={({ params }: MatchDetails): DNode => {\n                        const { mapId } = params;\n                        return (\n                            <MapPanel\n                                mapId={mapId}\n                                onGLReady={(glPanel, data): void => mapScene.onGLReady(glPanel, data)}\n                            />\n                        );\n                    }}\n                />\n            </div>\n            <Footer />\n        </div>\n    );\n});\n","import { createProcess } from \"@dojo/framework/stores/process\";\nimport { add } from \"@dojo/framework/stores/state/operations\";\nimport { findAll } from \"../api/api\";\nimport { createCommand } from \"./factory\";\n\nconst initialStateCommand = createCommand(async ({ path }) => {\n    const maps = await findAll();\n    return [\n        add(path(\"maps\"), {\n            list: maps,\n        }),\n        add(path(\"currentMap\"), undefined),\n    ];\n});\n\nexport const initialStateProcess = createProcess(\"initial\", [initialStateCommand]);\n","import renderer, { tsx } from \"@dojo/framework/core/vdom\";\nimport { registerRouterInjector } from \"@dojo/framework/routing/RouterInjector\";\nimport { registerStoreInjector } from \"@dojo/framework/stores/StoreInjector\";\n\nimport App from \"./App\";\nimport { store } from \"./processes/factory\";\nimport { initialStateProcess } from \"./processes/initialState\";\nimport routes from \"./routes\";\n\ninitialStateProcess(store)({});\n\nconst registry = registerStoreInjector(store);\nregisterRouterInjector(routes, registry);\n\nconst r = renderer(() => <App />);\nr.mount({ registry });\n","import { Registry } from '../core/Registry';\nimport { RegistryLabel } from '../core/interfaces';\n\nimport { Router } from './Router';\nimport { RouteConfig, RouterOptions } from './interfaces';\n\n/**\n * Router Injector Options\n *\n */\nexport interface RouterInjectorOptions extends RouterOptions {\n\tkey?: RegistryLabel;\n}\n\n/**\n * Creates a router instance for a specific History manager (default is `HashHistory`) and registers\n * the route configuration.\n *\n * @param config The route config to register for the router\n * @param registry An optional registry that defaults to the global registry\n * @param options The router injector options\n */\nexport function registerRouterInjector(\n\tconfig: RouteConfig[],\n\tregistry: Registry,\n\toptions: RouterInjectorOptions = {}\n): Router {\n\tconst { key = 'router', ...routerOptions } = options;\n\n\tif (registry.hasInjector(key)) {\n\t\tthrow new Error('Router has already been defined');\n\t}\n\tconst router = new Router(config, routerOptions);\n\tregistry.defineInjector(key, (invalidator: () => void) => {\n\t\trouter.on('nav', () => invalidator());\n\t\treturn () => router;\n\t});\n\treturn router;\n}\n","import { RouteConfig } from \"@dojo/framework/routing/interfaces\";\n\nexport default [\n    {\n        id: \"home\",\n        path: \"home\",\n        outlet: \"home\",\n        defaultRoute: true,\n    },\n    {\n        id: \"cube\",\n        path: \"cube\",\n        outlet: \"cube\",\n    },\n    {\n        id: \"testbed\",\n        path: \"testbed\",\n        outlet: \"testbed\",\n    },\n    {\n        id: \"maps\",\n        path: \"maps\",\n        outlet: \"maps\",\n    },\n    {\n        id: \"map\",\n        path: \"map/{mapId}\",\n        outlet: \"map\",\n    },\n] as RouteConfig[];\n","import global from '../shim/global';\nimport has from '../core/has';\nimport WeakMap from '../shim/WeakMap';\nimport Set from '../shim/Set';\nimport Map from '../shim/Map';\nimport { flat } from '../shim/array';\nimport {\n\tWNode,\n\tVNode,\n\tDNode,\n\tVNodeProperties,\n\tTransitionStrategy,\n\tSupportedClassName,\n\tDomVNode,\n\tLazyDefine,\n\tConstructor,\n\tRenderResult,\n\tWidgetBaseInterface,\n\tCallback,\n\tMiddlewareMap,\n\tWNodeFactory,\n\tOptionalWNodeFactory,\n\tUnionToIntersection,\n\tWidgetProperties,\n\tMiddlewareResultFactory,\n\tWidgetBaseTypes,\n\tRegistryLabel,\n\tDeferredVirtualProperties,\n\tDomOptions,\n\tDefaultChildrenWNodeFactory\n} from './interfaces';\nimport { Registry, isWidget, isWidgetBaseConstructor, isWidgetFunction, isWNodeFactory } from './Registry';\nimport { auto } from './diff';\nimport RegistryHandler from './RegistryHandler';\nimport { NodeHandler } from './NodeHandler';\n\ndeclare global {\n\tnamespace JSX {\n\t\ttype Element = WNode;\n\t\tinterface ElementAttributesProperty {\n\t\t\t__properties__: {};\n\t\t}\n\t\tinterface IntrinsicElements {\n\t\t\t[key: string]: VNodeProperties;\n\t\t}\n\t\tinterface ElementChildrenAttribute {\n\t\t\t__children__: {};\n\t\t}\n\t}\n}\n\nexport interface BaseNodeWrapper {\n\tid: string;\n\towningId: string;\n\tnode: WNode<any> | VNode;\n\tdomNode?: Node;\n\tdepth: number;\n\torder: number;\n\trequiresInsertBefore?: boolean;\n\thasPreviousSiblings?: boolean;\n\thasParentWNode?: boolean;\n\tnamespace?: string;\n\thasAnimations?: boolean;\n\tparentId: string;\n\tchildDomWrapperId?: string;\n}\n\nexport interface WNodeWrapper extends BaseNodeWrapper {\n\tnode: WNode<any>;\n\tkeys?: string[];\n\tinstance?: any;\n\tmergeNodes?: Node[];\n\tnodeHandlerCalled?: boolean;\n\tregistryItem?: Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tproperties: any;\n}\n\nexport interface WidgetMeta {\n\twidgetName: string;\n\tmountNode: HTMLElement;\n\tdirty: boolean;\n\tinvalidator: () => void;\n\tmiddleware?: any;\n\tmiddlewareIds: string[];\n\tregistryHandler?: RegistryHandler;\n\tregistry: Registry;\n\tproperties: any;\n\toriginalProperties: any;\n\tchildren?: DNode[];\n\trendering: boolean;\n\tnodeMap?: Map<string | number, HTMLElement>;\n\tdestroyMap?: Map<string, () => void>;\n\tdeferRefs: number;\n\tcustomDiffProperties?: Set<string>;\n\tcustomDiffMap?: Map<string, Map<string, (current: any, next: any) => any>>;\n\tpropertiesCalled: boolean;\n}\n\nexport interface WidgetData {\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tdirty: boolean;\n\tnodeHandler: NodeHandler;\n\tinvalidate?: Function;\n\trendering: boolean;\n\tinputProperties: any;\n\tregistry: RegistryHandler;\n}\n\nexport interface VNodeWrapper extends BaseNodeWrapper {\n\tnode: VNode | DomVNode;\n\tmerged?: boolean;\n\tinserted?: boolean;\n\tdeferredProperties?: VNodeProperties;\n}\n\nexport type DNodeWrapper = VNodeWrapper | WNodeWrapper;\n\nexport interface MountOptions {\n\tsync: boolean;\n\tmerge: boolean;\n\ttransition?: TransitionStrategy;\n\tdomNode: HTMLElement | null;\n\tregistry: Registry;\n}\n\nexport interface Renderer {\n\tinvalidate(): void;\n\tmount(mountOptions?: Partial<MountOptions>): void;\n\tunmount(): void;\n}\n\ninterface ProcessItem {\n\tcurrent?: (WNodeWrapper | VNodeWrapper)[];\n\tnext?: (WNodeWrapper | VNodeWrapper)[];\n\tmeta: ProcessMeta;\n}\n\ninterface ProcessResult {\n\titem?: ProcessItem;\n\twidget?: AttachApplication | DetachApplication;\n\tdom?: ApplicationInstruction;\n}\n\ninterface ProcessMeta {\n\tmergeNodes?: Node[];\n\toldIndex?: number;\n\tnewIndex?: number;\n}\n\ninterface InvalidationQueueItem {\n\tid: string;\n\tdepth: number;\n\torder: number;\n}\n\ninterface Instruction {\n\tcurrent: undefined | DNodeWrapper;\n\tnext: undefined | DNodeWrapper;\n}\n\ninterface CreateWidgetInstruction {\n\tnext: WNodeWrapper;\n}\n\ninterface UpdateWidgetInstruction {\n\tcurrent: WNodeWrapper;\n\tnext: WNodeWrapper;\n}\n\ninterface RemoveWidgetInstruction {\n\tcurrent: WNodeWrapper;\n}\n\ninterface CreateDomInstruction {\n\tnext: VNodeWrapper;\n}\n\ninterface UpdateDomInstruction {\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface RemoveDomInstruction {\n\tcurrent: VNodeWrapper;\n}\n\ninterface AttachApplication {\n\ttype: 'attach';\n\tid: string;\n\tinstance?: WidgetBaseInterface;\n\tattached?: boolean;\n}\n\ninterface DetachApplication {\n\ttype: 'detach';\n\tcurrent: WNodeWrapper;\n\tinstance?: WidgetBaseInterface;\n}\n\ninterface CreateDomApplication {\n\ttype: 'create';\n\tcurrent?: VNodeWrapper;\n\tnext: VNodeWrapper;\n\tparentDomNode: Node;\n}\n\ninterface DeleteDomApplication {\n\ttype: 'delete';\n\tcurrent: VNodeWrapper;\n}\n\ninterface UpdateDomApplication {\n\ttype: 'update';\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface PreviousProperties {\n\tproperties: any;\n\tattributes?: any;\n\tevents?: any;\n}\n\ntype ApplicationInstruction =\n\t| CreateDomApplication\n\t| UpdateDomApplication\n\t| DeleteDomApplication\n\t| Required<AttachApplication>\n\t| DetachApplication;\n\nconst EMPTY_ARRAY: DNodeWrapper[] = [];\nconst nodeOperations = ['focus', 'blur', 'scrollIntoView', 'click'];\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\nconst WNODE = '__WNODE_TYPE';\nconst VNODE = '__VNODE_TYPE';\nconst DOMVNODE = '__DOMVNODE_TYPE';\n\n// @ts-ignore\nconst scope = typeof __DOJO_SCOPE === 'string' ? __DOJO_SCOPE : 'dojo_scope';\n\nif (!global[scope]) {\n\tglobal[scope] = {};\n}\n\nexport function setRendering(value: boolean) {\n\tglobal[scope].rendering = value;\n}\n\nexport function incrementBlockCount() {\n\tconst blocksPending = global[scope].blocksPending || 0;\n\tglobal[scope].blocksPending = blocksPending + 1;\n}\n\nexport function decrementBlockCount() {\n\tconst blocksPending = global[scope].blocksPending || 0;\n\tglobal[scope].blocksPending = blocksPending - 1;\n}\n\nexport function isTextNode(item: any): item is Text {\n\treturn item && item.nodeType === 3;\n}\n\nfunction isLazyDefine(item: any): item is LazyDefine<any> {\n\treturn Boolean(item && item.label);\n}\n\nfunction isWNodeWrapper(child: DNodeWrapper): child is WNodeWrapper {\n\treturn child && isWNode(child.node);\n}\n\nfunction isVNodeWrapper(child?: DNodeWrapper | null): child is VNodeWrapper {\n\treturn !!child && isVNode(child.node);\n}\n\nfunction isVirtualWrapper(child?: DNodeWrapper | null): boolean {\n\treturn isVNodeWrapper(child) && child.node.tag === 'virtual';\n}\n\nfunction isBodyWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isVNodeWrapper(wrapper) && wrapper.node.tag === 'body';\n}\n\nfunction isHeadWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isVNodeWrapper(wrapper) && wrapper.node.tag === 'head';\n}\n\nfunction isSpecialWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isHeadWrapper(wrapper) || isBodyWrapper(wrapper) || isVirtualWrapper(wrapper);\n}\n\nfunction isAttachApplication(value: any): value is AttachApplication | DetachApplication {\n\treturn !!value.type;\n}\n\nexport function isWNode<W extends WidgetBaseTypes = any>(child: any): child is WNode<W> {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === WNODE);\n}\n\nexport function isVNode(child: DNode): child is VNode {\n\treturn Boolean(\n\t\tchild && child !== true && typeof child !== 'string' && (child.type === VNODE || child.type === DOMVNODE)\n\t);\n}\n\nexport function isDomVNode(child: DNode): child is DomVNode {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === DOMVNODE);\n}\n\nexport function isElementNode(value: any): value is Element {\n\treturn !!value.tagName;\n}\n\nfunction toTextVNode(data: any): VNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\ttype: VNODE\n\t};\n}\n\nfunction updateAttributes(\n\tdomNode: Element,\n\tpreviousAttributes: { [index: string]: string | undefined },\n\tattributes: { [index: string]: string | undefined },\n\tnamespace?: string\n) {\n\tconst attrNames = Object.keys(attributes);\n\tconst attrCount = attrNames.length;\n\tfor (let i = 0; i < attrCount; i++) {\n\t\tconst attrName = attrNames[i];\n\t\tconst attrValue = attributes[attrName];\n\t\tconst previousAttrValue = previousAttributes[attrName];\n\t\tif (attrValue !== previousAttrValue) {\n\t\t\tupdateAttribute(domNode, attrName, attrValue, namespace);\n\t\t}\n\t}\n}\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseTypes>(\n\tnode: WNode<W>,\n\tproperties: Partial<W['properties']>,\n\tchildren?: W['properties'] extends { __children__: any } ? W['properties']['__children__'] : W['children']\n): WNode<W>;\nexport function w<W extends WidgetBaseTypes>(\n\twidgetConstructor: Constructor<W> | RegistryLabel | LazyDefine<W>,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends WNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren: W['children'] extends any[] ? W['children'] : [W['children']]\n): WNode<W>;\nexport function w<W extends DefaultChildrenWNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends OptionalWNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren?: W['children'] extends any[] ? W['children'] : [W['children']]\n): WNode<W>;\nexport function w<W extends WidgetBaseTypes>(\n\twidgetConstructorOrNode:\n\t\t| Constructor<W>\n\t\t| RegistryLabel\n\t\t| WNodeFactory<W>\n\t\t| WNode<W>\n\t\t| LazyDefine<W>\n\t\t| Callback<any, any, any, RenderResult>,\n\tproperties: W['properties'],\n\tchildren?: any\n): WNode<W> {\n\tif ((properties as any).__children__) {\n\t\tdelete (properties as any).__children__;\n\t}\n\n\tif (isWNodeFactory<W>(widgetConstructorOrNode)) {\n\t\treturn widgetConstructorOrNode(properties, children);\n\t}\n\n\tif (isWNode<W>(widgetConstructorOrNode)) {\n\t\tproperties = { ...(widgetConstructorOrNode.properties as any), ...(properties as any) };\n\t\tchildren = children ? children : widgetConstructorOrNode.children;\n\t\twidgetConstructorOrNode = widgetConstructorOrNode.widgetConstructor;\n\t}\n\n\treturn {\n\t\tchildren: children || [],\n\t\twidgetConstructor: widgetConstructorOrNode,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create VNodes.\n */\nexport function v(node: VNode, properties: VNodeProperties, children: undefined | DNode[]): VNode;\nexport function v(node: VNode, properties: VNodeProperties): VNode;\nexport function v(tag: string, children: undefined | DNode[]): VNode;\nexport function v<K extends keyof HTMLElementTagNameMap>(\n\ttag: K,\n\tproperties: DeferredVirtualProperties | VNodeProperties<HTMLElementTagNameMap[K]>,\n\tchildren?: DNode[]\n): VNode;\nexport function v(tag: string, properties: DeferredVirtualProperties | VNodeProperties, children?: DNode[]): VNode;\nexport function v(tag: string): VNode;\nexport function v(\n\ttag: string | VNode,\n\tpropertiesOrChildren: VNodeProperties | DeferredVirtualProperties | DNode[] = {},\n\tchildren: undefined | DNode[] = undefined\n): VNode {\n\tlet properties: VNodeProperties | DeferredVirtualProperties = propertiesOrChildren;\n\tlet deferredPropertiesCallback;\n\n\tif (typeof (tag as any).tag === 'function') {\n\t\treturn (tag as any).tag(properties, children);\n\t}\n\n\tif (Array.isArray(propertiesOrChildren)) {\n\t\tchildren = propertiesOrChildren;\n\t\tproperties = {};\n\t}\n\n\tif (typeof properties === 'function') {\n\t\tdeferredPropertiesCallback = properties;\n\t\tproperties = {};\n\t}\n\n\tif (isVNode(tag)) {\n\t\tlet { classes = [], styles = {}, ...newProperties } = properties;\n\t\tlet { classes: nodeClasses = [], styles: nodeStyles = {}, ...nodeProperties } = tag.properties;\n\t\tnodeClasses = Array.isArray(nodeClasses) ? nodeClasses : [nodeClasses];\n\t\tclasses = Array.isArray(classes) ? classes : [classes];\n\t\tstyles = { ...nodeStyles, ...styles };\n\t\tproperties = { ...nodeProperties, ...newProperties, classes: [...nodeClasses, ...classes], styles };\n\t\tchildren = children ? children : tag.children;\n\t\ttag = tag.tag;\n\t}\n\n\treturn {\n\t\ttag,\n\t\tdeferredPropertiesCallback,\n\t\tchildren,\n\t\tproperties,\n\t\ttype: VNODE\n\t};\n}\n\n/**\n * Create a VNode for an existing DOM Node.\n */\nexport function dom(\n\t{ node, attrs = {}, props = {}, on = {}, diffType = 'none', onAttach }: DomOptions,\n\tchildren?: DNode[]\n): DomVNode {\n\treturn {\n\t\ttag: isElementNode(node) ? node.tagName.toLowerCase() : '',\n\t\tproperties: props,\n\t\tattributes: attrs,\n\t\tevents: on,\n\t\tchildren,\n\t\ttype: DOMVNODE,\n\t\tdomNode: node,\n\t\ttext: isElementNode(node) ? undefined : node.data,\n\t\tdiffType,\n\t\tonAttach\n\t};\n}\n\nexport const REGISTRY_ITEM = '__registry_item';\n\nexport class FromRegistry<P> {\n\tstatic type = REGISTRY_ITEM;\n\t/* tslint:disable-next-line:variable-name */\n\t__properties__: P = {} as P;\n\tname: string | undefined;\n}\n\nexport function fromRegistry<P>(tag: string): Constructor<FromRegistry<P>> {\n\treturn class extends FromRegistry<P> {\n\t\tproperties: P = {} as P;\n\t\tstatic type = REGISTRY_ITEM;\n\t\tname = tag;\n\t};\n}\n\nexport function tsx(tag: any, properties = {}, ...children: any[]): DNode {\n\tchildren = flat(children, Infinity);\n\tproperties = properties === null ? {} : properties;\n\tif (typeof tag === 'string') {\n\t\treturn v(tag, properties, children);\n\t} else if (tag.type === 'registry' && (properties as any).__autoRegistryItem) {\n\t\tconst name = (properties as any).__autoRegistryItem;\n\t\tdelete (properties as any).__autoRegistryItem;\n\t\treturn w(name, properties, children);\n\t} else if (tag.type === REGISTRY_ITEM) {\n\t\tconst registryItem = new tag();\n\t\treturn w(registryItem.name, properties, children);\n\t} else {\n\t\treturn w(tag, properties, children);\n\t}\n}\n\nexport function propertiesDiff(current: any, next: any, invalidator: () => void, ignoreProperties: string[]) {\n\tconst propertyNames = [...Object.keys(current), ...Object.keys(next)];\n\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\tif (ignoreProperties.indexOf(propertyNames[i]) > -1) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst result = auto(current[propertyNames[i]], next[propertyNames[i]]);\n\t\tif (result.changed) {\n\t\t\tinvalidator();\n\t\t\tbreak;\n\t\t}\n\t\tignoreProperties.push(propertyNames[i]);\n\t}\n}\n\nfunction buildPreviousProperties(domNode: any, current: VNodeWrapper) {\n\tconst {\n\t\tnode: { diffType, properties, attributes }\n\t} = current;\n\tif (!diffType || diffType === 'vdom') {\n\t\treturn {\n\t\t\tproperties: current.deferredProperties\n\t\t\t\t? { ...current.deferredProperties, ...current.node.properties }\n\t\t\t\t: current.node.properties,\n\t\t\tattributes: current.node.attributes,\n\t\t\tevents: current.node.events\n\t\t};\n\t} else if (diffType === 'none') {\n\t\treturn {\n\t\t\tproperties: {},\n\t\t\tattributes: current.node.attributes ? {} : undefined,\n\t\t\tevents: current.node.events\n\t\t};\n\t}\n\tlet newProperties: any = {\n\t\tproperties: {}\n\t};\n\tif (attributes) {\n\t\tnewProperties.attributes = {};\n\t\tnewProperties.events = current.node.events;\n\t\tObject.keys(properties).forEach((propName) => {\n\t\t\tnewProperties.properties[propName] = domNode[propName];\n\t\t});\n\t\tObject.keys(attributes).forEach((attrName) => {\n\t\t\tnewProperties.attributes[attrName] = domNode.getAttribute(attrName);\n\t\t});\n\t\treturn newProperties;\n\t}\n\tnewProperties.properties = Object.keys(properties).reduce(\n\t\t(props, property) => {\n\t\t\tprops[property] = domNode.getAttribute(property) || domNode[property];\n\t\t\treturn props;\n\t\t},\n\t\t{} as any\n\t);\n\treturn newProperties;\n}\n\nfunction checkDistinguishable(wrappers: DNodeWrapper[], index: number, parentWNodeWrapper?: WNodeWrapper) {\n\tconst wrapperToCheck = wrappers[index];\n\tif (isVNodeWrapper(wrapperToCheck) && !wrapperToCheck.node.tag) {\n\t\treturn;\n\t}\n\tconst { key } = wrapperToCheck.node.properties;\n\tlet parentName = 'unknown';\n\tif (parentWNodeWrapper) {\n\t\tconst {\n\t\t\tnode: { widgetConstructor }\n\t\t} = parentWNodeWrapper;\n\t\tparentName = (widgetConstructor as any).name || 'unknown';\n\t}\n\n\tif (key === undefined || key === null) {\n\t\tfor (let i = 0; i < wrappers.length; i++) {\n\t\t\tif (i !== index) {\n\t\t\t\tconst wrapper = wrappers[i];\n\t\t\t\tif (same(wrapper, wrapperToCheck)) {\n\t\t\t\t\tlet nodeIdentifier: string;\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\tnodeIdentifier = (wrapper.node.widgetConstructor as any).name || 'unknown';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeIdentifier = wrapper.node.tag;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`A widget (${parentName}) has had a child added or removed, but they were not able to uniquely identified. It is recommended to provide a unique 'key' property when using the same widget or element (${nodeIdentifier}) multiple times as siblings`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction same(dnode1: DNodeWrapper, dnode2: DNodeWrapper): boolean {\n\tif (isVNodeWrapper(dnode1) && isVNodeWrapper(dnode2)) {\n\t\tif (isDomVNode(dnode1.node) && isDomVNode(dnode2.node)) {\n\t\t\tif (dnode1.node.domNode !== dnode2.node.domNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (dnode1.node.tag !== dnode2.node.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.node.properties.key !== dnode2.node.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} else if (isWNodeWrapper(dnode1) && isWNodeWrapper(dnode2)) {\n\t\tconst widgetConstructor1 = dnode1.registryItem || dnode1.node.widgetConstructor;\n\t\tconst widgetConstructor2 = dnode2.registryItem || dnode2.node.widgetConstructor;\n\t\tconst {\n\t\t\tnode: { properties: props1 }\n\t\t} = dnode1;\n\t\tconst {\n\t\t\tnode: { properties: props2 }\n\t\t} = dnode2;\n\t\tif (dnode1.instance === undefined && typeof widgetConstructor2 === 'string') {\n\t\t\treturn false;\n\t\t}\n\t\tif (widgetConstructor1 !== widgetConstructor2) {\n\t\t\treturn false;\n\t\t}\n\t\tif (props1.key !== props2.key) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!((widgetConstructor1 as any).keys || []).every((key: string) => props1[key] === props2[key])) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction findIndexOfChild(children: DNodeWrapper[], sameAs: DNodeWrapper, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction createClassPropValue(classes: SupportedClassName | SupportedClassName[] = []) {\n\tlet classNames = '';\n\tif (Array.isArray(classes)) {\n\t\tfor (let i = 0; i < classes.length; i++) {\n\t\t\tlet className = classes[i];\n\t\t\tif (className && className !== true) {\n\t\t\t\tclassNames = classNames ? `${classNames} ${className}` : className;\n\t\t\t}\n\t\t}\n\t\treturn classNames;\n\t}\n\tif (classes && classes !== true) {\n\t\tclassNames = classes;\n\t}\n\treturn classNames;\n}\n\nfunction updateAttribute(domNode: Element, attrName: string, attrValue: string | undefined, namespace?: string) {\n\tif (namespace === NAMESPACE_SVG && attrName === 'href' && attrValue) {\n\t\tdomNode.setAttributeNS(NAMESPACE_XLINK, attrName, attrValue);\n\t} else if ((attrName === 'role' && attrValue === '') || attrValue === undefined) {\n\t\tdomNode.removeAttribute(attrName);\n\t} else {\n\t\tdomNode.setAttribute(attrName, attrValue);\n\t}\n}\n\nfunction arrayFrom(arr: any) {\n\treturn Array.prototype.slice.call(arr);\n}\n\nfunction createFactory(callback: any, middlewares: any, key?: any): any {\n\tconst factory = (properties: any, children?: any) => {\n\t\tif (properties) {\n\t\t\tconst result = w(callback, properties, children);\n\t\t\tcallback.isWidget = true;\n\t\t\tcallback.middlewares = middlewares;\n\t\t\treturn result;\n\t\t}\n\t\treturn {\n\t\t\tmiddlewares,\n\t\t\tcallback\n\t\t};\n\t};\n\tconst keys = Object.keys(middlewares).reduce((keys: string[], middlewareName: any) => {\n\t\tconst middleware = middlewares[middlewareName];\n\t\tif (middleware.keys) {\n\t\t\tkeys = [...keys, ...middleware.keys];\n\t\t}\n\t\treturn keys;\n\t}, key ? [key] : []);\n\n\tcallback.keys = keys;\n\tfactory.keys = keys;\n\tfactory.isFactory = true;\n\treturn factory;\n}\n\ntype KeysMatching<T, V> = { [K in keyof T]: T[K] extends V ? K : never }[keyof T];\n\nexport function create<T extends MiddlewareMap, MiddlewareProps = ReturnType<T[keyof T]>['properties']>(\n\tmiddlewares: T = {} as T\n) {\n\tfunction properties<Props>() {\n\t\tfunction returns<ReturnValue>(\n\t\t\tcallback: Callback<WidgetProperties & Props & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue>\n\t\t): ReturnValue extends RenderResult\n\t\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\tchildren: DNode[];\n\t\t\t  }>\n\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tDNode[],\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t  > {\n\t\t\treturn createFactory(callback, middlewares);\n\t\t}\n\n\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tDNode[],\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: DNode[];\n\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tDNode[],\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t}\n\t\t\treturn returns;\n\t\t}\n\n\t\tfunction children<Children>() {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tChildren,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t  }>\n\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares);\n\t\t\t}\n\n\t\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\t\tfunction returns<ReturnValue>(\n\t\t\t\t\tcallback: Callback<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t\t>\n\t\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\t\tChildren,\n\t\t\t\t\t\t\tT,\n\t\t\t\t\t\t\tReturnValue\n\t\t\t\t\t  > {\n\t\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t\t}\n\t\t\t\treturn returns;\n\t\t\t}\n\t\t\treturns.key = key;\n\t\t\treturn returns;\n\t\t}\n\t\treturns.children = children;\n\t\treturns.key = key;\n\t\treturn returns;\n\t}\n\n\tfunction children<Children>() {\n\t\tfunction properties<Props>() {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tChildren,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t  }>\n\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares);\n\t\t\t}\n\t\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\t\tfunction returns<ReturnValue>(\n\t\t\t\t\tcallback: Callback<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t\t>\n\t\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\t\tChildren,\n\t\t\t\t\t\t\tT,\n\t\t\t\t\t\t\tReturnValue\n\t\t\t\t\t  > {\n\t\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t\t}\n\t\t\t\treturn returns;\n\t\t\t}\n\t\t\treturns.key = key;\n\t\t\treturn returns;\n\t\t}\n\n\t\tfunction returns<ReturnValue>(\n\t\t\tcallback: Callback<WidgetProperties & UnionToIntersection<MiddlewareProps>, Children, T, ReturnValue>\n\t\t): ReturnValue extends RenderResult\n\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t  }>\n\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: Children;\n\t\t\t\t  }>\n\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\tWidgetProperties & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tNonNullable<Children>,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t  > {\n\t\t\treturn createFactory(callback, middlewares);\n\t\t}\n\t\treturns.properties = properties;\n\t\treturn returns;\n\t}\n\n\tfunction returns<ReturnValue>(\n\t\tcallback: Callback<WidgetProperties & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue>\n\t): ReturnValue extends RenderResult\n\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\tchildren: DNode[];\n\t\t  }>\n\t\t: MiddlewareResultFactory<WidgetProperties & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue> {\n\t\treturn createFactory(callback, middlewares);\n\t}\n\treturns.children = children;\n\treturns.properties = properties;\n\treturn returns;\n}\n\nconst factory = create();\n\nfunction wrapNodes(renderer: () => RenderResult) {\n\tconst result = renderer();\n\tconst isWNodeWrapper = isWNode(result);\n\tconst callback = () => {\n\t\treturn result;\n\t};\n\tcallback.isWNodeWrapper = isWNodeWrapper;\n\treturn factory(callback);\n}\n\nexport const widgetInstanceMap = new WeakMap<WidgetBaseInterface, WidgetData>();\nconst widgetMetaMap = new Map<string, WidgetMeta>();\nconst requestedDomNodes = new Set();\nlet wrapperId = 0;\nlet metaId = 0;\n\nfunction addNodeToMap(id: string, key: string | number, node: HTMLElement) {\n\tconst widgetMeta = widgetMetaMap.get(id);\n\tif (widgetMeta) {\n\t\twidgetMeta.nodeMap = widgetMeta.nodeMap || new Map();\n\t\twidgetMeta.nodeMap.set(key, node);\n\t\tif (requestedDomNodes.has(`${id}-${key}`)) {\n\t\t\twidgetMeta.invalidator();\n\t\t\trequestedDomNodes.delete(`${id}-${key}`);\n\t\t}\n\t}\n}\n\nfunction destroyHandles(meta: WidgetMeta) {\n\tconst { destroyMap, middlewareIds } = meta;\n\tif (!destroyMap) {\n\t\treturn;\n\t}\n\tfor (let i = 0; i < middlewareIds.length; i++) {\n\t\tconst id = middlewareIds[i];\n\t\tconst destroy = destroyMap.get(id);\n\t\tdestroy && destroy();\n\t\tdestroyMap.delete(id);\n\t\tif (destroyMap.size === 0) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tdestroyMap.clear();\n}\n\nfunction runDiffs(meta: WidgetMeta, current: any, next: any) {\n\tlet customProperties: any = {};\n\tmeta.customDiffMap = meta.customDiffMap || new Map();\n\tif (meta.customDiffMap.size) {\n\t\tmeta.customDiffMap.forEach((diffMap) => {\n\t\t\tdiffMap.forEach((diff, propertyName) => {\n\t\t\t\tconst result = diff({ ...current }, { ...next });\n\t\t\t\tif (result) {\n\t\t\t\t\tcustomProperties[propertyName] = result;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\treturn customProperties;\n}\n\nexport const invalidator = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\treturn () => {\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\treturn widgetMeta.invalidator();\n\t\t}\n\t};\n});\n\nexport const node = factory(({ id }) => {\n\treturn {\n\t\tget(key: string | number): HTMLElement | null {\n\t\t\tconst [widgetId] = id.split('-');\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.nodeMap = widgetMeta.nodeMap || new Map();\n\t\t\t\tconst mountNode = widgetMeta.mountNode;\n\t\t\t\tconst node = widgetMeta.nodeMap.get(key);\n\t\t\t\tif (\n\t\t\t\t\tnode &&\n\t\t\t\t\t(mountNode.contains(node) ||\n\t\t\t\t\t\t(global.document.body !== mountNode && global.document.body.contains(node)))\n\t\t\t\t) {\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\t\t\t\trequestedDomNodes.add(`${widgetId}-${key}`);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n});\n\nexport const diffProperty = factory(({ id }) => {\n\tfunction callback<T extends (...args: any) => any, K extends keyof ReturnType<T>>(\n\t\tproperty: K,\n\t\tproperties: T,\n\t\tdiff: (current: ReturnType<T>, next: ReturnType<T>) => void | ReturnType<T>[K]\n\t): void;\n\tfunction callback(propertyName: string, diff: (current: any, next: any) => void): void;\n\tfunction callback(propertyName: string, propertiesOrDiff: any, diff?: any) {\n\t\tconst [widgetId] = id.split('-');\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (!diff) {\n\t\t\tdiff = propertiesOrDiff;\n\t\t}\n\t\tif (widgetMeta) {\n\t\t\twidgetMeta.customDiffMap = widgetMeta.customDiffMap || new Map();\n\t\t\twidgetMeta.customDiffProperties = widgetMeta.customDiffProperties || new Set();\n\t\t\tconst propertyDiffMap = widgetMeta.customDiffMap.get(id) || new Map();\n\t\t\tif (!propertyDiffMap.has(propertyName)) {\n\t\t\t\tconst result = diff({}, widgetMeta.originalProperties);\n\t\t\t\tif (result !== undefined) {\n\t\t\t\t\tif (has('dojo-debug')) {\n\t\t\t\t\t\tif (widgetMeta.propertiesCalled) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Calling \"propertyDiff\" middleware after accessing properties in \"${\n\t\t\t\t\t\t\t\t\twidgetMeta.widgetName\n\t\t\t\t\t\t\t\t}\", can result in referencing stale properties.`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twidgetMeta.properties = { ...widgetMeta.properties, [propertyName]: result };\n\t\t\t\t}\n\t\t\t\tpropertyDiffMap.set(propertyName, diff);\n\t\t\t\twidgetMeta.customDiffProperties.add(propertyName);\n\t\t\t}\n\t\t\twidgetMeta.customDiffMap.set(id, propertyDiffMap);\n\t\t}\n\t}\n\n\treturn callback;\n});\n\nexport const destroy = factory(({ id }) => {\n\treturn (destroyFunction: () => void): void => {\n\t\tconst [widgetId] = id.split('-');\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\twidgetMeta.destroyMap = widgetMeta.destroyMap || new Map();\n\t\t\tif (!widgetMeta.destroyMap.has(id)) {\n\t\t\t\twidgetMeta.destroyMap.set(id, destroyFunction);\n\t\t\t}\n\t\t}\n\t};\n});\n\nexport const getRegistry = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\treturn (): RegistryHandler | null => {\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\tif (!widgetMeta.registryHandler) {\n\t\t\t\twidgetMeta.registryHandler = new RegistryHandler();\n\t\t\t\twidgetMeta.registryHandler.base = widgetMeta.registry;\n\t\t\t\twidgetMeta.registryHandler.on('invalidate', widgetMeta.invalidator);\n\t\t\t}\n\t\t\twidgetMeta.registryHandler = widgetMeta.registryHandler || new RegistryHandler();\n\t\t\treturn widgetMeta.registryHandler;\n\t\t}\n\t\treturn null;\n\t};\n});\n\nexport const defer = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\tlet isDeferred = false;\n\treturn {\n\t\tpause() {\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (!isDeferred && widgetMeta) {\n\t\t\t\twidgetMeta.deferRefs = widgetMeta.deferRefs + 1;\n\t\t\t\tisDeferred = true;\n\t\t\t}\n\t\t},\n\t\tresume() {\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (isDeferred && widgetMeta) {\n\t\t\t\twidgetMeta.deferRefs = widgetMeta.deferRefs - 1;\n\t\t\t\tisDeferred = false;\n\t\t\t}\n\t\t}\n\t};\n});\n\nfunction wrapFunctionProperties(id: string, properties: any) {\n\tconst props: any = {};\n\tconst propertyNames = Object.keys(properties);\n\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\tconst propertyName = propertyNames[i];\n\t\tif (typeof properties[propertyName] === 'function') {\n\t\t\tprops[propertyName] = function WrappedProperty(...args: any[]) {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.originalProperties[propertyName](...args);\n\t\t\t\t}\n\t\t\t\treturn properties[propertyName](...args);\n\t\t\t};\n\t\t\tprops[propertyName].unwrap = () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.originalProperties[propertyName];\n\t\t\t\t}\n\t\t\t\treturn properties[propertyName];\n\t\t\t};\n\t\t} else {\n\t\t\tprops[propertyName] = properties[propertyName];\n\t\t}\n\t}\n\treturn props;\n}\n\nexport function renderer(renderer: () => RenderResult): Renderer {\n\tlet _mountOptions: MountOptions & { domNode: HTMLElement } = {\n\t\tsync: false,\n\t\tmerge: true,\n\t\ttransition: undefined,\n\t\tdomNode: global.document.body,\n\t\tregistry: new Registry()\n\t};\n\tlet _invalidationQueue: InvalidationQueueItem[] = [];\n\tlet _processQueue: (ProcessItem | DetachApplication | AttachApplication)[] = [];\n\tlet _deferredProcessQueue: (ProcessItem | DetachApplication | AttachApplication)[] = [];\n\tlet _applicationQueue: ApplicationInstruction[] = [];\n\tlet _eventMap = new WeakMap<Function, EventListener>();\n\tlet _idToWrapperMap = new Map<string, DNodeWrapper>();\n\tlet _wrapperSiblingMap = new WeakMap<DNodeWrapper, DNodeWrapper>();\n\tlet _idToChildrenWrappers = new Map<string, DNodeWrapper[]>();\n\tlet _insertBeforeMap: undefined | WeakMap<DNodeWrapper, Node> = new WeakMap<DNodeWrapper, Node>();\n\tlet _nodeToWrapperMap = new WeakMap<VNode | WNode<any>, WNodeWrapper>();\n\tlet _renderScheduled: number | undefined;\n\tlet _deferredRenderCallbacks: Function[] = [];\n\tlet parentInvalidate: () => void;\n\tlet _allMergedNodes: Node[] = [];\n\tlet _appWrapperId: string | undefined;\n\tlet _deferredProcessIds = new Map<number, Function>();\n\n\tfunction nodeOperation(\n\t\tpropName: string,\n\t\tpropValue: (() => boolean) | boolean,\n\t\tpreviousValue: boolean,\n\t\tdomNode: HTMLElement & { [index: string]: any }\n\t): void {\n\t\tlet result = propValue && !previousValue;\n\t\tif (typeof propValue === 'function') {\n\t\t\tresult = propValue();\n\t\t}\n\t\tif (result === true) {\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tdomNode[propName]();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction updateEvent(\n\t\tdomNode: Node,\n\t\teventName: string,\n\t\tcurrentValue: (event: Event) => void,\n\t\tpreviousValue?: Function\n\t) {\n\t\tif (previousValue) {\n\t\t\tconst previousEvent = _eventMap.get(previousValue);\n\t\t\tpreviousEvent && domNode.removeEventListener(eventName, previousEvent);\n\t\t}\n\n\t\tlet callback = currentValue;\n\n\t\tif (eventName === 'input') {\n\t\t\tcallback = function(this: any, evt: Event) {\n\t\t\t\tcurrentValue.call(this, evt);\n\t\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t\t};\n\t\t}\n\n\t\tdomNode.addEventListener(eventName, callback);\n\t\t_eventMap.set(currentValue, callback);\n\t}\n\n\tfunction removeOrphanedEvents(\n\t\tdomNode: Element,\n\t\tpreviousProperties: VNodeProperties,\n\t\tproperties: VNodeProperties,\n\t\tonlyEvents: boolean = false\n\t) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tconst isEvent = propName.substr(0, 2) === 'on' || onlyEvents;\n\t\t\tconst eventName = onlyEvents ? propName : propName.substr(2);\n\t\t\tif (isEvent && !properties[propName]) {\n\t\t\t\tconst eventCallback = _eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(eventName, eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction resolveRegistryItem(wrapper: WNodeWrapper, instance?: any, id?: string) {\n\t\tif (!isWidget(wrapper.node.widgetConstructor)) {\n\t\t\tconst owningNode = _nodeToWrapperMap.get(wrapper.node);\n\t\t\tif (owningNode) {\n\t\t\t\tif (owningNode.instance) {\n\t\t\t\t\tinstance = owningNode.instance;\n\t\t\t\t} else {\n\t\t\t\t\tid = owningNode.id;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet registry: RegistryHandler | undefined;\n\t\t\tif (instance) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance);\n\t\t\t\tif (instanceData) {\n\t\t\t\t\tregistry = instanceData.registry;\n\t\t\t\t}\n\t\t\t} else if (id !== undefined) {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\tif (!widgetMeta.registryHandler) {\n\t\t\t\t\t\twidgetMeta.registryHandler = new RegistryHandler();\n\t\t\t\t\t\twidgetMeta.registryHandler.base = widgetMeta.registry;\n\t\t\t\t\t\twidgetMeta.registryHandler.on('invalidate', widgetMeta.invalidator);\n\t\t\t\t\t}\n\t\t\t\t\tregistry = widgetMeta.registryHandler;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (registry) {\n\t\t\t\tlet registryLabel: symbol | string;\n\t\t\t\tif (isLazyDefine(wrapper.node.widgetConstructor)) {\n\t\t\t\t\tconst { label, registryItem } = wrapper.node.widgetConstructor;\n\t\t\t\t\tif (!registry.has(label)) {\n\t\t\t\t\t\tregistry.define(label, registryItem);\n\t\t\t\t\t}\n\t\t\t\t\tregistryLabel = label;\n\t\t\t\t} else {\n\t\t\t\t\tregistryLabel = wrapper.node.widgetConstructor as any;\n\t\t\t\t}\n\t\t\t\tlet item = registry.get(registryLabel) as any;\n\t\t\t\tif (isWNodeFactory(item)) {\n\t\t\t\t\tconst node = item(wrapper.node.properties, wrapper.node.children);\n\t\t\t\t\tif (isWidgetFunction(node.widgetConstructor)) {\n\t\t\t\t\t\twrapper.registryItem = node.widgetConstructor;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twrapper.registryItem = item;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mapNodeToInstance(nodes: DNode[], wrapper: WNodeWrapper) {\n\t\twhile (nodes.length) {\n\t\t\tlet node = nodes.pop();\n\t\t\tif (isWNode(node) || isVNode(node)) {\n\t\t\t\tif (!_nodeToWrapperMap.has(node)) {\n\t\t\t\t\t_nodeToWrapperMap.set(node, wrapper);\n\t\t\t\t\tif (node.children && node.children.length) {\n\t\t\t\t\t\tnodes = [...nodes, ...node.children];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction renderedToWrapper(\n\t\trendered: DNode[],\n\t\tparent: DNodeWrapper,\n\t\tcurrentParent: DNodeWrapper | null\n\t): DNodeWrapper[] {\n\t\tconst { requiresInsertBefore, hasPreviousSiblings, namespace, depth } = parent;\n\t\tconst wrappedRendered: DNodeWrapper[] = [];\n\t\tconst hasParentWNode = isWNodeWrapper(parent);\n\t\tconst hasVirtualParentNode = isVirtualWrapper(parent);\n\t\tconst currentParentChildren =\n\t\t\t(isVNodeWrapper(currentParent) && _idToChildrenWrappers.get(currentParent.id)) || [];\n\t\tconst hasCurrentParentChildren = currentParentChildren.length > 0;\n\t\tconst insertBefore =\n\t\t\t((requiresInsertBefore || hasPreviousSiblings !== false) && (hasParentWNode || hasVirtualParentNode)) ||\n\t\t\t(hasCurrentParentChildren && rendered.length > 1);\n\t\tlet previousItem: DNodeWrapper | undefined;\n\t\tif (isWNodeWrapper(parent) && rendered.length) {\n\t\t\tmapNodeToInstance([...rendered], parent);\n\t\t}\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tlet renderedItem = rendered[i];\n\t\t\tif (!renderedItem || renderedItem === true) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof renderedItem === 'string') {\n\t\t\t\trenderedItem = toTextVNode(renderedItem);\n\t\t\t}\n\t\t\tconst owningNode = _nodeToWrapperMap.get(renderedItem);\n\t\t\tconst wrapper: DNodeWrapper = {\n\t\t\t\tnode: renderedItem,\n\t\t\t\tdepth: depth + 1,\n\t\t\t\torder: i,\n\t\t\t\tparentId: parent.id,\n\t\t\t\trequiresInsertBefore: insertBefore,\n\t\t\t\thasParentWNode,\n\t\t\t\tnamespace: namespace\n\t\t\t} as DNodeWrapper;\n\t\t\tif (isVNode(renderedItem)) {\n\t\t\t\tif (renderedItem.deferredPropertiesCallback) {\n\t\t\t\t\t(wrapper as VNodeWrapper).deferredProperties = renderedItem.deferredPropertiesCallback(false);\n\t\t\t\t}\n\t\t\t\tif (renderedItem.properties.exitAnimation) {\n\t\t\t\t\tparent.hasAnimations = true;\n\t\t\t\t\tlet nextParent = _idToWrapperMap.get(parent.parentId);\n\t\t\t\t\twhile (nextParent) {\n\t\t\t\t\t\tif (nextParent.hasAnimations) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextParent.hasAnimations = true;\n\t\t\t\t\t\tnextParent = _idToWrapperMap.get(nextParent.parentId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (owningNode) {\n\t\t\t\twrapper.owningId = owningNode.id;\n\t\t\t}\n\t\t\tif (isWNode(renderedItem)) {\n\t\t\t\tresolveRegistryItem(wrapper as WNodeWrapper, (parent as any).instance, (parent as any).id);\n\t\t\t}\n\t\t\tif (previousItem) {\n\t\t\t\t_wrapperSiblingMap.set(previousItem, wrapper);\n\t\t\t}\n\t\t\twrappedRendered.push(wrapper);\n\t\t\tpreviousItem = wrapper;\n\t\t}\n\t\treturn wrappedRendered;\n\t}\n\n\tfunction findParentDomNode(currentNode: DNodeWrapper): Node | undefined {\n\t\tlet parentDomNode: Node | undefined;\n\t\tlet parentWrapper = _idToWrapperMap.get(currentNode.parentId);\n\n\t\twhile (!parentDomNode && parentWrapper) {\n\t\t\tif (\n\t\t\t\t!parentDomNode &&\n\t\t\t\tisVNodeWrapper(parentWrapper) &&\n\t\t\t\t!isVirtualWrapper(parentWrapper) &&\n\t\t\t\tparentWrapper.domNode\n\t\t\t) {\n\t\t\t\tparentDomNode = parentWrapper.domNode;\n\t\t\t}\n\t\t\tparentWrapper = _idToWrapperMap.get(parentWrapper.parentId);\n\t\t}\n\t\treturn parentDomNode;\n\t}\n\n\tfunction runDeferredProperties(next: VNodeWrapper) {\n\t\tconst { deferredPropertiesCallback } = next.node;\n\t\tif (deferredPropertiesCallback) {\n\t\t\tconst properties = next.node.properties;\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tif (_idToWrapperMap.has(next.owningId)) {\n\t\t\t\t\tconst deferredProperties = next.deferredProperties;\n\t\t\t\t\tnext.deferredProperties = deferredPropertiesCallback(true);\n\t\t\t\t\tprocessProperties(next, {\n\t\t\t\t\t\tproperties: { ...deferredProperties, ...properties }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction findInsertBefore(next: DNodeWrapper) {\n\t\tlet insertBefore: Node | null = null;\n\t\tlet searchNode: DNodeWrapper | undefined = next;\n\t\twhile (!insertBefore) {\n\t\t\tconst nextSibling = _wrapperSiblingMap.get(searchNode);\n\t\t\tif (nextSibling) {\n\t\t\t\tlet domNode = nextSibling.domNode;\n\t\t\t\tif (isWNodeWrapper(nextSibling) || isVirtualWrapper(nextSibling)) {\n\t\t\t\t\tif (!nextSibling.childDomWrapperId) {\n\t\t\t\t\t\tnextSibling.childDomWrapperId = findDomNodeOnParentWrapper(nextSibling.id);\n\t\t\t\t\t}\n\t\t\t\t\tif (nextSibling.childDomWrapperId) {\n\t\t\t\t\t\tconst childWrapper = _idToWrapperMap.get(nextSibling.childDomWrapperId);\n\t\t\t\t\t\tif (childWrapper && !isBodyWrapper(childWrapper) && !isHeadWrapper(childWrapper)) {\n\t\t\t\t\t\t\tdomNode = childWrapper.domNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (domNode && domNode.parentNode) {\n\t\t\t\t\tinsertBefore = domNode;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsearchNode = nextSibling;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tsearchNode = searchNode && _idToWrapperMap.get(searchNode.parentId);\n\t\t\tif (!searchNode || (isVNodeWrapper(searchNode) && !isVirtualWrapper(searchNode))) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn insertBefore;\n\t}\n\n\tfunction setValue(domNode: any, propValue?: any, previousValue?: any) {\n\t\tconst domValue = domNode.value;\n\t\tconst onInputValue = domNode['oninput-value'];\n\t\tconst onSelectValue = domNode['select-value'];\n\n\t\tif (onSelectValue && domValue !== onSelectValue) {\n\t\t\tdomNode.value = onSelectValue;\n\t\t\tif (domNode.value === onSelectValue) {\n\t\t\t\tdomNode['select-value'] = undefined;\n\t\t\t}\n\t\t} else if ((onInputValue && domValue === onInputValue) || propValue !== previousValue) {\n\t\t\tdomNode.value = propValue;\n\t\t\tdomNode['oninput-value'] = undefined;\n\t\t}\n\t}\n\n\tfunction setProperties(\n\t\tdomNode: HTMLElement,\n\t\tcurrentProperties: VNodeProperties = {},\n\t\tnextWrapper: VNodeWrapper,\n\t\tincludesEventsAndAttributes = true\n\t): void {\n\t\tconst properties = nextWrapper.deferredProperties\n\t\t\t? { ...nextWrapper.deferredProperties, ...nextWrapper.node.properties }\n\t\t\t: nextWrapper.node.properties;\n\t\tconst propNames = Object.keys(properties);\n\t\tconst propCount = propNames.length;\n\t\tif (propNames.indexOf('classes') === -1 && currentProperties.classes) {\n\t\t\tdomNode.removeAttribute('class');\n\t\t}\n\n\t\tincludesEventsAndAttributes && removeOrphanedEvents(domNode, currentProperties, properties);\n\n\t\tfor (let i = 0; i < propCount; i++) {\n\t\t\tconst propName = propNames[i];\n\t\t\tlet propValue = properties[propName];\n\t\t\tconst previousValue = currentProperties[propName];\n\t\t\tif (propName === 'classes') {\n\t\t\t\tconst previousClassString = createClassPropValue(previousValue);\n\t\t\t\tlet currentClassString = createClassPropValue(propValue);\n\t\t\t\tif (previousClassString !== currentClassString) {\n\t\t\t\t\tif (currentClassString) {\n\t\t\t\t\t\tif (nextWrapper.merged) {\n\t\t\t\t\t\t\tconst domClasses = (domNode.getAttribute('class') || '').split(' ');\n\t\t\t\t\t\t\tfor (let i = 0; i < domClasses.length; i++) {\n\t\t\t\t\t\t\t\tif (currentClassString.indexOf(domClasses[i]) === -1) {\n\t\t\t\t\t\t\t\t\tcurrentClassString = `${domClasses[i]} ${currentClassString}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomNode.setAttribute('class', currentClassString);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdomNode.removeAttribute('class');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (nodeOperations.indexOf(propName) !== -1) {\n\t\t\t\tnodeOperation(propName, propValue, previousValue, domNode);\n\t\t\t} else if (propName === 'styles') {\n\t\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\t\tconst styleCount = styleNames.length;\n\t\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\t\tconst oldStyleValue = previousValue && previousValue[styleName];\n\t\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t(domNode.style as any)[styleName] = newStyleValue || '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\t\tpropValue = '';\n\t\t\t\t}\n\t\t\t\tif (propName === 'value') {\n\t\t\t\t\tif ((domNode as HTMLElement).tagName === 'SELECT') {\n\t\t\t\t\t\t(domNode as any)['select-value'] = propValue;\n\t\t\t\t\t}\n\t\t\t\t\tsetValue(domNode, propValue, previousValue);\n\t\t\t\t} else if (propName !== 'key' && propValue !== previousValue) {\n\t\t\t\t\tconst type = typeof propValue;\n\t\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0 && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateEvent(domNode, propName.substr(2), propValue, previousValue);\n\t\t\t\t\t} else if (type === 'string' && propName !== 'innerHTML' && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateAttribute(domNode, propName, propValue, nextWrapper.namespace);\n\t\t\t\t\t} else if (propName === 'scrollLeft' || propName === 'scrollTop') {\n\t\t\t\t\t\tif ((domNode as any)[propName] !== propValue) {\n\t\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _createDeferredRenderCallback(): (() => void) | undefined {\n\t\tconst callbacks = _deferredRenderCallbacks;\n\t\t_deferredRenderCallbacks = [];\n\t\tif (callbacks.length) {\n\t\t\treturn () => {\n\t\t\t\tlet callback: Function | undefined;\n\t\t\t\twhile ((callback = callbacks.shift())) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction _scheduleDeferredRenderCallbacks() {\n\t\tconst { sync } = _mountOptions;\n\t\tconst run = _createDeferredRenderCallback();\n\t\tif (run) {\n\t\t\tif (sync) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tlet id: number;\n\t\t\t\tid = global.requestAnimationFrame(() => {\n\t\t\t\t\t_deferredProcessIds.delete(id);\n\t\t\t\t\trun();\n\t\t\t\t});\n\t\t\t\t_deferredProcessIds.set(id, run);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction processProperties(next: VNodeWrapper, previousProperties: PreviousProperties) {\n\t\tif (next.node.attributes && next.node.events) {\n\t\t\tupdateAttributes(\n\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\tpreviousProperties.attributes || {},\n\t\t\t\tnext.node.attributes,\n\t\t\t\tnext.namespace\n\t\t\t);\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next, false);\n\t\t\tconst events = next.node.events || {};\n\t\t\tif (previousProperties.events) {\n\t\t\t\tremoveOrphanedEvents(\n\t\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\t\tpreviousProperties.events || {},\n\t\t\t\t\tnext.node.events,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tpreviousProperties.events = previousProperties.events || {};\n\t\t\tObject.keys(events).forEach((event) => {\n\t\t\t\tupdateEvent(next.domNode as HTMLElement, event, events[event], previousProperties.events[event]);\n\t\t\t});\n\t\t} else {\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next);\n\t\t}\n\t}\n\n\tfunction unmount() {\n\t\t_processQueue.push({\n\t\t\tcurrent: [_idToWrapperMap.get(_appWrapperId!)!],\n\t\t\tnext: [],\n\t\t\tmeta: {}\n\t\t});\n\t\tif (_renderScheduled) {\n\t\t\tglobal.cancelAnimationFrame(_renderScheduled);\n\t\t}\n\t\t_runProcessQueue();\n\t\t_runDomInstructionQueue();\n\t\t_deferredProcessIds.forEach((callback, id) => {\n\t\t\tglobal.cancelAnimationFrame(id);\n\t\t\tcallback();\n\t\t});\n\t\tconst run = _createDeferredRenderCallback();\n\t\trun && run();\n\t\t_invalidationQueue = [];\n\t\t_processQueue = [];\n\t\t_deferredProcessQueue = [];\n\t\t_applicationQueue = [];\n\t\t_deferredRenderCallbacks = [];\n\t\t_allMergedNodes = [];\n\t\t_eventMap = new WeakMap();\n\t\t_idToWrapperMap.clear();\n\t\t_idToChildrenWrappers.clear();\n\t\t_wrapperSiblingMap = new WeakMap();\n\t\t_nodeToWrapperMap = new WeakMap();\n\t\t_insertBeforeMap = undefined;\n\t}\n\n\tfunction mount(mountOptions: Partial<MountOptions> = {}) {\n\t\tlet domNode = mountOptions.domNode;\n\t\tif (!domNode) {\n\t\t\tif (has('dojo-debug') && domNode === null) {\n\t\t\t\tconsole.warn('Unable to find node to mount the application, defaulting to the document body.');\n\t\t\t}\n\t\t\tdomNode = global.document.body as HTMLElement;\n\t\t}\n\t\t_mountOptions = { ..._mountOptions, ...mountOptions, domNode };\n\t\tconst renderResult = wrapNodes(renderer)({}, []);\n\t\t_appWrapperId = `${wrapperId++}`;\n\t\tconst nextWrapper = {\n\t\t\tid: _appWrapperId,\n\t\t\tnode: renderResult,\n\t\t\torder: 0,\n\t\t\tdepth: 1,\n\t\t\towningId: '-1',\n\t\t\tparentId: '-1',\n\t\t\tsiblingId: '-1',\n\t\t\tproperties: {}\n\t\t};\n\t\t_idToWrapperMap.set('-1', {\n\t\t\tid: `-1`,\n\t\t\tdepth: 0,\n\t\t\torder: 0,\n\t\t\towningId: '',\n\t\t\tdomNode,\n\t\t\tnode: v('fake'),\n\t\t\tparentId: '-1'\n\t\t});\n\t\t_processQueue.push({\n\t\t\tcurrent: [],\n\t\t\tnext: [nextWrapper],\n\t\t\tmeta: { mergeNodes: arrayFrom(domNode.childNodes) }\n\t\t});\n\t\t_runProcessQueue();\n\t\t_runDomInstructionQueue();\n\t\t_cleanUpMergedNodes();\n\t\t_insertBeforeMap = undefined;\n\t\t_scheduleDeferredRenderCallbacks();\n\t\tif (!_renderScheduled) {\n\t\t\tsetRendering(false);\n\t\t}\n\t}\n\n\tfunction invalidate() {\n\t\tparentInvalidate && parentInvalidate();\n\t}\n\n\tfunction _schedule(): void {\n\t\tconst { sync } = _mountOptions;\n\t\tif (sync) {\n\t\t\t_runInvalidationQueue();\n\t\t} else if (!_renderScheduled) {\n\t\t\tsetRendering(true);\n\t\t\t_renderScheduled = global.requestAnimationFrame(() => {\n\t\t\t\t_runInvalidationQueue();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction getWNodeWrapper(id: string) {\n\t\tconst wrapper = _idToWrapperMap.get(id);\n\t\tif (wrapper && isWNodeWrapper(wrapper)) {\n\t\t\treturn wrapper;\n\t\t}\n\t}\n\n\tfunction _runInvalidationQueue() {\n\t\t_renderScheduled = undefined;\n\t\tlet invalidationQueue = [..._invalidationQueue];\n\t\tconst previouslyRendered = [];\n\t\t_invalidationQueue = [];\n\t\tinvalidationQueue.sort((a, b) => {\n\t\t\tlet result = b.depth - a.depth;\n\t\t\tif (result === 0) {\n\t\t\t\tresult = b.order - a.order;\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t\tif (_deferredProcessQueue.length) {\n\t\t\t_processQueue = [..._deferredProcessQueue];\n\t\t\t_deferredProcessQueue = [];\n\t\t\t_runProcessQueue();\n\t\t\tif (_deferredProcessQueue.length) {\n\t\t\t\t_invalidationQueue = [...invalidationQueue];\n\t\t\t\tinvalidationQueue = [];\n\t\t\t}\n\t\t}\n\t\tlet item: InvalidationQueueItem | undefined;\n\t\twhile ((item = invalidationQueue.pop())) {\n\t\t\tlet { id } = item;\n\t\t\tconst current = getWNodeWrapper(id);\n\t\t\tif (!current || previouslyRendered.indexOf(id) !== -1 || !_idToWrapperMap.has(current.parentId)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tpreviouslyRendered.push(id);\n\t\t\tconst sibling = _wrapperSiblingMap.get(current);\n\t\t\tconst next = {\n\t\t\t\tnode: {\n\t\t\t\t\ttype: WNODE,\n\t\t\t\t\twidgetConstructor: current.node.widgetConstructor,\n\t\t\t\t\tproperties: current.properties || {},\n\t\t\t\t\tchildren: current.node.children || []\n\t\t\t\t},\n\t\t\t\tinstance: current.instance,\n\t\t\t\tid: current.id,\n\t\t\t\tproperties: current.properties,\n\t\t\t\tdepth: current.depth,\n\t\t\t\torder: current.order,\n\t\t\t\towningId: current.owningId,\n\t\t\t\tparentId: current.parentId,\n\t\t\t\tregistryItem: current.registryItem\n\t\t\t};\n\n\t\t\tsibling && _wrapperSiblingMap.set(next, sibling);\n\t\t\tconst result = _updateWidget({ current, next });\n\t\t\tif (result && result.item) {\n\t\t\t\t_processQueue.push(result.item);\n\t\t\t\t_idToWrapperMap.set(id, next);\n\t\t\t\t_runProcessQueue();\n\t\t\t}\n\t\t}\n\t\t_runDomInstructionQueue();\n\t\t_cleanUpMergedNodes();\n\t\t_scheduleDeferredRenderCallbacks();\n\t\tif (!_renderScheduled) {\n\t\t\tsetRendering(false);\n\t\t}\n\t}\n\n\tfunction _cleanUpMergedNodes() {\n\t\tif (_deferredProcessQueue.length === 0) {\n\t\t\tlet mergedNode: Node | undefined;\n\t\t\twhile ((mergedNode = _allMergedNodes.pop())) {\n\t\t\t\tmergedNode.parentNode && mergedNode.parentNode.removeChild(mergedNode);\n\t\t\t}\n\t\t\t_mountOptions.merge = false;\n\t\t}\n\t}\n\n\tfunction _runProcessQueue() {\n\t\tlet item: DetachApplication | AttachApplication | ProcessItem | undefined;\n\t\twhile ((item = _processQueue.pop())) {\n\t\t\tif (isAttachApplication(item)) {\n\t\t\t\titem.instance && _applicationQueue.push(item as any);\n\t\t\t} else {\n\t\t\t\tconst { current, next, meta } = item;\n\t\t\t\t_process(current || EMPTY_ARRAY, next || EMPTY_ARRAY, meta);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _runDomInstructionQueue(): void {\n\t\t_applicationQueue.reverse();\n\t\tlet item: ApplicationInstruction | undefined;\n\t\twhile ((item = _applicationQueue.pop())) {\n\t\t\tif (item.type === 'create') {\n\t\t\t\tconst {\n\t\t\t\t\tparentDomNode,\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: { domNode, merged, requiresInsertBefore, node }\n\t\t\t\t} = item;\n\n\t\t\t\tprocessProperties(next, { properties: {} });\n\t\t\t\trunDeferredProperties(next);\n\t\t\t\tif (!merged) {\n\t\t\t\t\tlet insertBefore: any;\n\t\t\t\t\tif (requiresInsertBefore) {\n\t\t\t\t\t\tinsertBefore = findInsertBefore(next);\n\t\t\t\t\t} else if (_insertBeforeMap) {\n\t\t\t\t\t\tinsertBefore = _insertBeforeMap.get(next);\n\t\t\t\t\t}\n\t\t\t\t\tparentDomNode.insertBefore(domNode!, insertBefore);\n\t\t\t\t\tif (isDomVNode(next.node) && next.node.onAttach) {\n\t\t\t\t\t\tnext.node.onAttach();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((domNode as HTMLElement).tagName === 'OPTION' && domNode!.parentElement) {\n\t\t\t\t\tsetValue(domNode!.parentElement);\n\t\t\t\t}\n\t\t\t\tconst { enterAnimation, enterAnimationActive } = node.properties;\n\t\t\t\tif (_mountOptions.transition && enterAnimation && enterAnimation !== true) {\n\t\t\t\t\t_mountOptions.transition.enter(domNode as HTMLElement, enterAnimation, enterAnimationActive);\n\t\t\t\t}\n\t\t\t\tconst owningWrapper = _nodeToWrapperMap.get(next.node);\n\t\t\t\tif (owningWrapper && node.properties.key != null) {\n\t\t\t\t\tif (owningWrapper.instance) {\n\t\t\t\t\t\tconst instanceData = widgetInstanceMap.get(owningWrapper.instance);\n\t\t\t\t\t\tinstanceData && instanceData.nodeHandler.add(domNode as HTMLElement, `${node.properties.key}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddNodeToMap(owningWrapper.id, node.properties.key, domNode as HTMLElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem.next.inserted = true;\n\t\t\t} else if (item.type === 'update') {\n\t\t\t\tconst {\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: { domNode },\n\t\t\t\t\tcurrent,\n\t\t\t\t\tcurrent: { domNode: currentDomNode }\n\t\t\t\t} = item;\n\t\t\t\tif (isTextNode(domNode) && isTextNode(currentDomNode) && domNode !== currentDomNode) {\n\t\t\t\t\tcurrentDomNode.parentNode && currentDomNode.parentNode.replaceChild(domNode, currentDomNode);\n\t\t\t\t} else {\n\t\t\t\t\tconst previousProperties = buildPreviousProperties(domNode, current);\n\t\t\t\t\tprocessProperties(next, previousProperties);\n\t\t\t\t\trunDeferredProperties(next);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'delete') {\n\t\t\t\tconst { current } = item;\n\t\t\t\tconst { exitAnimation, exitAnimationActive } = current.node.properties;\n\t\t\t\tif (_mountOptions.transition && exitAnimation && exitAnimation !== true) {\n\t\t\t\t\t_mountOptions.transition.exit(current.domNode as HTMLElement, exitAnimation, exitAnimationActive);\n\t\t\t\t} else {\n\t\t\t\t\tcurrent.domNode!.parentNode!.removeChild(current.domNode!);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'attach') {\n\t\t\t\tconst { instance, attached } = item;\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance);\n\t\t\t\tif (instanceData) {\n\t\t\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\t\t\tattached && instanceData.onAttach();\n\t\t\t\t}\n\t\t\t} else if (item.type === 'detach') {\n\t\t\t\tif (item.current.instance) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(item.current.instance);\n\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t}\n\t\t\t\titem.current.instance = undefined;\n\t\t\t}\n\t\t}\n\t\tif (_deferredProcessQueue.length === 0) {\n\t\t\t_nodeToWrapperMap = new WeakMap();\n\t\t}\n\t}\n\n\tfunction _processMergeNodes(next: DNodeWrapper, mergeNodes: Node[]) {\n\t\tconst { merge } = _mountOptions;\n\t\tif (merge && mergeNodes.length) {\n\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\tlet {\n\t\t\t\t\tnode: { tag }\n\t\t\t\t} = next;\n\t\t\t\tfor (let i = 0; i < mergeNodes.length; i++) {\n\t\t\t\t\tconst domElement = mergeNodes[i] as Element;\n\t\t\t\t\tconst tagName = domElement.tagName || '';\n\t\t\t\t\tif (tag.toUpperCase() === tagName.toUpperCase()) {\n\t\t\t\t\t\tconst mergeNodeIndex = _allMergedNodes.indexOf(domElement);\n\t\t\t\t\t\tif (mergeNodeIndex !== -1) {\n\t\t\t\t\t\t\t_allMergedNodes.splice(mergeNodeIndex, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmergeNodes.splice(i, 1);\n\t\t\t\t\t\tnext.domNode = domElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnext.mergeNodes = mergeNodes;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction distinguishableCheck(childNodes: DNodeWrapper[], index: number) {\n\t\tconst parentWNodeWrapper = getWNodeWrapper(childNodes[index].owningId);\n\t\tcheckDistinguishable(childNodes, index, parentWNodeWrapper);\n\t}\n\n\tfunction createKeyMap(wrappers: DNodeWrapper[]): (string | number)[] | false {\n\t\tconst keys: (string | number)[] = [];\n\t\tfor (let i = 0; i < wrappers.length; i++) {\n\t\t\tconst wrapper = wrappers[i];\n\t\t\tif (wrapper.node.properties.key != null) {\n\t\t\t\tkeys.push(wrapper.node.properties.key);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn keys;\n\t}\n\n\tfunction _process(current: DNodeWrapper[], next: DNodeWrapper[], meta: ProcessMeta = {}): void {\n\t\tlet { mergeNodes = [], oldIndex = 0, newIndex = 0 } = meta;\n\t\tconst currentLength = current.length;\n\t\tconst nextLength = next.length;\n\t\tconst hasPreviousSiblings = currentLength > 1 || (currentLength > 0 && currentLength < nextLength);\n\t\tlet instructions: Instruction[] = [];\n\t\tlet replace = false;\n\t\tif (oldIndex === 0 && newIndex === 0 && currentLength) {\n\t\t\tconst currentKeys = createKeyMap(current);\n\t\t\tif (currentKeys) {\n\t\t\t\tconst nextKeys = createKeyMap(next);\n\t\t\t\tif (nextKeys) {\n\t\t\t\t\tfor (let i = 0; i < currentKeys.length; i++) {\n\t\t\t\t\t\tif (nextKeys.indexOf(currentKeys[i]) !== -1) {\n\t\t\t\t\t\t\tinstructions = [];\n\t\t\t\t\t\t\treplace = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treplace = true;\n\t\t\t\t\t\tinstructions.push({ current: current[i], next: undefined });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (replace || (currentLength === 0 && !_mountOptions.merge)) {\n\t\t\tfor (let i = 0; i < next.length; i++) {\n\t\t\t\tinstructions.push({ current: undefined, next: next[i] });\n\t\t\t}\n\t\t} else {\n\t\t\tif (newIndex < nextLength) {\n\t\t\t\tlet currentWrapper = oldIndex < currentLength ? current[oldIndex] : undefined;\n\t\t\t\tconst nextWrapper = next[newIndex];\n\t\t\t\tnextWrapper.hasPreviousSiblings = hasPreviousSiblings;\n\n\t\t\t\t_processMergeNodes(nextWrapper, mergeNodes);\n\n\t\t\t\tif (currentWrapper && same(currentWrapper, nextWrapper)) {\n\t\t\t\t\toldIndex++;\n\t\t\t\t\tnewIndex++;\n\t\t\t\t\tif (isVNodeWrapper(currentWrapper) && isVNodeWrapper(nextWrapper)) {\n\t\t\t\t\t\tnextWrapper.inserted = currentWrapper.inserted;\n\t\t\t\t\t}\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: nextWrapper });\n\t\t\t\t} else if (!currentWrapper || findIndexOfChild(current, nextWrapper, oldIndex + 1) === -1) {\n\t\t\t\t\thas('dojo-debug') && current.length && distinguishableCheck(next, newIndex);\n\t\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\t\tnewIndex++;\n\t\t\t\t} else if (findIndexOfChild(next, currentWrapper, newIndex + 1) === -1) {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, oldIndex);\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\t\toldIndex++;\n\t\t\t\t} else {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(next, newIndex);\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, oldIndex);\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\t\toldIndex++;\n\t\t\t\t\tnewIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newIndex < nextLength) {\n\t\t\t\t_processQueue.push({ current, next, meta: { mergeNodes, oldIndex, newIndex } });\n\t\t\t}\n\t\t\tif (currentLength > oldIndex && newIndex >= nextLength) {\n\t\t\t\tfor (let i = oldIndex; i < currentLength; i++) {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, i);\n\t\t\t\t\tinstructions.push({ current: current[i], next: undefined });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < instructions.length; i++) {\n\t\t\tconst result = _processOne(instructions[i]);\n\t\t\tif (result === false) {\n\t\t\t\tif (_mountOptions.merge && mergeNodes.length) {\n\t\t\t\t\tif (newIndex < nextLength) {\n\t\t\t\t\t\t_processQueue.pop();\n\t\t\t\t\t}\n\t\t\t\t\t_processQueue.push({ next, current, meta });\n\t\t\t\t\t_deferredProcessQueue = _processQueue;\n\t\t\t\t\t_processQueue = [];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst { widget, item, dom } = result;\n\t\t\twidget && _processQueue.push(widget);\n\t\t\titem && _processQueue.push(item);\n\t\t\tdom && _applicationQueue.push(dom);\n\t\t}\n\t}\n\n\tfunction _processOne({ current, next }: Instruction): ProcessResult | false {\n\t\tif (current !== next) {\n\t\t\tif (!current && next) {\n\t\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\t\treturn _createDom({ next });\n\t\t\t\t} else {\n\t\t\t\t\treturn _createWidget({ next });\n\t\t\t\t}\n\t\t\t} else if (current && next) {\n\t\t\t\tif (isVNodeWrapper(current) && isVNodeWrapper(next)) {\n\t\t\t\t\treturn _updateDom({ current, next });\n\t\t\t\t} else if (isWNodeWrapper(current) && isWNodeWrapper(next)) {\n\t\t\t\t\treturn _updateWidget({ current, next });\n\t\t\t\t}\n\t\t\t} else if (current && !next) {\n\t\t\t\tif (isVNodeWrapper(current)) {\n\t\t\t\t\treturn _removeDom({ current });\n\t\t\t\t} else if (isWNodeWrapper(current)) {\n\t\t\t\t\treturn _removeWidget({ current });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t}\n\n\tfunction createWidgetOptions(id: string, widgetId: string, middleware?: any) {\n\t\treturn {\n\t\t\tid,\n\t\t\tproperties: () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\twidgetMeta.propertiesCalled = true;\n\t\t\t\t\treturn { ...widgetMeta.properties };\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t},\n\t\t\tchildren: () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.children;\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t},\n\t\t\tmiddleware\n\t\t};\n\t}\n\n\tfunction resolveMiddleware(\n\t\tmiddlewares: any,\n\t\tid: string,\n\t\tmiddlewareIds: string[] = []\n\t): { middlewares: any; ids: string[] } {\n\t\tconst keys = Object.keys(middlewares);\n\t\tconst results: any = {};\n\t\tconst uniqueId = `${id}-${metaId++}`;\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tconst middleware = middlewares[keys[i]]();\n\t\t\tconst payload = createWidgetOptions(uniqueId, id);\n\t\t\tif (middleware.middlewares) {\n\t\t\t\tconst { middlewares: resolvedMiddleware } = resolveMiddleware(\n\t\t\t\t\tmiddleware.middlewares,\n\t\t\t\t\tid,\n\t\t\t\t\tmiddlewareIds\n\t\t\t\t);\n\t\t\t\tpayload.middleware = resolvedMiddleware;\n\t\t\t\tresults[keys[i]] = middleware.callback(payload);\n\t\t\t} else {\n\t\t\t\tresults[keys[i]] = middleware.callback(payload);\n\t\t\t}\n\t\t}\n\t\tmiddlewareIds.push(uniqueId);\n\t\treturn { middlewares: results, ids: middlewareIds };\n\t}\n\n\tfunction _createWidget({ next }: CreateWidgetInstruction): ProcessResult | false {\n\t\tlet {\n\t\t\tnode: { widgetConstructor }\n\t\t} = next;\n\t\tlet { registry } = _mountOptions;\n\t\tlet Constructor = next.registryItem || widgetConstructor;\n\t\tif (!isWidget(Constructor)) {\n\t\t\tresolveRegistryItem(next);\n\t\t\tif (!next.registryItem) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tConstructor = next.registryItem;\n\t\t}\n\n\t\tlet rendered: RenderResult;\n\t\tlet invalidate: () => void;\n\t\tnext.properties = { ...next.node.properties };\n\t\tnext.id = next.id || `${wrapperId++}`;\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tconst { id, depth, order } = next;\n\t\tif (!isWidgetBaseConstructor(Constructor)) {\n\t\t\tlet widgetMeta = widgetMetaMap.get(id);\n\t\t\tif (!widgetMeta) {\n\t\t\t\tinvalidate = () => {\n\t\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\t\tif (widgetMeta) {\n\t\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t\t\tif (!widgetMeta.rendering && _idToWrapperMap.has(id)) {\n\t\t\t\t\t\t\t_invalidationQueue.push({ id, depth, order });\n\t\t\t\t\t\t\t_schedule();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twidgetMeta = {\n\t\t\t\t\twidgetName: Constructor.name || 'unknown',\n\t\t\t\t\tmountNode: _mountOptions.domNode,\n\t\t\t\t\tdirty: false,\n\t\t\t\t\tinvalidator: invalidate,\n\t\t\t\t\tproperties: wrapFunctionProperties(id, next.node.properties),\n\t\t\t\t\toriginalProperties: { ...next.node.properties },\n\t\t\t\t\tchildren: next.node.children,\n\t\t\t\t\tdeferRefs: 0,\n\t\t\t\t\trendering: true,\n\t\t\t\t\tmiddleware: {},\n\t\t\t\t\tmiddlewareIds: [],\n\t\t\t\t\tregistry: _mountOptions.registry,\n\t\t\t\t\tpropertiesCalled: false\n\t\t\t\t};\n\n\t\t\t\twidgetMetaMap.set(next.id, widgetMeta);\n\t\t\t\tif ((Constructor as any).middlewares && Object.keys((Constructor as any).middlewares).length) {\n\t\t\t\t\tconst { middlewares, ids } = resolveMiddleware((Constructor as any).middlewares, id);\n\t\t\t\t\twidgetMeta.middleware = middlewares;\n\t\t\t\t\twidgetMeta.middlewareIds = ids;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinvalidate = widgetMeta.invalidator;\n\t\t\t}\n\n\t\t\trendered = Constructor(createWidgetOptions(id, id, widgetMeta.middleware));\n\t\t\twidgetMeta.rendering = false;\n\t\t\twidgetMeta.propertiesCalled = false;\n\t\t\tif (widgetMeta.deferRefs > 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tlet instance = new Constructor() as WidgetBaseInterface & {\n\t\t\t\tinvalidate: any;\n\t\t\t\tregistry: any;\n\t\t\t};\n\t\t\tinstance.registry.base = registry;\n\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\tinvalidate = () => {\n\t\t\t\tinstanceData.dirty = true;\n\t\t\t\tif (!instanceData.rendering && _idToWrapperMap.has(id)) {\n\t\t\t\t\t_invalidationQueue.push({ id, depth, order });\n\t\t\t\t\t_schedule();\n\t\t\t\t}\n\t\t\t};\n\t\t\tinstanceData.invalidate = invalidate;\n\t\t\tinstanceData.rendering = true;\n\t\t\tinstance.__setProperties__(next.node.properties);\n\t\t\tinstance.__setChildren__(next.node.children);\n\t\t\tnext.instance = instance;\n\t\t\trendered = instance.__render__();\n\t\t\tinstanceData.rendering = false;\n\t\t}\n\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (rendered) {\n\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\tchildren = renderedToWrapper(rendered, next, null);\n\t\t\t_idToChildrenWrappers.set(id, children);\n\t\t}\n\n\t\tif (!parentInvalidate && !(Constructor as any).isWNodeWrapper) {\n\t\t\tparentInvalidate = invalidate;\n\t\t}\n\n\t\treturn {\n\t\t\titem: {\n\t\t\t\tnext: children,\n\t\t\t\tmeta: { mergeNodes: next.mergeNodes }\n\t\t\t},\n\t\t\twidget: { type: 'attach', instance: next.instance, id, attached: true }\n\t\t};\n\t}\n\n\tfunction _updateWidget({ current, next }: UpdateWidgetInstruction): ProcessResult {\n\t\tcurrent = getWNodeWrapper(current.id) || current;\n\t\tconst { instance, domNode, hasAnimations, id } = current;\n\t\tlet {\n\t\t\tnode: { widgetConstructor }\n\t\t} = next;\n\t\tconst Constructor = next.registryItem || widgetConstructor;\n\n\t\tif (!isWidget(Constructor)) {\n\t\t\treturn {};\n\t\t}\n\t\tlet rendered: RenderResult;\n\t\tlet processResult: ProcessResult = {};\n\t\tlet didRender = false;\n\t\tlet currentChildren = _idToChildrenWrappers.get(current.id);\n\t\tnext.hasAnimations = hasAnimations;\n\t\tnext.id = id;\n\t\tnext.properties = { ...next.node.properties };\n\t\t_wrapperSiblingMap.delete(current);\n\t\tif (domNode && domNode.parentNode) {\n\t\t\tnext.domNode = domNode;\n\t\t}\n\n\t\tif (!isWidgetBaseConstructor(Constructor)) {\n\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.originalProperties = { ...next.properties };\n\t\t\t\twidgetMeta.properties = wrapFunctionProperties(id, widgetMeta.originalProperties);\n\t\t\t\twidgetMeta.children = next.node.children;\n\t\t\t\twidgetMeta.rendering = true;\n\t\t\t\tconst customProperties = runDiffs(widgetMeta, current.properties, widgetMeta.originalProperties);\n\t\t\t\twidgetMeta.properties = { ...widgetMeta.properties, ...customProperties };\n\t\t\t\tif (current.node.children.length > 0 || next.node.children.length > 0) {\n\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t}\n\t\t\t\tif (!widgetMeta.dirty) {\n\t\t\t\t\tpropertiesDiff(\n\t\t\t\t\t\tcurrent.properties,\n\t\t\t\t\t\tnext.properties,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidgetMeta.customDiffProperties ? [...widgetMeta.customDiffProperties.values()] : []\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (widgetMeta.dirty) {\n\t\t\t\t\t_idToChildrenWrappers.delete(id);\n\t\t\t\t\tdidRender = true;\n\t\t\t\t\trendered = Constructor(createWidgetOptions(id, id, widgetMeta.middleware));\n\t\t\t\t\twidgetMeta.dirty = false;\n\t\t\t\t\tif (widgetMeta.deferRefs > 0) {\n\t\t\t\t\t\trendered = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twidgetMeta.rendering = false;\n\t\t\t\twidgetMeta.propertiesCalled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tconst instanceData = widgetInstanceMap.get(instance!)!;\n\t\t\tnext.instance = instance;\n\t\t\tinstanceData.rendering = true;\n\t\t\tinstance!.__setProperties__(next.node.properties);\n\t\t\tinstance!.__setChildren__(next.node.children);\n\t\t\tif (instanceData.dirty) {\n\t\t\t\tdidRender = true;\n\t\t\t\t_idToChildrenWrappers.delete(id);\n\t\t\t\trendered = instance!.__render__();\n\t\t\t}\n\t\t\tinstanceData.rendering = false;\n\t\t}\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tprocessResult.widget = { type: 'attach', instance, id, attached: false };\n\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (rendered) {\n\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\tchildren = renderedToWrapper(rendered, next, current);\n\t\t\t_idToChildrenWrappers.set(id, children);\n\t\t}\n\n\t\tif (didRender) {\n\t\t\tprocessResult.item = {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tnext: children,\n\t\t\t\tmeta: {}\n\t\t\t};\n\t\t}\n\t\treturn processResult;\n\t}\n\n\tfunction _removeWidget({ current }: RemoveWidgetInstruction): ProcessResult {\n\t\tcurrent = getWNodeWrapper(current.id) || current;\n\t\t_idToWrapperMap.delete(current.id);\n\t\tconst meta = widgetMetaMap.get(current.id);\n\t\tlet currentChildren = _idToChildrenWrappers.get(current.id);\n\t\t_idToChildrenWrappers.delete(current.id);\n\t\t_wrapperSiblingMap.delete(current);\n\t\tlet processResult: ProcessResult = {\n\t\t\titem: {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tmeta: {}\n\t\t\t}\n\t\t};\n\t\tif (meta) {\n\t\t\tmeta.registryHandler && meta.registryHandler.destroy();\n\t\t\tdestroyHandles(meta);\n\t\t\twidgetMetaMap.delete(current.id);\n\t\t} else {\n\t\t\tprocessResult.widget = { type: 'detach', current, instance: current.instance };\n\t\t}\n\n\t\treturn processResult;\n\t}\n\n\tfunction findDomNodeOnParentWrapper(id: string): string | undefined {\n\t\tconst children = _idToChildrenWrappers.get(id) || [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tif (child.domNode) {\n\t\t\t\treturn child.id;\n\t\t\t}\n\t\t\tconst childId = findDomNodeOnParentWrapper(child.id);\n\t\t\tif (childId) {\n\t\t\t\treturn childId;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _createDom({ next }: CreateDomInstruction): ProcessResult {\n\t\tconst parentDomNode = findParentDomNode(next)!;\n\t\tconst isVirtual = isVirtualWrapper(next);\n\t\tconst isBody = isBodyWrapper(next);\n\t\tconst isHead = isHeadWrapper(next);\n\t\tlet mergeNodes: Node[] = [];\n\t\tnext.id = `${wrapperId++}`;\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tif (!next.domNode) {\n\t\t\tif ((next.node as any).domNode) {\n\t\t\t\tnext.domNode = (next.node as any).domNode;\n\t\t\t} else {\n\t\t\t\tif (next.node.tag === 'svg') {\n\t\t\t\t\tnext.namespace = NAMESPACE_SVG;\n\t\t\t\t}\n\t\t\t\tif (isBody) {\n\t\t\t\t\tnext.domNode = global.document.body;\n\t\t\t\t} else if (isHead) {\n\t\t\t\t\tnext.domNode = global.document.head;\n\t\t\t\t} else if (next.node.tag && !isVirtual) {\n\t\t\t\t\tif (next.namespace) {\n\t\t\t\t\t\tnext.domNode = global.document.createElementNS(next.namespace, next.node.tag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext.domNode = global.document.createElement(next.node.tag);\n\t\t\t\t\t}\n\t\t\t\t} else if (next.node.text != null) {\n\t\t\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_insertBeforeMap && _allMergedNodes.length) {\n\t\t\t\tif (parentDomNode === _allMergedNodes[0].parentNode) {\n\t\t\t\t\t_insertBeforeMap.set(next, _allMergedNodes[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (_mountOptions.merge) {\n\t\t\tnext.merged = true;\n\t\t\tif (isTextNode(next.domNode)) {\n\t\t\t\tif (next.domNode.data !== next.node.text) {\n\t\t\t\t\t_allMergedNodes = [next.domNode, ..._allMergedNodes];\n\t\t\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t\t\t\tnext.merged = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmergeNodes = arrayFrom(next.domNode.childNodes);\n\t\t\t\t_allMergedNodes = [..._allMergedNodes, ...mergeNodes];\n\t\t\t}\n\t\t}\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (next.domNode || isVirtual) {\n\t\t\tif (next.node.children && next.node.children.length) {\n\t\t\t\tchildren = renderedToWrapper(next.node.children, next, null);\n\t\t\t\t_idToChildrenWrappers.set(next.id, children);\n\t\t\t}\n\t\t}\n\t\tconst dom: ApplicationInstruction | undefined = isSpecialWrapper(next)\n\t\t\t? undefined\n\t\t\t: {\n\t\t\t\t\tnext: next!,\n\t\t\t\t\tparentDomNode: parentDomNode,\n\t\t\t\t\ttype: 'create'\n\t\t\t  };\n\t\tif (children) {\n\t\t\treturn {\n\t\t\t\titem: {\n\t\t\t\t\tcurrent: [],\n\t\t\t\t\tnext: children,\n\t\t\t\t\tmeta: { mergeNodes }\n\t\t\t\t},\n\t\t\t\tdom,\n\t\t\t\twidget: isVirtual ? { type: 'attach', id: (next as any).id, attached: false } : undefined\n\t\t\t};\n\t\t}\n\t\treturn { dom };\n\t}\n\n\tfunction _updateDom({ current, next }: UpdateDomInstruction): ProcessResult {\n\t\tnext.domNode = current.domNode;\n\t\tnext.namespace = current.namespace;\n\t\tnext.id = current.id;\n\t\tnext.childDomWrapperId = current.childDomWrapperId;\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tlet currentChildren = _idToChildrenWrappers.get(next.id);\n\t\tif (next.node.text != null && next.node.text !== current.node.text) {\n\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t} else if (next.node.children) {\n\t\t\tchildren = renderedToWrapper(next.node.children, next, current);\n\t\t\t_idToChildrenWrappers.set(next.id, children);\n\t\t}\n\t\t_wrapperSiblingMap.delete(current);\n\t\t_idToWrapperMap.set(next.id, next);\n\t\treturn {\n\t\t\titem: {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tnext: children,\n\t\t\t\tmeta: {}\n\t\t\t},\n\t\t\tdom: { type: 'update', next, current }\n\t\t};\n\t}\n\n\tfunction _removeDom({ current }: RemoveDomInstruction): ProcessResult {\n\t\tconst isSpecial = isSpecialWrapper(current);\n\t\tconst children = _idToChildrenWrappers.get(current.id);\n\t\t_idToChildrenWrappers.delete(current.id);\n\t\t_idToWrapperMap.delete(current.id);\n\t\t_wrapperSiblingMap.delete(current);\n\t\tif (current.node.properties.key) {\n\t\t\tconst widgetMeta = widgetMetaMap.get(current.owningId);\n\t\t\tconst parentWrapper = getWNodeWrapper(current.owningId);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.nodeMap && widgetMeta.nodeMap.delete(current.node.properties.key);\n\t\t\t} else if (parentWrapper && parentWrapper.instance) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(parentWrapper.instance);\n\t\t\t\tinstanceData && instanceData.nodeHandler.remove(current.node.properties.key);\n\t\t\t}\n\t\t}\n\t\tif (current.hasAnimations || isSpecial) {\n\t\t\treturn {\n\t\t\t\titem: { current: children, meta: {} },\n\t\t\t\tdom: isSpecial ? undefined : { type: 'delete', current }\n\t\t\t};\n\t\t}\n\n\t\tif (children) {\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tlet wrappers = children || [];\n\t\t\t\tlet wrapper: DNodeWrapper | undefined;\n\t\t\t\tlet specialIds = [];\n\t\t\t\twhile ((wrapper = wrappers.pop())) {\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\twrapper = getWNodeWrapper(wrapper.id) || wrapper;\n\t\t\t\t\t\tif (wrapper.instance) {\n\t\t\t\t\t\t\tconst instanceData = widgetInstanceMap.get(wrapper.instance);\n\t\t\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t\t\t\twrapper.instance = undefined;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst meta = widgetMetaMap.get(wrapper.id);\n\t\t\t\t\t\t\tif (meta) {\n\t\t\t\t\t\t\t\tmeta.registryHandler && meta.registryHandler.destroy();\n\t\t\t\t\t\t\t\tdestroyHandles(meta);\n\t\t\t\t\t\t\t\twidgetMetaMap.delete(wrapper.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet wrapperChildren = _idToChildrenWrappers.get(wrapper.id);\n\t\t\t\t\tif (wrapperChildren) {\n\t\t\t\t\t\twrappers.push(...wrapperChildren);\n\t\t\t\t\t}\n\t\t\t\t\tif (isBodyWrapper(wrapper) || isHeadWrapper(wrapper)) {\n\t\t\t\t\t\tspecialIds.push(wrapper.id);\n\t\t\t\t\t} else if (specialIds.indexOf(wrapper.parentId) !== -1) {\n\t\t\t\t\t\tif (isWNodeWrapper(wrapper) || isVirtualWrapper(wrapper)) {\n\t\t\t\t\t\t\tspecialIds.push(wrapper.id);\n\t\t\t\t\t\t} else if (wrapper.domNode && wrapper.domNode.parentNode) {\n\t\t\t\t\t\t\twrapper.domNode.parentNode.removeChild(wrapper.domNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_idToChildrenWrappers.delete(wrapper.id);\n\t\t\t\t\t_idToWrapperMap.delete(wrapper.id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdom: { type: 'delete', current }\n\t\t};\n\t}\n\n\treturn {\n\t\tmount,\n\t\tunmount,\n\t\tinvalidate\n\t};\n}\n\nexport default renderer;\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","import has from '../core/has';\n\nexport interface ObjectAssign {\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source The source object from which to copy properties.\n\t */\n\t<T, U>(target: T, source: U): T & U;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t */\n\t<T, U, V>(target: T, source1: U, source2: V): T & U & V;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t * @param source3 The third source object from which to copy properties.\n\t */\n\t<T, U, V, W>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param sources One or more source objects from which to copy properties\n\t */\n\t(target: object, ...sources: any[]): any;\n}\n\nexport interface ObjectEnteries {\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T extends { [key: string]: any }, K extends keyof T>(o: T): [keyof T, T[K]][];\n\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): [string, any][];\n}\n\nexport interface ObjectGetOwnPropertyDescriptors {\n\t<T>(o: T): { [K in keyof T]: PropertyDescriptor };\n\t(o: any): { [key: string]: PropertyDescriptor };\n}\n\nexport interface ObjectValues {\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T>(o: { [s: string]: T }): T[];\n\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): any[];\n}\n\nexport let assign: ObjectAssign;\n\n/**\n * Gets the own property descriptor of the specified object.\n * An own property descriptor is one that is defined directly on the object and is not\n * inherited from the object's prototype.\n * @param o Object that contains the property.\n * @param p Name of the property.\n */\nexport let getOwnPropertyDescriptor: <T, K extends keyof T>(o: T, propertyKey: K) => PropertyDescriptor | undefined;\n\n/**\n * Returns the names of the own properties of an object. The own properties of an object are those that are defined directly\n * on that object, and are not inherited from the object's prototype. The properties of an object include both fields (objects) and functions.\n * @param o Object that contains the own properties.\n */\nexport let getOwnPropertyNames: (o: any) => string[];\n\n/**\n * Returns an array of all symbol properties found directly on object o.\n * @param o Object to retrieve the symbols from.\n */\nexport let getOwnPropertySymbols: (o: any) => symbol[];\n\n/**\n * Returns true if the values are the same value, false otherwise.\n * @param value1 The first value.\n * @param value2 The second value.\n */\nexport let is: (value1: any, value2: any) => boolean;\n\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\nexport let keys: (o: object) => string[];\n\n/* ES7 Object static methods */\n\nexport let getOwnPropertyDescriptors: ObjectGetOwnPropertyDescriptors;\n\nexport let entries: ObjectEnteries;\n\nexport let values: ObjectValues;\n\nif (!has('es6-object')) {\n\tconst keys = Object.keys.bind(Object);\n\tObject.keys = function symbolAwareKeys(o: object): string[] {\n\t\treturn keys(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tObject.assign = function assign(target: any, ...sources: any[]) {\n\t\tif (target == null) {\n\t\t\t// TypeError if undefined or null\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t}\n\n\t\tconst to = Object(target);\n\t\tsources.forEach((nextSource) => {\n\t\t\tif (nextSource) {\n\t\t\t\t// Skip over if undefined or null\n\t\t\t\tkeys(nextSource).forEach((nextKey) => {\n\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn to;\n\t};\n\n\tconst getOwnPropertyNames = Object.getOwnPropertyNames.bind(Object);\n\tObject.getOwnPropertyNames = function symbolAwareGetOwnPropertyNames(o: any): string[] {\n\t\treturn getOwnPropertyNames(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tObject.getOwnPropertySymbols = function getOwnPropertySymbols(o: any): symbol[] {\n\t\treturn getOwnPropertyNames(o)\n\t\t\t.filter((key) => Boolean(key.match(/^@@.+/)))\n\t\t\t.map((key) => Symbol.for(key.substring(2)));\n\t};\n\n\tObject.is = function is(value1: any, value2: any): boolean {\n\t\tif (value1 === value2) {\n\t\t\treturn value1 !== 0 || 1 / value1 === 1 / value2; // -0\n\t\t}\n\t\treturn value1 !== value1 && value2 !== value2; // NaN\n\t};\n}\n\nif (!has('es2017-object')) {\n\tObject.getOwnPropertyDescriptors = function getOwnPropertyDescriptors<T>(\n\t\to: T\n\t): { [P in keyof T]: TypedPropertyDescriptor<T[P]> } & { [x: string]: PropertyDescriptor } {\n\t\treturn Object.getOwnPropertyNames(o).reduce(\n\t\t\t(previous, key) => {\n\t\t\t\tprevious[key] = Object.getOwnPropertyDescriptor(o, key)!;\n\t\t\t\treturn previous;\n\t\t\t},\n\t\t\t{} as { [x: string]: PropertyDescriptor }\n\t\t) as { [P in keyof T]: TypedPropertyDescriptor<T[P]> } & { [x: string]: PropertyDescriptor };\n\t};\n\n\tObject.entries = function entries(o: any): [string, any][] {\n\t\treturn keys(o).map((key) => [key, o[key]] as [string, any]);\n\t};\n\n\tObject.values = function values(o: any): any[] {\n\t\treturn keys(o).map((key) => o[key]);\n\t};\n}\n\nassign = Object.assign;\ngetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\ngetOwnPropertyNames = Object.getOwnPropertyNames;\ngetOwnPropertySymbols = Object.getOwnPropertySymbols;\nis = Object.is;\nkeys = Object.keys;\ngetOwnPropertyDescriptors = Object.getOwnPropertyDescriptors;\nentries = Object.entries;\nvalues = Object.values;\n\nexport default Object;\n","`!has('es6-iterator')`;\nimport { isArrayLike, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport global from './global';\nimport { is as objectIs } from './object';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface Map<K, V> {\n\t/**\n\t * Deletes all keys and their associated values.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Deletes a given key and its associated value.\n\t *\n\t * @param key The key to delete\n\t * @return true if the key exists, false if it does not\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Returns an iterator that yields each key/value pair as an array.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[K, V]>;\n\n\t/**\n\t * Executes a given function for each map entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated Map instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;\n\n\t/**\n\t * Returns the value associated with a given key.\n\t *\n\t * @param key The key to look up\n\t * @return The value if one exists or undefined\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Returns an iterator that yields each key in the map.\n\t *\n\t * @return An iterator containing the instance's keys.\n\t */\n\tkeys(): IterableIterator<K>;\n\n\t/**\n\t * Checks for the presence of a given key.\n\t *\n\t * @param key The key to check for\n\t * @return true if the key exists, false if it does not\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Sets the value associated with a given key.\n\t *\n\t * @param key The key to define a value to\n\t * @param value The value to assign\n\t * @return The Map instance\n\t */\n\tset(key: K, value: V): this;\n\n\t/**\n\t * Returns the number of key / value pairs in the Map.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterator that yields each value in the map.\n\t *\n\t * @return An iterator containing the instance's values.\n\t */\n\tvalues(): IterableIterator<V>;\n\n\t/** Returns an iterable of entries in the map. */\n\t[Symbol.iterator](): IterableIterator<[K, V]>;\n\n\treadonly [Symbol.toStringTag]: string;\n}\n\nexport interface MapConstructor {\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t */\n\tnew (): Map<any, any>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator?: [K, V][]): Map<K, V>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator: Iterable<[K, V]>): Map<K, V>;\n\n\treadonly prototype: Map<any, any>;\n\n\treadonly [Symbol.species]: MapConstructor;\n}\n\nexport let Map: MapConstructor = global.Map;\n\nif (!has('es6-map')) {\n\tMap = global.Map = class Map<K, V> {\n\t\tprotected readonly _keys: K[] = [];\n\t\tprotected readonly _values: V[] = [];\n\n\t\t/**\n\t\t * An alternative to Array.prototype.indexOf using Object.is\n\t\t * to check for equality. See http://mzl.la/1zuKO2V\n\t\t */\n\t\tprotected _indexOfKey(keys: K[], key: K): number {\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tif (objectIs(keys[i], key)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\tstatic [Symbol.species] = Map;\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst value = iterable[i];\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._keys.length;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._keys.length = this._values.length = 0;\n\t\t}\n\n\t\tdelete(key: K): boolean {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\tif (index < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._keys.splice(index, 1);\n\t\t\tthis._values.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[K, V]> {\n\t\t\tconst values = this._keys.map(\n\t\t\t\t(key: K, i: number): [K, V] => {\n\t\t\t\t\treturn [key, this._values[i]];\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn new ShimIterator(values);\n\t\t}\n\n\t\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}) {\n\t\t\tconst keys = this._keys;\n\t\t\tconst values = this._values;\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tcallback.call(context, values[i], keys[i], this);\n\t\t\t}\n\t\t}\n\n\t\tget(key: K): V | undefined {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\treturn index < 0 ? undefined : this._values[index];\n\t\t}\n\n\t\thas(key: K): boolean {\n\t\t\treturn this._indexOfKey(this._keys, key) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<K> {\n\t\t\treturn new ShimIterator(this._keys);\n\t\t}\n\n\t\tset(key: K, value: V): Map<K, V> {\n\t\t\tlet index = this._indexOfKey(this._keys, key);\n\t\t\tindex = index < 0 ? this._keys.length : index;\n\t\t\tthis._keys[index] = key;\n\t\t\tthis._values[index] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\tvalues(): IterableIterator<V> {\n\t\t\treturn new ShimIterator(this._values);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\t\treturn this.entries();\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Map' = 'Map';\n\t};\n}\n\nexport default Map;\n","import global from '../global';\nimport has from '../../core/has';\n\nexport default function wrapper(nameOnGlobal: string, constructor = false, bind = false): any {\n\tif (has('test')) {\n\t\tif (constructor) {\n\t\t\treturn function(...args: any[]) {\n\t\t\t\treturn new global[nameOnGlobal](...args);\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(...args: any[]) {\n\t\t\t\treturn global[nameOnGlobal](...args);\n\t\t\t};\n\t\t}\n\t}\n\n\treturn bind ? global[nameOnGlobal].bind(global) : global[nameOnGlobal];\n}\n","import Map from '../shim/Map';\nimport { Destroyable, Handle } from './Destroyable';\n\n/**\n * Map of computed regular expressions, keyed by string\n */\nconst regexMap = new Map<string, RegExp>();\n\nexport type EventType = string | symbol;\n\n/**\n * The base event object, which provides a `type` property\n */\nexport interface EventObject<T = EventType> {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: T;\n}\n\n/**\n * Determines if the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nexport function isGlobMatch(globString: string | symbol, targetString: string | symbol): boolean {\n\tif (typeof targetString === 'string' && typeof globString === 'string' && globString.indexOf('*') !== -1) {\n\t\tlet regex: RegExp;\n\t\tif (regexMap.has(globString)) {\n\t\t\tregex = regexMap.get(globString)!;\n\t\t} else {\n\t\t\tregex = new RegExp(`^${globString.replace(/\\*/g, '.*')}$`);\n\t\t\tregexMap.set(globString, regex);\n\t\t}\n\t\treturn regex.test(targetString);\n\t} else {\n\t\treturn globString === targetString;\n\t}\n}\n\nexport type EventedCallback<T = EventType, E extends EventObject<T> = EventObject<T>> = {\n\t/**\n\t * A callback that takes an `event` argument\n\t *\n\t * @param event The event object\n\t */\n\n\t(event: E): boolean | void;\n};\n\nexport interface CustomEventTypes<T extends EventObject<any> = EventObject<any>> {\n\t[index: string]: T;\n}\n\n/**\n * A type which is either a targeted event listener or an array of listeners\n * @template T The type of target for the events\n * @template E The event type for the events\n */\nexport type EventedCallbackOrArray<T = EventType, E extends EventObject<T> = EventObject<T>> =\n\t| EventedCallback<T, E>\n\t| EventedCallback<T, E>[];\n\n/**\n * Event Class\n */\nexport class Evented<\n\tM extends CustomEventTypes = {},\n\tT = EventType,\n\tO extends EventObject<T> = EventObject<T>\n> extends Destroyable {\n\t// The following member is purely so TypeScript remembers the type of `M` when extending so\n\t// that the utilities in `on.ts` will work https://github.com/Microsoft/TypeScript/issues/20348\n\t// tslint:disable-next-line\n\tprotected __typeMap__?: M;\n\t/**\n\t * map of listeners keyed by event type\n\t */\n\tprotected listenersMap: Map<T | keyof M, EventedCallback<T, O>[]> = new Map();\n\n\t/**\n\t * Emits the event object for the specified type\n\t *\n\t * @param event the event to emit\n\t */\n\temit<K extends keyof M>(event: M[K]): void;\n\temit(event: O): void;\n\temit(event: any): void {\n\t\tthis.listenersMap.forEach((methods, type) => {\n\t\t\tif (isGlobMatch(type as any, event.type)) {\n\t\t\t\t[...methods].forEach((method) => {\n\t\t\t\t\tmethod.call(this, event);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Catch all handler for various call signatures. The signatures are defined in\n\t * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n\t * `BaseEventedEvents`.  See example for details.\n\t *\n\t * @param args\n\t *\n\t * @example\n\t *\n\t * interface WidgetBaseEvents extends BaseEventedEvents {\n\t *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n\t * }\n\t * class WidgetBase extends Evented {\n\t *    on: WidgetBaseEvents;\n\t * }\n\t *\n\t * @return {any}\n\t */\n\ton<K extends keyof M>(type: K, listener: EventedCallbackOrArray<K, M[K]>): Handle;\n\ton(type: T, listener: EventedCallbackOrArray<T, O>): Handle;\n\ton(type: any, listener: EventedCallbackOrArray<any, any>): Handle {\n\t\tif (Array.isArray(listener)) {\n\t\t\tconst handles = listener.map((listener) => this._addListener(type, listener));\n\t\t\treturn {\n\t\t\t\tdestroy() {\n\t\t\t\t\thandles.forEach((handle) => handle.destroy());\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn this._addListener(type, listener);\n\t}\n\n\tprivate _addListener(type: T | keyof M, listener: EventedCallback<T, O>) {\n\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\tlisteners.push(listener);\n\t\tthis.listenersMap.set(type, listeners);\n\t\treturn {\n\t\t\tdestroy: () => {\n\t\t\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\t\t\tlisteners.splice(listeners.indexOf(listener), 1);\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport default Evented;\n","// Configuration Constants\nexport var EPSILON = 0.000001;\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n    return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n//# sourceMappingURL=common.js.map","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\nimport { EPSILON } from \"./common\";\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n    var out = new Float32Array(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    var out = new Float32Array(16);\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1];\n        var a02 = a[2];\n        var a03 = a[3];\n        var a12 = a[6];\n        var a13 = a[7];\n        var a23 = a[11];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    }\n    else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    var a30 = a[12];\n    var a31 = a[13];\n    var a32 = a[14];\n    var a33 = a[15];\n    var b00 = a00 * a11 - a01 * a10;\n    var b01 = a00 * a12 - a02 * a10;\n    var b02 = a00 * a13 - a03 * a10;\n    var b03 = a01 * a12 - a02 * a11;\n    var b04 = a01 * a13 - a03 * a11;\n    var b05 = a02 * a13 - a03 * a12;\n    var b06 = a20 * a31 - a21 * a30;\n    var b07 = a20 * a32 - a22 * a30;\n    var b08 = a20 * a33 - a23 * a30;\n    var b09 = a21 * a32 - a22 * a31;\n    var b10 = a21 * a33 - a23 * a31;\n    var b11 = a22 * a33 - a23 * a32;\n    // Calculate the determinant\n    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    var a30 = a[12];\n    var a31 = a[13];\n    var a32 = a[14];\n    var a33 = a[15];\n    out[0] =\n        a11 * (a22 * a33 - a23 * a32) -\n            a21 * (a12 * a33 - a13 * a32) +\n            a31 * (a12 * a23 - a13 * a22);\n    out[1] = -(a01 * (a22 * a33 - a23 * a32) -\n        a21 * (a02 * a33 - a03 * a32) +\n        a31 * (a02 * a23 - a03 * a22));\n    out[2] =\n        a01 * (a12 * a33 - a13 * a32) -\n            a11 * (a02 * a33 - a03 * a32) +\n            a31 * (a02 * a13 - a03 * a12);\n    out[3] = -(a01 * (a12 * a23 - a13 * a22) -\n        a11 * (a02 * a23 - a03 * a22) +\n        a21 * (a02 * a13 - a03 * a12));\n    out[4] = -(a10 * (a22 * a33 - a23 * a32) -\n        a20 * (a12 * a33 - a13 * a32) +\n        a30 * (a12 * a23 - a13 * a22));\n    out[5] =\n        a00 * (a22 * a33 - a23 * a32) -\n            a20 * (a02 * a33 - a03 * a32) +\n            a30 * (a02 * a23 - a03 * a22);\n    out[6] = -(a00 * (a12 * a33 - a13 * a32) -\n        a10 * (a02 * a33 - a03 * a32) +\n        a30 * (a02 * a13 - a03 * a12));\n    out[7] =\n        a00 * (a12 * a23 - a13 * a22) -\n            a10 * (a02 * a23 - a03 * a22) +\n            a20 * (a02 * a13 - a03 * a12);\n    out[8] =\n        a10 * (a21 * a33 - a23 * a31) -\n            a20 * (a11 * a33 - a13 * a31) +\n            a30 * (a11 * a23 - a13 * a21);\n    out[9] = -(a00 * (a21 * a33 - a23 * a31) -\n        a20 * (a01 * a33 - a03 * a31) +\n        a30 * (a01 * a23 - a03 * a21));\n    out[10] =\n        a00 * (a11 * a33 - a13 * a31) -\n            a10 * (a01 * a33 - a03 * a31) +\n            a30 * (a01 * a13 - a03 * a11);\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) -\n        a10 * (a01 * a23 - a03 * a21) +\n        a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) -\n        a20 * (a11 * a32 - a12 * a31) +\n        a30 * (a11 * a22 - a12 * a21));\n    out[13] =\n        a00 * (a21 * a32 - a22 * a31) -\n            a20 * (a01 * a32 - a02 * a31) +\n            a30 * (a01 * a22 - a02 * a21);\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) -\n        a10 * (a01 * a32 - a02 * a31) +\n        a30 * (a01 * a12 - a02 * a11));\n    out[15] =\n        a00 * (a11 * a22 - a12 * a21) -\n            a10 * (a01 * a22 - a02 * a21) +\n            a20 * (a01 * a12 - a02 * a11);\n    return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    var a30 = a[12];\n    var a31 = a[13];\n    var a32 = a[14];\n    var a33 = a[15];\n    var b00 = a00 * a11 - a01 * a10;\n    var b01 = a00 * a12 - a02 * a10;\n    var b02 = a00 * a13 - a03 * a10;\n    var b03 = a01 * a12 - a02 * a11;\n    var b04 = a01 * a13 - a03 * a11;\n    var b05 = a02 * a13 - a03 * a12;\n    var b06 = a20 * a31 - a21 * a30;\n    var b07 = a20 * a32 - a22 * a30;\n    var b08 = a20 * a33 - a23 * a30;\n    var b09 = a21 * a32 - a22 * a31;\n    var b10 = a21 * a33 - a23 * a31;\n    var b11 = a22 * a33 - a23 * a32;\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    var a30 = a[12];\n    var a31 = a[13];\n    var a32 = a[14];\n    var a33 = a[15];\n    // Cache only the current line of the second matrix\n    var b0 = b[0];\n    var b1 = b[1];\n    var b2 = b[2];\n    var b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport { multiply as mul };\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n    var x = v[0];\n    var y = v[1];\n    var z = v[2];\n    var a00;\n    var a01;\n    var a02;\n    var a03;\n    var a10;\n    var a11;\n    var a12;\n    var a13;\n    var a20;\n    var a21;\n    var a22;\n    var a23;\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    }\n    else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n */\nexport function scale(out, a, v) {\n    var x = v[0];\n    var y = v[1];\n    var z = v[2];\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n    var x = axis[0];\n    var y = axis[1];\n    var z = axis[2];\n    var len = Math.sqrt(x * x + y * y + z * z);\n    var s;\n    var c;\n    var t;\n    var a00;\n    var a01;\n    var a02;\n    var a03;\n    var a10;\n    var a11;\n    var a12;\n    var a13;\n    var a20;\n    var a21;\n    var a22;\n    var a23;\n    var b00;\n    var b01;\n    var b02;\n    var b10;\n    var b11;\n    var b12;\n    var b20;\n    var b21;\n    var b22;\n    if (Math.abs(len) < EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a20 = a[8];\n    var a21 = a[9];\n    var a22 = a[10];\n    var a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    var a00 = a[0];\n    var a01 = a[1];\n    var a02 = a[2];\n    var a03 = a[3];\n    var a10 = a[4];\n    var a11 = a[5];\n    var a12 = a[6];\n    var a13 = a[7];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n    var x = axis[0];\n    var y = axis[1];\n    var z = axis[2];\n    var len = Math.sqrt(x * x + y * y + z * z);\n    var s;\n    var c;\n    var t;\n    if (Math.abs(len) < EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = 0;\n    out[2] = -s;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    var x = q[0];\n    var y = q[1];\n    var z = q[2];\n    var w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n    return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n    var m11 = mat[0];\n    var m12 = mat[1];\n    var m13 = mat[2];\n    var m21 = mat[4];\n    var m22 = mat[5];\n    var m23 = mat[6];\n    var m31 = mat[8];\n    var m32 = mat[9];\n    var m33 = mat[10];\n    out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n    // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n    var trace = mat[0] + mat[5] + mat[10];\n    var S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out[3] = 0.25 * S;\n        out[0] = (mat[6] - mat[9]) / S;\n        out[1] = (mat[8] - mat[2]) / S;\n        out[2] = (mat[1] - mat[4]) / S;\n    }\n    else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n        S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n        out[3] = (mat[6] - mat[9]) / S;\n        out[0] = 0.25 * S;\n        out[1] = (mat[1] + mat[4]) / S;\n        out[2] = (mat[8] + mat[2]) / S;\n    }\n    else if (mat[5] > mat[10]) {\n        S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n        out[3] = (mat[8] - mat[2]) / S;\n        out[0] = (mat[1] + mat[4]) / S;\n        out[1] = 0.25 * S;\n        out[2] = (mat[6] + mat[9]) / S;\n    }\n    else {\n        S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n        out[3] = (mat[1] - mat[4]) / S;\n        out[0] = (mat[8] + mat[2]) / S;\n        out[1] = (mat[6] + mat[9]) / S;\n        out[2] = 0.25 * S;\n    }\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n    // Quaternion math\n    var x = q[0];\n    var y = q[1];\n    var z = q[2];\n    var w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    var sx = s[0];\n    var sy = s[1];\n    var sz = s[2];\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @param {vec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n    // Quaternion math\n    var x = q[0];\n    var y = q[1];\n    var z = q[2];\n    var w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    var sx = s[0];\n    var sy = s[1];\n    var sz = s[2];\n    var ox = o[0];\n    var oy = o[1];\n    var oz = o[2];\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\n    out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\n    out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\n    out[15] = 1;\n    return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n    var x = q[0];\n    var y = q[1];\n    var z = q[2];\n    var w = q[3];\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var yx = y * x2;\n    var yy = y * y2;\n    var zx = z * x2;\n    var zy = z * y2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left);\n    var tb = 1 / (top - bottom);\n    var nf = 1 / (near - far);\n    out[0] = near * 2 * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = near * 2 * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = far * near * 2 * nf;\n    out[15] = 0;\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2);\n    var nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 2 * far * near * nf;\n    out[15] = 0;\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n    var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n    var xScale = 2.0 / (leftTan + rightTan);\n    var yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right);\n    var bt = 1 / (bottom - top);\n    var nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n    var x0;\n    var x1;\n    var x2;\n    var y0;\n    var y1;\n    var y2;\n    var z0;\n    var z1;\n    var z2;\n    var len;\n    var eyex = eye[0];\n    var eyey = eye[1];\n    var eyez = eye[2];\n    var upx = up[0];\n    var upy = up[1];\n    var upz = up[2];\n    var centerx = center[0];\n    var centery = center[1];\n    var centerz = center[2];\n    if (Math.abs(eyex - centerx) < EPSILON &&\n        Math.abs(eyey - centery) < EPSILON &&\n        Math.abs(eyez - centerz) < EPSILON) {\n        return identity(out);\n    }\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    }\n    else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    }\n    else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n    return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n    return (\"mat4(\" +\n        a[0] +\n        \", \" +\n        a[1] +\n        \", \" +\n        a[2] +\n        \", \" +\n        a[3] +\n        \", \" +\n        a[4] +\n        \", \" +\n        a[5] +\n        \", \" +\n        a[6] +\n        \", \" +\n        a[7] +\n        \", \" +\n        a[8] +\n        \", \" +\n        a[9] +\n        \", \" +\n        a[10] +\n        \", \" +\n        a[11] +\n        \", \" +\n        a[12] +\n        \", \" +\n        a[13] +\n        \", \" +\n        a[14] +\n        \", \" +\n        a[15] +\n        \")\");\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n    return Math.sqrt(Math.pow(a[0], 2) +\n        Math.pow(a[1], 2) +\n        Math.pow(a[2], 2) +\n        Math.pow(a[3], 2) +\n        Math.pow(a[4], 2) +\n        Math.pow(a[5], 2) +\n        Math.pow(a[6], 2) +\n        Math.pow(a[7], 2) +\n        Math.pow(a[8], 2) +\n        Math.pow(a[9], 2) +\n        Math.pow(a[10], 2) +\n        Math.pow(a[11], 2) +\n        Math.pow(a[12], 2) +\n        Math.pow(a[13], 2) +\n        Math.pow(a[14], 2) +\n        Math.pow(a[15], 2));\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport { subtract as sub };\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @param {Number} s the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, s) {\n    out[0] = a[0] + b[0] * s;\n    out[1] = a[1] + b[1] * s;\n    out[2] = a[2] + b[2] * s;\n    out[3] = a[3] + b[3] * s;\n    out[4] = a[4] + b[4] * s;\n    out[5] = a[5] + b[5] * s;\n    out[6] = a[6] + b[6] * s;\n    out[7] = a[7] + b[7] * s;\n    out[8] = a[8] + b[8] * s;\n    out[9] = a[9] + b[9] * s;\n    out[10] = a[10] + b[10] * s;\n    out[11] = a[11] + b[11] * s;\n    out[12] = a[12] + b[12] * s;\n    out[13] = a[13] + b[13] * s;\n    out[14] = a[14] + b[14] * s;\n    out[15] = a[15] + b[15] * s;\n    return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return (a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[3] === b[3] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[7] === b[7] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10] &&\n        a[11] === b[11] &&\n        a[12] === b[12] &&\n        a[13] === b[13] &&\n        a[14] === b[14] &&\n        a[15] === b[15]);\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n    var a0 = a[0];\n    var a1 = a[1];\n    var a2 = a[2];\n    var a3 = a[3];\n    var a4 = a[4];\n    var a5 = a[5];\n    var a6 = a[6];\n    var a7 = a[7];\n    var a8 = a[8];\n    var a9 = a[9];\n    var a10 = a[10];\n    var a11 = a[11];\n    var a12 = a[12];\n    var a13 = a[13];\n    var a14 = a[14];\n    var a15 = a[15];\n    var b0 = b[0];\n    var b1 = b[1];\n    var b2 = b[2];\n    var b3 = b[3];\n    var b4 = b[4];\n    var b5 = b[5];\n    var b6 = b[6];\n    var b7 = b[7];\n    var b8 = b[8];\n    var b9 = b[9];\n    var b10 = b[10];\n    var b11 = b[11];\n    var b12 = b[12];\n    var b13 = b[13];\n    var b14 = b[14];\n    var b15 = b[15];\n    return (Math.abs(a0 - b0) <=\n        EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <=\n            EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <=\n            EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n        Math.abs(a3 - b3) <=\n            EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n        Math.abs(a4 - b4) <=\n            EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n        Math.abs(a5 - b5) <=\n            EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n        Math.abs(a6 - b6) <=\n            EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n        Math.abs(a7 - b7) <=\n            EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n        Math.abs(a8 - b8) <=\n            EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n        Math.abs(a9 - b9) <=\n            EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n        Math.abs(a10 - b10) <=\n            EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n        Math.abs(a11 - b11) <=\n            EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n        Math.abs(a12 - b12) <=\n            EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n        Math.abs(a13 - b13) <=\n            EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n        Math.abs(a14 - b14) <=\n            EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n        Math.abs(a15 - b15) <=\n            EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n}\n//# sourceMappingURL=mat4.js.map","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\nimport { EPSILON } from \"./common\";\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n    var out = new Float32Array(3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n    var out = new Float32Array(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n    var out = new Float32Array(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport { subtract as sub };\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport { multiply as mul };\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport { divide as div };\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n    out[0] = Math.round(a[0]);\n    out[1] = Math.round(a[1]);\n    out[2] = Math.round(a[2]);\n    return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} s the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, s) {\n    out[0] = a[0] + b[0] * s;\n    out[1] = a[1] + b[1] * s;\n    out[2] = a[2] + b[2] * s;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport { distance as dist };\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    var x = b[0] - a[0];\n    var y = b[1] - a[1];\n    var z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport { squaredDistance as sqrDist };\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport { length as len };\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport { squaredLength as sqrLen };\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var len = x * x + y * y + z * z;\n    if (len > 0) {\n        // TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    var bx = b[0];\n    var by = b[1];\n    var bz = b[2];\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n    var factorTimes2 = t * t;\n    var factor1 = factorTimes2 * (2 * t - 3) + 1;\n    var factor2 = factorTimes2 * (t - 2) + t;\n    var factor3 = factorTimes2 * (t - 1);\n    var factor4 = factorTimes2 * (3 - 2 * t);\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n    var inverseFactor = 1 - t;\n    var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n    var factorTimes2 = t * t;\n    var factor1 = inverseFactorTimesTwo * inverseFactor;\n    var factor2 = 3 * t * inverseFactorTimesTwo;\n    var factor3 = 3 * factorTimes2 * inverseFactor;\n    var factor4 = factorTimes2 * t;\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [s] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, s) {\n    if (s === void 0) { s = 1.0; }\n    var r = Math.random() * 2.0 * Math.PI;\n    var z = Math.random() * 2.0 - 1.0;\n    var zScale = Math.sqrt(1.0 - z * z) * s;\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * s;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n    var x = a[0];\n    var y = a[1];\n    var z = a[2];\n    var qx = q[0];\n    var qy = q[1];\n    var qz = q[2];\n    var qw = q[3];\n    // calculate quat * vec\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, c) {\n    var p = [];\n    var r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0];\n    r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n    r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, c) {\n    var p = [];\n    var r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n    r[1] = p[1];\n    r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, c) {\n    var p = [];\n    var r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n    r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n    r[2] = p[2];\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport function forEach(a, stride, offset, count, fn, arg) {\n    // TODO: pre-allocate?\n    var vec = create();\n    var i;\n    var l;\n    if (!stride) {\n        stride = 3;\n    }\n    if (!offset) {\n        offset = 0;\n    }\n    l = count ? Math.min(count * stride + offset, a.length) : a.length;\n    for (i = offset; i < l; i += stride) {\n        vec[0] = a[i];\n        vec[1] = a[i + 1];\n        vec[2] = a[i + 2];\n        fn(vec, vec, arg);\n        a[i] = vec[0];\n        a[i + 1] = vec[1];\n        a[i + 2] = vec[2];\n    }\n    return a;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n    var tempA = fromValues(a[0], a[1], a[2]);\n    var tempB = fromValues(b[0], b[1], b[2]);\n    normalize(tempA, tempA);\n    normalize(tempB, tempB);\n    var cosine = dot(tempA, tempB);\n    if (cosine > 1.0) {\n        return 0;\n    }\n    else if (cosine < -1.0) {\n        return Math.PI;\n    }\n    else {\n        return Math.acos(cosine);\n    }\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    var a0 = a[0];\n    var a1 = a[1];\n    var a2 = a[2];\n    var b0 = b[0];\n    var b1 = b[1];\n    var b2 = b[2];\n    return (Math.abs(a0 - b0) <=\n        EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <=\n            EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n}\n//# sourceMappingURL=vec3.js.map","import * as common from \"./common\";\nexport { common as glMatrix };\nimport * as mat3 from \"./mat3\";\nexport { mat3 };\nimport * as mat4 from \"./mat4\";\nexport { mat4 };\nimport * as vec3 from \"./vec3\";\nexport { vec3 };\nimport * as vec4 from \"./vec4\";\nexport { vec4 };\nimport * as quat from \"./quat\";\nexport { quat };\n//# sourceMappingURL=index.js.map","import Promise from '../shim/Promise';\nimport Map from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport {\n\tConstructor,\n\tInjectorFactory,\n\tInjectorItem,\n\tRegistryLabel,\n\tWidgetBaseConstructor,\n\tWidgetBaseInterface,\n\tESMDefaultWidgetBase,\n\tWidgetBaseConstructorFunction,\n\tESMDefaultWidgetBaseFunction,\n\tCallback,\n\tWNodeFactory,\n\tRenderResult,\n\tWidgetBaseTypes,\n\tDefaultChildrenWNodeFactory,\n\tOptionalWNodeFactory\n} from './interfaces';\n\nexport type RegistryItem =\n\t| WidgetBaseConstructor\n\t| WNodeFactory<any>\n\t| DefaultChildrenWNodeFactory<any>\n\t| OptionalWNodeFactory<any>\n\t| Promise<WidgetBaseConstructor | WNodeFactory<any>>\n\t| WidgetBaseConstructorFunction\n\t| ESMDefaultWidgetBaseFunction;\n\n/**\n * Widget base type\n */\nexport const WIDGET_BASE_TYPE = '__widget_base_type';\n\nexport interface RegistryEventObject extends EventObject<RegistryLabel> {\n\taction: string;\n\titem:\n\t\t| WNodeFactory<any>\n\t\t| DefaultChildrenWNodeFactory<any>\n\t\t| OptionalWNodeFactory<any>\n\t\t| WidgetBaseConstructor\n\t\t| InjectorItem;\n}\n/**\n * Widget Registry Interface\n */\nexport interface RegistryInterface {\n\t/**\n\t * Define a WidgetRegistryItem against a label\n\t *\n\t * @param label The label of the widget to register\n\t * @param registryItem The registry item to define\n\t */\n\tdefine(label: RegistryLabel, registryItem: RegistryItem): void;\n\n\t/**\n\t * Return a RegistryItem for the given label, null if an entry doesn't exist\n\t *\n\t * @param widgetLabel The label of the widget to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tget(label: RegistryLabel): WNodeFactory<any> | Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tget<T extends WNodeFactory<any>>(label: RegistryLabel): T | null;\n\tget<T extends Callback<any, any, any, RenderResult>>(label: RegistryLabel): T | null;\n\tget<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\n\t/**\n\t * Returns a boolean if an entry for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a widget registry item exists\n\t */\n\thas(label: RegistryLabel): boolean;\n\n\t/**\n\t * Define an Injector against a label\n\t *\n\t * @param label The label of the injector to register\n\t * @param registryItem The injector factory\n\t */\n\tdefineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void;\n\n\t/**\n\t * Return an Injector registry item for the given label, null if an entry doesn't exist\n\t *\n\t * @param label The label of the injector to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tgetInjector<T>(label: RegistryLabel): InjectorItem<T> | null;\n\n\t/**\n\t * Returns a boolean if an injector for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a injector registry item exists\n\t */\n\thasInjector(label: RegistryLabel): boolean;\n}\n\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nexport function isWidgetBaseConstructor<T extends WidgetBaseInterface = any>(item: any): item is Constructor<T> {\n\treturn Boolean(item && item._type === WIDGET_BASE_TYPE);\n}\n\nexport function isWidgetFunction(item: any): item is Callback<any, any, any, RenderResult> {\n\treturn Boolean(item && item.isWidget);\n}\n\nexport function isWNodeFactory<W extends WidgetBaseTypes>(node: any): node is WNodeFactory<W> {\n\tif (typeof node === 'function' && node.isFactory) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isWidget<T extends WidgetBaseInterface = any>(\n\titem: any\n): item is Constructor<T> | Callback<any, any, any, RenderResult> {\n\treturn isWidgetBaseConstructor(item) || isWidgetFunction(item);\n}\n\nexport function isWidgetConstructorDefaultExport<T extends WidgetBaseTypes>(\n\titem: any\n): item is ESMDefaultWidgetBase<T> {\n\treturn Boolean(\n\t\titem &&\n\t\t\titem.hasOwnProperty('__esModule') &&\n\t\t\titem.hasOwnProperty('default') &&\n\t\t\t(isWidget(item.default) || isWNodeFactory(item.default))\n\t);\n}\n\n/**\n * The Registry implementation\n */\nexport class Registry extends Evented<{}, RegistryLabel, RegistryEventObject> implements RegistryInterface {\n\t/**\n\t * internal map of labels and RegistryItem\n\t */\n\tprivate _widgetRegistry: Map<RegistryLabel, RegistryItem> | undefined;\n\n\tprivate _injectorRegistry: Map<RegistryLabel, InjectorItem> | undefined;\n\n\t/**\n\t * Emit loaded event for registry label\n\t */\n\tprivate emitLoadedEvent(\n\t\twidgetLabel: RegistryLabel,\n\t\titem:\n\t\t\t| DefaultChildrenWNodeFactory<any>\n\t\t\t| OptionalWNodeFactory<any>\n\t\t\t| WNodeFactory<any>\n\t\t\t| WidgetBaseConstructor\n\t\t\t| InjectorItem\n\t): void {\n\t\tthis.emit({\n\t\t\ttype: widgetLabel,\n\t\t\taction: 'loaded',\n\t\t\titem\n\t\t});\n\t}\n\n\tpublic define(label: RegistryLabel, item: RegistryItem): void {\n\t\tif (this._widgetRegistry === undefined) {\n\t\t\tthis._widgetRegistry = new Map();\n\t\t}\n\n\t\tif (this._widgetRegistry.has(label)) {\n\t\t\tthrow new Error(`widget has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tthis._widgetRegistry.set(label, item);\n\n\t\tif (item instanceof Promise) {\n\t\t\titem.then(\n\t\t\t\t(widgetCtor) => {\n\t\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\t\treturn widgetCtor;\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (isWidgetBaseConstructor(item)) {\n\t\t\tthis.emitLoadedEvent(label, item);\n\t\t}\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void {\n\t\tif (this._injectorRegistry === undefined) {\n\t\t\tthis._injectorRegistry = new Map();\n\t\t}\n\n\t\tif (this._injectorRegistry.has(label)) {\n\t\t\tthrow new Error(`injector has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tconst invalidator = new Evented();\n\n\t\tconst injectorItem: InjectorItem = {\n\t\t\tinjector: injectorFactory(() => invalidator.emit({ type: 'invalidate' })),\n\t\t\tinvalidator\n\t\t};\n\n\t\tthis._injectorRegistry.set(label, injectorItem);\n\t\tthis.emitLoadedEvent(label, injectorItem);\n\t}\n\n\tpublic get(\n\t\tlabel: RegistryLabel\n\t): WNodeFactory<any> | Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tpublic get<T extends WNodeFactory<any>>(label: RegistryLabel): T | null;\n\tpublic get<T extends Callback<any, any, any, RenderResult>>(label: RegistryLabel): T | null;\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(\n\t\tlabel: RegistryLabel\n\t): WNodeFactory<T> | Callback<any, any, any, RenderResult> | Constructor<T> | null {\n\t\tif (!this._widgetRegistry || !this.has(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = this._widgetRegistry.get(label);\n\n\t\tif (isWidget<T>(item) || isWNodeFactory(item)) {\n\t\t\treturn item as any;\n\t\t}\n\n\t\tif (item instanceof Promise) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst promise = (<WidgetBaseConstructorFunction>item)();\n\t\tthis._widgetRegistry.set(label, promise);\n\n\t\tpromise.then(\n\t\t\t(widgetCtor: any) => {\n\t\t\t\tif (isWidgetConstructorDefaultExport<T>(widgetCtor)) {\n\t\t\t\t\twidgetCtor = widgetCtor.default;\n\t\t\t\t}\n\n\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\treturn widgetCtor;\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t);\n\n\t\treturn null;\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel): InjectorItem<T> | null {\n\t\tif (!this._injectorRegistry || !this.hasInjector(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._injectorRegistry.get(label)!;\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._widgetRegistry && this._widgetRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._injectorRegistry && this._injectorRegistry.has(label));\n\t}\n}\n\nexport default Registry;\n","import { create, getRegistry, invalidator, destroy } from '../vdom';\nimport { RegistryLabel } from '../interfaces';\nimport { Handle } from '../Destroyable';\n\nconst injectorFactory = create({ getRegistry, invalidator, destroy });\n\nexport const injector = injectorFactory(({ middleware: { getRegistry, invalidator, destroy } }) => {\n\tconst handles: Handle[] = [];\n\tdestroy(() => {\n\t\tlet handle: Handle | undefined;\n\t\twhile ((handle = handles.pop())) {\n\t\t\thandle.destroy();\n\t\t}\n\t});\n\tconst registry = getRegistry();\n\treturn {\n\t\tsubscribe(label: RegistryLabel, callback: Function = invalidator) {\n\t\t\tif (registry) {\n\t\t\t\tconst item = registry.getInjector(label);\n\t\t\t\tif (item) {\n\t\t\t\t\tconst handle = item.invalidator.on('invalidate', () => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t});\n\t\t\t\t\thandles.push(handle);\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tconst index = handles.indexOf(handle);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\thandles.splice(index, 1);\n\t\t\t\t\t\t\thandle.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tget<T>(label: RegistryLabel): T | null {\n\t\t\tif (registry) {\n\t\t\t\tconst item = registry.getInjector<T>(label);\n\t\t\t\tif (item) {\n\t\t\t\t\treturn item.injector();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n});\n\nexport default injector;\n","import { Destroyable } from '../../core/Destroyable';\nimport Set from '../../shim/Set';\nimport { WidgetMetaBase, WidgetMetaProperties, NodeHandlerInterface, WidgetBaseInterface } from '../interfaces';\n\nexport class Base extends Destroyable implements WidgetMetaBase {\n\tprivate _invalidate: () => void;\n\tprotected nodeHandler: NodeHandlerInterface;\n\n\tprivate _requestedNodeKeys = new Set<string | number>();\n\n\tprotected _bind: WidgetBaseInterface | undefined;\n\n\tconstructor(properties: WidgetMetaProperties) {\n\t\tsuper();\n\n\t\tthis._invalidate = properties.invalidate;\n\t\tthis.nodeHandler = properties.nodeHandler;\n\t\tif (properties.bind) {\n\t\t\tthis._bind = properties.bind;\n\t\t}\n\t}\n\n\tpublic has(key: string | number): boolean {\n\t\treturn this.nodeHandler.has(key);\n\t}\n\n\tprotected getNode(key: string | number): Element | undefined {\n\t\tconst stringKey = `${key}`;\n\t\tconst node = this.nodeHandler.get(stringKey);\n\n\t\tif (!node && !this._requestedNodeKeys.has(stringKey)) {\n\t\t\tconst handle = this.nodeHandler.on(stringKey, () => {\n\t\t\t\thandle.destroy();\n\t\t\t\tthis._requestedNodeKeys.delete(stringKey);\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\n\t\t\tthis.own(handle);\n\t\t\tthis._requestedNodeKeys.add(stringKey);\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tprotected invalidate(): void {\n\t\tthis._invalidate();\n\t}\n\n\tpublic afterRender(): void {\n\t\t// Do nothing by default.\n\t}\n}\n\nexport default Base;\n","import global from './global';\nimport has from '../core/has';\n`!has('build-elide')`;\nimport * as Resize from 'resize-observer-polyfill';\nimport wrapper from './util/wrapper';\n\nexport interface DOMRectReadOnly {\n\treadonly x: number;\n\treadonly y: number;\n\treadonly width: number;\n\treadonly height: number;\n\treadonly top: number;\n\treadonly right: number;\n\treadonly bottom: number;\n\treadonly left: number;\n}\n\nexport interface ResizeObserverCallback {\n\t(entries: ResizeObserverEntry[], observer: ResizeObserver): void;\n}\n\nexport interface ResizeObserverEntry {\n\treadonly target: Element;\n\treadonly contentRect: DOMRectReadOnly;\n}\n\nexport interface ResizeObserver {\n\tobserve(target: Element): void;\n\tunobserve(target: Element): void;\n\tdisconnect(): void;\n}\n\ndeclare var ResizeObserver: {\n\tprototype: ResizeObserver;\n\tnew (callback: ResizeObserverCallback): ResizeObserver;\n};\n\nif (!has('build-elide')) {\n\tif (!global.ResizeObserver) {\n\t\t// default is undefined when UMD module is used\n\t\tglobal.ResizeObserver = Resize.default || Resize;\n\t}\n}\n\nexport default wrapper('ResizeObserver', true) as typeof ResizeObserver;\n","import { Base } from './Base';\nimport Map from '../../shim/Map';\nimport ResizeObserver from '../../shim/ResizeObserver';\n\nexport interface ContentRect {\n\treadonly bottom: number;\n\treadonly height: number;\n\treadonly left: number;\n\treadonly right: number;\n\treadonly top: number;\n\treadonly width: number;\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface PredicateFunction {\n\t(contentRect: ContentRect): boolean;\n}\n\nexport interface PredicateFunctions {\n\t[id: string]: PredicateFunction;\n}\n\nexport type PredicateResponses<T = PredicateFunctions> = { [id in keyof T]: boolean };\n\nexport class Resize extends Base {\n\tprivate _details = new Map<string | number, PredicateResponses>();\n\n\tpublic get<T extends PredicateFunctions>(\n\t\tkey: string | number,\n\t\tpredicates = {} as PredicateFunctions\n\t): PredicateResponses<T> {\n\t\tconst node = this.getNode(key);\n\n\t\tif (!node) {\n\t\t\tconst defaultResponse: PredicateResponses = {};\n\t\t\tfor (let predicateId in predicates) {\n\t\t\t\tdefaultResponse[predicateId] = false;\n\t\t\t}\n\t\t\treturn defaultResponse as PredicateResponses<T>;\n\t\t}\n\n\t\tif (!this._details.has(key)) {\n\t\t\tthis._details.set(key, {});\n\t\t\tconst resizeObserver = new ResizeObserver(([entry]) => {\n\t\t\t\tlet predicateChanged = false;\n\t\t\t\tif (Object.keys(predicates).length) {\n\t\t\t\t\tconst { contentRect } = entry;\n\t\t\t\t\tconst previousDetails = this._details.get(key);\n\t\t\t\t\tlet predicateResponses: PredicateResponses = {};\n\n\t\t\t\t\tfor (let predicateId in predicates) {\n\t\t\t\t\t\tconst response = predicates[predicateId](contentRect);\n\t\t\t\t\t\tpredicateResponses[predicateId] = response;\n\t\t\t\t\t\tif (!predicateChanged && response !== previousDetails![predicateId]) {\n\t\t\t\t\t\t\tpredicateChanged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._details.set(key, predicateResponses);\n\t\t\t\t} else {\n\t\t\t\t\tpredicateChanged = true;\n\t\t\t\t}\n\t\t\t\tpredicateChanged && this.invalidate();\n\t\t\t});\n\t\t\tresizeObserver.observe(node);\n\t\t\tthis.own({\n\t\t\t\tdestroy: () => {\n\t\t\t\t\tresizeObserver.disconnect();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this._details.get(key) as PredicateResponses<T>;\n\t}\n}\n\nexport default Resize;\n","import FragmentShader from \"./FragmentShader\";\nimport VertexShader from \"./VertexShader\";\n\nexport default class Program {\n    private readonly gl: WebGL2RenderingContext;\n    private readonly program: WebGLProgram;\n\n    constructor(gl: WebGL2RenderingContext, fragmentShader: FragmentShader, vertexShader: VertexShader) {\n        this.gl = gl;\n        this.program = Program.doLink(gl, fragmentShader.get(gl), vertexShader.get(gl));\n    }\n\n    public get(): WebGLProgram {\n        const { program } = this;\n        return program;\n    }\n\n    public attribute(name: string): number {\n        const { gl, program } = this;\n        const attribLocation = gl.getAttribLocation(program, name);\n        gl.enableVertexAttribArray(attribLocation);\n        return attribLocation;\n    }\n\n    public uniform(name: string): WebGLUniformLocation {\n        const { gl, program } = this;\n        return gl.getUniformLocation(program, name) as WebGLUniformLocation;\n    }\n\n    private static doLink(\n        gl: WebGL2RenderingContext,\n        fragmentShader: WebGLShader,\n        vertexShader: WebGLShader,\n    ): WebGLProgram {\n        const program: WebGLProgram = gl.createProgram() as WebGLProgram;\n        gl.attachShader(program, fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.linkProgram(program);\n        const programInfoLog = gl.getProgramInfoLog(program);\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n            throw new Error(`LINK: ${programInfoLog}`);\n        }\n        // window.console.log('LINK', program, programInfoLog);\n        return program;\n    }\n}\n","export default abstract class Shader {\n    private readonly _source: string;\n    private _compiled?: WebGLShader;\n\n    constructor(source: string) {\n        this._source = source;\n    }\n\n    protected abstract shaderType(): GLenum;\n\n    public get(gl: WebGL2RenderingContext): WebGLShader {\n        if (!this._compiled) {\n            this._compiled = Shader.doCompile(gl, this.shaderType(), this._source);\n        }\n        return this._compiled as WebGLShader;\n    }\n\n    private static doCompile(gl: WebGL2RenderingContext, type: GLenum, source: string): WebGLShader {\n        const shader: WebGLShader = gl.createShader(type) as WebGLShader;\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const shaderInfoLog = gl.getShaderInfoLog(shader);\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            throw new Error(`COMPILE: ${shaderInfoLog}`);\n        }\n        // window.console.log('COMPILE', shader, type, source, shaderInfoLog);\n        return shader;\n    }\n}\n","import Shader from \"./Shader\";\n\nexport default class FragmentShader extends Shader {\n    public shaderType(): GLenum {\n        return WebGL2RenderingContext.FRAGMENT_SHADER;\n    }\n}\n","import Shader from \"./Shader\";\n\nexport default class VertexShader extends Shader {\n    public shaderType(): GLenum {\n        return WebGL2RenderingContext.VERTEX_SHADER;\n    }\n}\n","import {\n    DNode,\n    KeyboardEventHandler,\n    MouseEventHandler,\n    MouseWheelEventHandler,\n} from \"@dojo/framework/core/interfaces\";\nimport { tsx } from \"@dojo/framework/core/vdom\";\n\nimport Base from \"@dojo/framework/core/meta/Base\";\nimport Resize, { ContentRect } from \"@dojo/framework/core/meta/Resize\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport { mat4, vec3 } from \"gl-matrix-ts\";\n\nimport Program from \"../Program\";\nimport FragmentShader from \"../FragmentShader\";\nimport VertexShader from \"../VertexShader\";\nimport * as css from \"./glPanel.m.css\";\n\nexport function radians(degrees: number): number {\n    return degrees / (Math.PI / 180.0);\n}\n\nclass DomNodeMeta extends Base {\n    public get<T extends HTMLElement>(key: string | number): T {\n        return this.getNode(key) as T;\n    }\n}\n\nexport interface GLPanelProperties {\n    fragmentSource: string;\n    vertexSource: string;\n    data?: object;\n    onGLReady: (glContext: GLPanel, data?: object) => void;\n}\n\nexport default class GLPanel extends WidgetBase<GLPanelProperties> {\n    public readonly modelViewMatrix: Float32Array;\n    public readonly projectionMatrix: Float32Array;\n    public readonly reverseLightDirection: Float32Array;\n    private _canvas!: HTMLCanvasElement;\n    private _gl!: WebGL2RenderingContext;\n    private _program!: Program;\n\n    constructor() {\n        super();\n        this.modelViewMatrix = mat4.create();\n        this.projectionMatrix = mat4.create();\n        this.reverseLightDirection = vec3.fromValues(1.0, 1.0, 2.0);\n        vec3.normalize(this.reverseLightDirection, this.reverseLightDirection);\n    }\n\n    protected onAttach(): void {\n        this._canvas = this.meta(DomNodeMeta).get<HTMLCanvasElement>(\"canvas\");\n        this._gl = GLPanel.createWebGLContext(this._canvas);\n        const { fragmentSource, vertexSource, data, onGLReady } = this.properties;\n        this._program = new Program(this._gl, new FragmentShader(fragmentSource), new VertexShader(vertexSource));\n        onGLReady(this, data);\n    }\n\n    private onResize(contentRect: ContentRect): boolean {\n        const { height: displayHeight, width: displayWidth } = contentRect;\n        const { height: canvasHeight, width: canvasWidth } = this._canvas;\n        const resized = canvasWidth !== displayWidth || canvasHeight !== displayHeight;\n        if (this._canvas && this._gl && resized) {\n            // window.console.log(`Setting viewport to ${displayWidth}x${displayHeight}`);\n            this._canvas.height = displayHeight;\n            this._canvas.width = displayWidth;\n            this._gl.viewport(0, 0, this._gl.drawingBufferWidth, this._gl.drawingBufferHeight);\n            mat4.perspective(\n                this.projectionMatrix,\n                radians(75),\n                this._canvas.clientWidth / this._canvas.clientHeight,\n                0.1,\n                1000.0,\n            );\n            this.invalidate();\n        }\n        return resized;\n    }\n\n    public registerEventHandler(\n        type: string,\n        handler: KeyboardEventHandler | MouseEventHandler | MouseWheelEventHandler,\n        options?: boolean | AddEventListenerOptions,\n    ): void {\n        this._canvas.addEventListener(type, handler as EventListener, options);\n    }\n\n    protected render(): DNode {\n        this.meta(Resize).get(\"root\", {\n            resized: this.onResize,\n        });\n        return (\n            <div key={\"root\"} classes={[css.root]}>\n                <canvas key={\"canvas\"} classes={[css.canvas]} focus={true} tabIndex={0} />\n            </div>\n        );\n    }\n\n    protected onDetach(): void {\n        // window.console.log(\"DEBUG:onDetach()\");\n        this.destroyWebGLContext();\n    }\n\n    protected destroy(): void {\n        // window.console.log(\"DEBUG:destroy()\");\n        this.destroyWebGLContext();\n    }\n\n    get canvas(): HTMLCanvasElement {\n        return this._canvas;\n    }\n\n    get gl(): WebGL2RenderingContext {\n        return this._gl;\n    }\n\n    get program(): Program {\n        return this._program;\n    }\n\n    get isReady(): boolean {\n        return !!this._gl;\n    }\n\n    private static createWebGLContext(canvas: HTMLCanvasElement): WebGL2RenderingContext {\n        let gl: WebGL2RenderingContext | null = null;\n        let msg: string | null = null;\n        try {\n            gl = canvas.getContext(\"webgl2\") as WebGL2RenderingContext;\n        } catch (e) {\n            msg = e.toString();\n        }\n        if (!gl) {\n            throw new Error(msg || \"Your browser does not support WebGL2\");\n        }\n        // window.console.log(new Info(gl));\n        return gl;\n    }\n\n    private destroyWebGLContext(): void {\n        const gl = this._gl;\n        try {\n            if (gl) {\n                if (this._program) {\n                    gl.deleteProgram(this._program);\n                    delete this._program;\n                }\n                const extension = gl.getExtension(\"WEBGL_lose_context\");\n                if (extension) {\n                    extension.loseContext();\n                }\n                delete this._gl;\n            }\n            delete this._canvas;\n        } catch (e) {}\n    }\n}\n","import global from './global';\n`!has('es6-iterator')`;\nimport { isArrayLike, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface Set<T> {\n\t/**\n\t * Adds a `value` to the `Set`\n\t *\n\t * @param value The value to add to the set\n\t * @returns The instance of the `Set`\n\t */\n\tadd(value: T): this;\n\n\t/**\n\t * Removes all the values from the `Set`.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Removes a `value` from the set\n\t *\n\t * @param value The value to be removed\n\t * @returns `true` if the value was removed\n\t */\n\tdelete(value: T): boolean;\n\n\t/**\n\t * Returns an iterator that yields each entry.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[T, T]>;\n\n\t/**\n\t * Executes a given function for each set entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated `Set` instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: T, value2: T, set: Set<T>) => void, thisArg?: any): void;\n\n\t/**\n\t * Identifies if a value is part of the set.\n\t *\n\t * @param value The value to check\n\t * @returns `true` if the value is part of the set otherwise `false`\n\t */\n\thas(value: T): boolean;\n\n\t/**\n\t * Despite its name, returns an iterable of the values in the set,\n\t */\n\tkeys(): IterableIterator<T>;\n\n\t/**\n\t * Returns the number of values in the `Set`.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterable of values in the set.\n\t */\n\tvalues(): IterableIterator<T>;\n\n\t/** Iterates over values in the set. */\n\t[Symbol.iterator](): IterableIterator<T>;\n\n\treadonly [Symbol.toStringTag]: 'Set';\n}\n\nexport interface SetConstructor {\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t */\n\tnew (): Set<any>;\n\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t *\n\t * @param iterator The iterable structure to initialize the set with\n\t */\n\tnew <T>(iterator?: T[]): Set<T>;\n\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t *\n\t * @param iterator The iterable structure to initialize the set with\n\t */\n\tnew <T>(iterator: Iterable<T>): Set<T>;\n\n\treadonly prototype: Set<any>;\n}\n\nexport let Set: SetConstructor = global.Set;\n\nif (!has('es6-set')) {\n\tSet = global.Set = class Set<T> {\n\t\tprivate readonly _setData: T[] = [];\n\n\t\tstatic [Symbol.species] = Set;\n\n\t\tconstructor(iterable?: ArrayLike<T> | Iterable<T>) {\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tthis.add(iterable[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\t\tthis.add(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tadd(value: T): this {\n\t\t\tif (this.has(value)) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis._setData.push(value);\n\t\t\treturn this;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._setData.length = 0;\n\t\t}\n\n\t\tdelete(value: T): boolean {\n\t\t\tconst idx = this._setData.indexOf(value);\n\t\t\tif (idx === -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._setData.splice(idx, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[T, T]> {\n\t\t\treturn new ShimIterator<[any, any]>(this._setData.map<[any, any]>((value) => [value, value]));\n\t\t}\n\n\t\tforEach(callbackfn: (value: T, index: T, set: Set<T>) => void, thisArg?: any): void {\n\t\t\tconst iterator = this.values();\n\t\t\tlet result = iterator.next();\n\t\t\twhile (!result.done) {\n\t\t\t\tcallbackfn.call(thisArg, result.value, result.value, this);\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t}\n\n\t\thas(value: T): boolean {\n\t\t\treturn this._setData.indexOf(value) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._setData.length;\n\t\t}\n\n\t\tvalues(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Set' = 'Set';\n\t};\n}\n\nexport default Set;\n","import global from './global';\n`!has('es6-iterator')`;\nimport { isArrayLike, Iterable } from './iterator';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface WeakMap<K extends object, V> {\n\t/**\n\t * Remove a `key` from the map\n\t *\n\t * @param key The key to remove\n\t * @return `true` if the value was removed, otherwise `false`\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Retrieve the value, based on the supplied `key`\n\t *\n\t * @param key The key to retrieve the `value` for\n\t * @return the `value` based on the `key` if found, otherwise `false`\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Determines if a `key` is present in the map\n\t *\n\t * @param key The `key` to check\n\t * @return `true` if the key is part of the map, otherwise `false`.\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Set a `value` for a particular `key`.\n\t *\n\t * @param key The `key` to set the `value` for\n\t * @param value The `value` to set\n\t * @return the instances\n\t */\n\tset(key: K, value: V): this;\n\n\treadonly [Symbol.toStringTag]: 'WeakMap';\n}\n\nexport interface WeakMapConstructor {\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t */\n\tnew (): WeakMap<object, any>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable?: [K, V][]): WeakMap<K, V>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable: Iterable<[K, V]>): WeakMap<K, V>;\n\n\treadonly prototype: WeakMap<object, any>;\n}\n\nexport let WeakMap: WeakMapConstructor = global.WeakMap;\n\ninterface Entry<K, V> {\n\tkey: K;\n\tvalue: V;\n}\n\nif (!has('es6-weakmap')) {\n\tconst DELETED: any = {};\n\n\tconst getUID = function getUID(): number {\n\t\treturn Math.floor(Math.random() * 100000000);\n\t};\n\n\tconst generateName = (function() {\n\t\tlet startId = Math.floor(Date.now() % 100000000);\n\n\t\treturn function generateName(): string {\n\t\t\treturn '__wm' + getUID() + (startId++ + '__');\n\t\t};\n\t})();\n\n\tWeakMap = global.WeakMap = class WeakMap<K, V> {\n\t\tprivate readonly _name: string;\n\t\tprivate readonly _frozenEntries: Entry<K, V>[];\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tthis._name = generateName();\n\n\t\t\tthis._frozenEntries = [];\n\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst item = iterable[i];\n\t\t\t\t\t\tthis.set(item[0], item[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const [key, value] of iterable) {\n\t\t\t\t\t\tthis.set(key, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate _getFrozenEntryIndex(key: any): number {\n\t\t\tfor (let i = 0; i < this._frozenEntries.length; i++) {\n\t\t\t\tif (this._frozenEntries[i].key === key) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tdelete(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\tentry.value = DELETED;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\tthis._frozenEntries.splice(frozenIndex, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tget(key: any): V | undefined {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\treturn entry.value;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn this._frozenEntries[frozenIndex].value;\n\t\t\t}\n\t\t}\n\n\t\thas(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tset(key: any, value?: any): this {\n\t\t\tif (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n\t\t\t\tthrow new TypeError('Invalid value used as weak map key');\n\t\t\t}\n\t\t\tlet entry: Entry<K, V> = key[this._name];\n\t\t\tif (!entry || entry.key !== key) {\n\t\t\t\tentry = Object.create(null, {\n\t\t\t\t\tkey: { value: key }\n\t\t\t\t});\n\n\t\t\t\tif (Object.isFrozen(key)) {\n\t\t\t\t\tthis._frozenEntries.push(entry);\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(key, this._name, {\n\t\t\t\t\t\tvalue: entry\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry.value = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'WeakMap' = 'WeakMap';\n\t};\n}\n\nexport default WeakMap;\n","import { PropertyChangeRecord } from './interfaces';\nimport { WIDGET_BASE_TYPE } from './Registry';\n\nfunction isObjectOrArray(value: any): boolean {\n\treturn Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\n\nexport function always(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: true,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function ignore(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: false,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function reference(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: previousProperty !== newProperty,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function shallow(previousProperty: any, newProperty: any, depth = 0): PropertyChangeRecord {\n\tlet changed = false;\n\n\tconst validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n\tconst validNewProperty = newProperty && isObjectOrArray(newProperty);\n\n\tif (!validOldProperty || !validNewProperty) {\n\t\treturn {\n\t\t\tchanged: true,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\n\tconst previousKeys = Object.keys(previousProperty);\n\tconst newKeys = Object.keys(newProperty);\n\n\tif (previousKeys.length !== newKeys.length) {\n\t\tchanged = true;\n\t} else {\n\t\tchanged = newKeys.some((key) => {\n\t\t\tif (depth > 0) {\n\t\t\t\treturn auto(newProperty[key], previousProperty[key], depth - 1).changed;\n\t\t\t}\n\t\t\treturn newProperty[key] !== previousProperty[key];\n\t\t});\n\t}\n\treturn {\n\t\tchanged,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function auto(previousProperty: any, newProperty: any, depth = 0): PropertyChangeRecord {\n\tlet result;\n\tif (typeof newProperty === 'function') {\n\t\tif (newProperty._type === WIDGET_BASE_TYPE) {\n\t\t\tresult = reference(previousProperty, newProperty);\n\t\t} else {\n\t\t\tresult = ignore(previousProperty, newProperty);\n\t\t}\n\t} else if (isObjectOrArray(newProperty)) {\n\t\tresult = shallow(previousProperty, newProperty, depth);\n\t} else {\n\t\tresult = reference(previousProperty, newProperty);\n\t}\n\treturn result;\n}\n","/* tslint:disable:interface-name */\nimport Map from '../../shim/Map';\nimport { create, invalidator, destroy } from '../vdom';\n\nconst factory = create({ invalidator, destroy });\n\ninterface CacheWrapper {\n\tstatus: 'pending' | 'resolved';\n\tvalue: any;\n}\n\nexport interface ICacheResult<S = void> {\n\tgetOrSet: {\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? () => Promise<T> : () => Promise<S[T]>,\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? undefined | T : undefined | S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? () => T : () => S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? T : S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t};\n\tget<T extends void extends S ? any : keyof S>(\n\t\tkey: void extends S ? any : T\n\t): void extends S ? T | undefined : S[T] | undefined;\n\tset: {\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? (value: T | undefined) => Promise<T> : (value: S[T] | undefined) => Promise<S[T]>,\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T | undefined : S[T] | undefined;\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? (value: T | undefined) => T : (value: S[T] | undefined) => S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? T : S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t};\n\thas<T extends void extends S ? any : keyof S>(key: void extends S ? any : T): boolean;\n\tdelete<T extends void extends S ? any : keyof S>(key: void extends S ? any : T, invalidate?: boolean): void;\n\tclear(invalidate?: boolean): void;\n}\n\nexport function createICacheMiddleware<S = void>() {\n\tconst icache = factory(\n\t\t({ middleware: { invalidator, destroy } }): ICacheResult<S> => {\n\t\t\tconst cacheMap = new Map<string, CacheWrapper>();\n\t\t\tdestroy(() => {\n\t\t\t\tcacheMap.clear();\n\t\t\t});\n\n\t\t\tconst api: any = {\n\t\t\t\tget: (key: any): any => {\n\t\t\t\t\tconst cachedValue = cacheMap.get(key);\n\t\t\t\t\tif (!cachedValue || cachedValue.status === 'pending') {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn cachedValue.value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tapi.set = (key: any, value: any, invalidate: boolean = true): any => {\n\t\t\t\tconst current = api.get(key);\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\tvalue = value(current);\n\t\t\t\t\tif (value && typeof value.then === 'function') {\n\t\t\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\t\t\tstatus: 'pending',\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvalue.then((result: any) => {\n\t\t\t\t\t\t\tconst cachedValue = cacheMap.get(key);\n\t\t\t\t\t\t\tif (cachedValue && cachedValue.value === value) {\n\t\t\t\t\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\t\t\t\t\tstatus: 'resolved',\n\t\t\t\t\t\t\t\t\tvalue: result\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tinvalidate && invalidator();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\tstatus: 'resolved',\n\t\t\t\t\tvalue\n\t\t\t\t});\n\t\t\t\tinvalidate && invalidator();\n\t\t\t\treturn value;\n\t\t\t};\n\t\t\tapi.has = (key: any) => {\n\t\t\t\treturn cacheMap.has(key);\n\t\t\t};\n\t\t\tapi.delete = (key: any, invalidate: boolean = true) => {\n\t\t\t\tcacheMap.delete(key);\n\t\t\t\tinvalidate && invalidator();\n\t\t\t};\n\t\t\tapi.clear = (invalidate: boolean = true): void => {\n\t\t\t\tcacheMap.clear();\n\t\t\t\tinvalidate && invalidator();\n\t\t\t};\n\t\t\tapi.getOrSet = (key: any, value: any, invalidate: boolean = true): any | undefined => {\n\t\t\t\tlet cachedValue = cacheMap.get(key);\n\t\t\t\tif (!cachedValue) {\n\t\t\t\t\tapi.set(key, value, invalidate);\n\t\t\t\t}\n\t\t\t\tcachedValue = cacheMap.get(key);\n\t\t\t\tif (!cachedValue || cachedValue.status === 'pending') {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn cachedValue.value;\n\t\t\t};\n\t\t\treturn api;\n\t\t}\n\t);\n\treturn icache;\n}\n\nexport const icache = createICacheMiddleware();\n\nexport default icache;\n","import { createCommandFactory } from \"@dojo/framework/stores/process\";\nimport Store from \"@dojo/framework/stores/Store\";\nimport State from \"../interfaces\";\n\nexport const store = new Store<State>();\nexport const createCommand = createCommandFactory<State>();\n","import { isThenable } from '../shim/Promise';\nimport { PatchOperation } from './state/Patch';\nimport { replace, remove } from './state/operations';\nimport { Path, State, Store } from './Store';\nimport Map from '../shim/Map';\nimport has from '../core/has';\n\n/**\n * Default Payload interface\n */\nexport interface DefaultPayload {\n\t[index: string]: any;\n}\n\n/**\n * The arguments passed to a `Command`\n */\nexport interface CommandRequest<T = any, P extends object = DefaultPayload> extends State<T> {\n\tpayload: P;\n\tstate: T;\n}\n\n/**\n * A command factory interface. Returns the passed command. This provides a way to automatically infer and/or\n * verify the type of multiple commands without explicitly specifying the generic for each command\n */\nexport interface CommandFactory<T = any, P extends object = DefaultPayload> {\n\t<R extends object = P>(command: AsyncCommandWithOps<T, R>): AsyncCommandWithOps<T, R>;\n\t<R extends object = P>(command: SyncCommandWithOps<T, R>): SyncCommandWithOps<T, R>;\n\t<R extends object = P>(command: AsyncCommand<T, R>): AsyncCommand<T, R>;\n\t<R extends object = P>(command: SyncCommand<T, R>): SyncCommand<T, R>;\n}\n\nexport interface AsyncCommandWithOps<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): Promise<PatchOperation<T>[]>;\n}\n\nexport interface SyncCommandWithOps<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): PatchOperation<T>[];\n}\n\nexport interface AsyncCommand<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): Promise<void>;\n}\n\nexport interface SyncCommand<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): void;\n}\n\n/**\n * Command that returns patch operations based on the command request\n */\nexport type Command<T = any, P extends object = DefaultPayload> =\n\t| SyncCommand<T, P>\n\t| ((request: CommandRequest<T, P>) => Promise<void | PatchOperation<T>[]>)\n\t| SyncCommandWithOps<T, P>;\n\n/**\n * Transformer function\n */\nexport interface Transformer<P extends object = DefaultPayload, R extends object = DefaultPayload> {\n\t(payload: R): P;\n}\n\n/**\n * A process that returns an executor using a Store and Transformer\n */\nexport interface Process<T = any, P extends object = DefaultPayload> {\n\t<R extends object = DefaultPayload>(store: Store<T>, transformer: Transformer<P, R>): ProcessExecutor<T, P, R>;\n\t(store: Store<T>): ProcessExecutor<T, P, P>;\n}\n\n/**\n * Represents an error from a ProcessExecutor\n */\nexport interface ProcessError<T = any> {\n\terror: Error | null;\n\tcommand?: Command<T, any>[] | Command<T, any>;\n}\n\nexport interface ProcessResultExecutor<T = any> {\n\t<P extends object = DefaultPayload, R extends object = DefaultPayload>(\n\t\tprocess: Process<T, P>,\n\t\tpayload: R,\n\t\ttransformer: Transformer<P, R>\n\t): Promise<ProcessResult<T, P> | ProcessError<T>>;\n\t<P extends object = object>(process: Process<T, P>, payload: P): Promise<ProcessResult<T, P> | ProcessError<T>>;\n}\n\n/**\n * Represents a successful result from a ProcessExecutor\n */\nexport interface ProcessResult<T = any, P extends object = DefaultPayload> extends State<T> {\n\texecutor: ProcessResultExecutor<T>;\n\tstore: Store<T>;\n\toperations: PatchOperation<T>[];\n\tundoOperations: PatchOperation<T>[];\n\tapply: (operations: PatchOperation<T>[], invalidate?: boolean) => PatchOperation<T>[];\n\tpayload: P;\n\tid: string;\n\terror?: ProcessError<T> | null;\n}\n\n/**\n * Runs a process for the given arguments.\n */\nexport interface ProcessExecutor<T = any, P extends object = DefaultPayload, R extends object = DefaultPayload> {\n\t(payload: R): Promise<ProcessResult<T, P>>;\n}\n\nexport interface ProcessCallback<T = any, P extends object = DefaultPayload> {\n\t(): {\n\t\tbefore?: ProcessCallbackBefore<T, P>;\n\t\tafter?: ProcessCallbackAfter<T>;\n\t};\n}\n\n/**\n * Callback for a process, returns an error as the first argument\n */\nexport interface ProcessCallbackAfter<T = any> {\n\t(error: ProcessError<T> | null, result: ProcessResult<T>): void;\n}\n\nexport interface ProcessCallbackBefore<T = any, P extends object = DefaultPayload> {\n\t(payload: P, store: Store<T>, id: string): void | Promise<void>;\n}\n\n/**\n * Function for undoing operations\n */\nexport interface Undo {\n\t(): void;\n}\n\n/**\n * ProcessCallbackDecorator callback\n */\ninterface ProcessCallbackDecorator {\n\t(callback?: ProcessCallback): ProcessCallback;\n}\n\n/**\n * CreateProcess factory interface\n */\nexport interface CreateProcess<T = any, P extends object = DefaultPayload> {\n\t(id: string, commands: (Command<T, P>[] | Command<T, P>)[], callback?: ProcessCallback<T>): Process<T, P>;\n}\n\n/**\n * Creates a command factory with the specified type\n */\nexport function createCommandFactory<T, P extends object = DefaultPayload>(): CommandFactory<T, P> {\n\tfunction commandFactory<R extends object = P>(command: AsyncCommand<T, R>): AsyncCommand<T, R>;\n\tfunction commandFactory<R extends object = P>(command: SyncCommand<T, R>): SyncCommand<T, R>;\n\tfunction commandFactory<R extends object = P>(command: AsyncCommandWithOps<T, R>): AsyncCommandWithOps<T, R>;\n\tfunction commandFactory<R extends object = P>(command: SyncCommandWithOps<T, R>): SyncCommandWithOps<T, R>;\n\tfunction commandFactory<R extends object = P>(command: Command<T, R>): Command<T, R> {\n\t\treturn command;\n\t}\n\treturn commandFactory;\n}\n\n/**\n * Commands that can be passed to a process\n */\nexport type Commands<T = any, P extends object = DefaultPayload> = (Command<T, P>[] | Command<T, P>)[];\n\nconst processMap = new Map();\nconst valueSymbol = Symbol('value');\n\nexport function isStateProxy(value: any) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\treturn Boolean(value[valueSymbol]);\n}\n\nexport function getProcess(id: string) {\n\treturn processMap.get(id);\n}\n\nconst proxyError = 'State updates are not available on legacy browsers';\n\nfunction removeProxies(value: any) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tif (value[valueSymbol]) {\n\t\t\tvalue = value[valueSymbol];\n\t\t}\n\n\t\tconst newValue: typeof value = Array.isArray(value) ? [] : {};\n\t\tconst keys = Object.keys(value);\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tnewValue[keys[i]] = removeProxies(value[keys[i]]);\n\t\t}\n\n\t\tvalue = newValue;\n\t}\n\n\treturn value;\n}\n\nexport function processExecutor<T = any, P extends object = DefaultPayload>(\n\tid: string,\n\tcommands: Commands<T, P>,\n\tstore: Store<T>,\n\tbefore: ProcessCallbackBefore | undefined,\n\tafter: ProcessCallbackAfter | undefined,\n\ttransformer: Transformer<P> | undefined\n): ProcessExecutor<T, any, any> {\n\tconst { apply, get, path, at } = store;\n\tfunction executor(\n\t\tprocess: Process,\n\t\tpayload: any,\n\t\ttransformer?: Transformer\n\t): Promise<ProcessResult | ProcessError> {\n\t\treturn process(store)(payload);\n\t}\n\n\treturn async (executorPayload: P): Promise<ProcessResult<T, P>> => {\n\t\tconst operations: PatchOperation[] = [];\n\t\tconst commandsCopy = [...commands];\n\t\tlet undoOperations: PatchOperation[] = [];\n\t\tlet command = commandsCopy.shift();\n\t\tlet error: ProcessError | null = null;\n\t\tconst payload = transformer ? transformer(executorPayload) : executorPayload;\n\n\t\tif (before) {\n\t\t\tlet result = before(payload, store, id);\n\t\t\tif (result) {\n\t\t\t\tawait result;\n\t\t\t}\n\t\t}\n\n\t\tfunction createProxy() {\n\t\t\tconst proxies = new Map<string, any>();\n\t\t\tconst proxied = new Map<string, any>();\n\n\t\t\tconst proxyOperations: PatchOperation[] = [];\n\t\t\tconst createHandler = (partialPath?: Path<T, any>) => ({\n\t\t\t\tget(obj: any, prop: string): any {\n\t\t\t\t\tconst fullPath = partialPath ? path(partialPath, prop) : path(prop as keyof T);\n\t\t\t\t\tconst stringPath = fullPath.path;\n\n\t\t\t\t\tif (typeof prop === 'symbol' && prop === valueSymbol) {\n\t\t\t\t\t\treturn proxied.get(stringPath);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet value = partialPath || obj.hasOwnProperty(prop) ? obj[prop] : get(fullPath);\n\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tlet proxiedValue;\n\t\t\t\t\t\tif (!proxies.has(stringPath)) {\n\t\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\t\tvalue = value.slice();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = { ...value };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tproxiedValue = new Proxy(value, createHandler(fullPath));\n\t\t\t\t\t\t\tproxies.set(stringPath, proxiedValue);\n\t\t\t\t\t\t\tproxied.set(stringPath, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tproxiedValue = proxies.get(stringPath);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobj[prop] = value;\n\t\t\t\t\t\treturn proxiedValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tobj[prop] = value;\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\n\t\t\t\tset(obj: any, prop: string, value: any) {\n\t\t\t\t\tvalue = removeProxies(value);\n\n\t\t\t\t\tproxyOperations.push(replace(partialPath ? path(partialPath, prop) : path(prop as keyof T), value));\n\t\t\t\t\tobj[prop] = value;\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\n\t\t\t\tdeleteProperty(obj: any, prop: string) {\n\t\t\t\t\tproxyOperations.push(remove(partialPath ? path(partialPath, prop) : path(prop as keyof T)));\n\t\t\t\t\tdelete obj[prop];\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn { proxy: new Proxy({}, createHandler()) as T, operations: proxyOperations };\n\t\t}\n\n\t\ttry {\n\t\t\twhile (command) {\n\t\t\t\tlet results = [];\n\t\t\t\tconst commandArray = Array.isArray(command) ? command : [command];\n\n\t\t\t\tresults = commandArray.map((commandFunction: Command<T, P>) => {\n\t\t\t\t\tlet state: T;\n\t\t\t\t\tlet proxyOperations: PatchOperation[] = [];\n\t\t\t\t\tif (typeof Proxy !== 'undefined') {\n\t\t\t\t\t\tconst { operations, proxy } = createProxy();\n\t\t\t\t\t\tstate = proxy;\n\t\t\t\t\t\tproxyOperations = operations;\n\t\t\t\t\t}\n\t\t\t\t\tlet result = commandFunction({\n\t\t\t\t\t\tat,\n\t\t\t\t\t\tget,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tpayload,\n\t\t\t\t\t\tget state() {\n\t\t\t\t\t\t\tif (typeof Proxy === 'undefined') {\n\t\t\t\t\t\t\t\tthrow new Error(proxyError);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn state;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isThenable(result)) {\n\t\t\t\t\t\treturn result.then((result: any) => {\n\t\t\t\t\t\t\tresult = result ? [...proxyOperations, ...result] : [...proxyOperations];\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult =\n\t\t\t\t\t\t\tresult && Array.isArray(result) ? [...proxyOperations, ...result] : [...proxyOperations];\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet resolvedResults: PatchOperation[][];\n\t\t\t\tif (results.some(isThenable)) {\n\t\t\t\t\tresolvedResults = await Promise.all(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolvedResults = results as PatchOperation[][];\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\t\t\toperations.push(...resolvedResults[i]);\n\t\t\t\t\tundoOperations = [...apply(resolvedResults[i]), ...undoOperations];\n\t\t\t\t}\n\n\t\t\t\tstore.invalidate();\n\t\t\t\tcommand = commandsCopy.shift();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (e.message === proxyError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terror = { error: e, command };\n\t\t}\n\n\t\tafter &&\n\t\t\tafter(error, {\n\t\t\t\tundoOperations,\n\t\t\t\tstore,\n\t\t\t\tid,\n\t\t\t\toperations,\n\t\t\t\tapply,\n\t\t\t\tat,\n\t\t\t\tget,\n\t\t\t\tpath,\n\t\t\t\texecutor,\n\t\t\t\tpayload\n\t\t\t});\n\t\treturn Promise.resolve({\n\t\t\tstore,\n\t\t\tundoOperations,\n\t\t\tid,\n\t\t\terror,\n\t\t\toperations,\n\t\t\tapply,\n\t\t\tat,\n\t\t\tget,\n\t\t\tpath,\n\t\t\texecutor,\n\t\t\tpayload\n\t\t});\n\t};\n}\n/**\n * Factories a process using the provided commands and an optional callback. Returns an executor used to run the process.\n *\n * @param commands The commands for the process\n * @param callback Callback called after the process is completed\n */\nexport function createProcess<T = any, P extends object = DefaultPayload>(\n\tid: string,\n\tcommands: Commands<T, P>,\n\tcallbacks?: ProcessCallback | ProcessCallback[]\n): Process<T, P> {\n\tcallbacks = Array.isArray(callbacks) ? callbacks : callbacks ? [callbacks] : [];\n\n\tconst callback = callbacks.length\n\t\t? callbacks.reduce((callback, nextCallback) => {\n\t\t\t\treturn combineCallbacks(nextCallback, id)(callback);\n\t\t  })\n\t\t: undefined;\n\n\tconst { before = undefined, after = undefined } = callback ? callback() : {};\n\n\tprocessMap.set(id, [id, commands, before, after]);\n\treturn (store: Store<T>, transformer?: Transformer<P>) =>\n\t\tprocessExecutor(id, commands, store, before, after, transformer);\n}\n\n/**\n * Creates a process factory that will create processes with the specified callback decorators applied.\n * @param callbacks array of process callback to be used by the returned factory.\n * @param initializers array of process initializers to be used by the returned factory.\n */\nexport function createProcessFactoryWith(callbacks: ProcessCallback[]) {\n\treturn <S, P extends object>(\n\t\tid: string,\n\t\tcommands: (Command<S, P>[] | Command<S, P>)[],\n\t\tcallback?: ProcessCallback<S>\n\t): Process<S, P> => {\n\t\treturn createProcess(id, commands, callback ? [...callbacks, callback] : callbacks);\n\t};\n}\n\n/**\n * Creates a `ProcessCallbackDecorator` from a `ProcessCallback`.\n * @param processCallback the process callback to convert to a decorator.\n * @param id process id to be passed to the before callback\n */\nfunction combineCallbacks(processCallback: ProcessCallback, id: string): ProcessCallbackDecorator {\n\tconst { before, after } = processCallback();\n\treturn (previousCallback?: ProcessCallback) => {\n\t\tconst { before: previousBefore = undefined, after: previousAfter = undefined } = previousCallback\n\t\t\t? previousCallback()\n\t\t\t: {};\n\t\treturn () => ({\n\t\t\tafter(error: ProcessError | null, result: ProcessResult) {\n\t\t\t\tif (previousAfter) {\n\t\t\t\t\tpreviousAfter(error, result);\n\t\t\t\t}\n\n\t\t\t\tif (after) {\n\t\t\t\t\tafter(error, result);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbefore(payload: DefaultPayload, store: Store<any>) {\n\t\t\t\tif (previousBefore) {\n\t\t\t\t\tpreviousBefore(payload, store, id);\n\t\t\t\t}\n\n\t\t\t\tif (before) {\n\t\t\t\t\tbefore(payload, store, id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n}\n\nexport function createCallbackDecorator(\n\tcallback: ProcessCallbackAfter\n): (callbacks?: ProcessCallback[]) => ProcessCallback[] {\n\tif (has('dojo-debug')) {\n\t\tconsole.warn(\n\t\t\t'Process using the the legacy middleware API. Please update to use the latest API, see https://github.com/dojo/framework/blob/master/docs/V5-Migration-Guide.md for details.'\n\t\t);\n\t}\n\tconst convertedCallback = () => ({\n\t\tafter: callback\n\t});\n\treturn (callbacks: ProcessCallback[] = []) => {\n\t\treturn [convertedCallback, ...callbacks];\n\t};\n}\n","import {\n\tRemovePatchOperation,\n\tReplacePatchOperation,\n\tAddPatchOperation,\n\tTestPatchOperation,\n\tOperationType\n} from './Patch';\nimport { Pointer } from './Pointer';\nimport { Path } from '../Store';\n\nexport function add<T = any, U = any>(path: Path<T, U>, value: U): AddPatchOperation<T, U> {\n\treturn {\n\t\top: OperationType.ADD,\n\t\tpath: new Pointer(path.path),\n\t\tvalue\n\t};\n}\n\nexport function replace<T = any, U = any>(path: Path<T, U>, value: U): ReplacePatchOperation<T, U> {\n\treturn {\n\t\top: OperationType.REPLACE,\n\t\tpath: new Pointer(path.path),\n\t\tvalue\n\t};\n}\n\nexport function remove<T = any, U = any>(path: Path<T, U>): RemovePatchOperation<T, U> {\n\treturn {\n\t\top: OperationType.REMOVE,\n\t\tpath: new Pointer(path.path)\n\t};\n}\n\nexport function test<T = any, U = any>(path: Path<T, U>, value: U): TestPatchOperation<T, U> {\n\treturn {\n\t\top: OperationType.TEST,\n\t\tpath: new Pointer(path.path),\n\t\tvalue\n\t};\n}\n","export function decode(segment: string) {\n\treturn segment.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n\nfunction encode(segment: string) {\n\treturn segment.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\nexport interface PointerTarget {\n\tobject: any;\n\ttarget: any;\n\tsegment: string;\n}\n\nexport function walk(segments: string[], object: any, clone = true, continueOnUndefined = true): PointerTarget {\n\tif (clone) {\n\t\tobject = { ...object };\n\t}\n\tconst pointerTarget: PointerTarget = {\n\t\tobject,\n\t\ttarget: object,\n\t\tsegment: ''\n\t};\n\n\treturn segments.reduce((pointerTarget, segment, index) => {\n\t\tif (pointerTarget.target === undefined) {\n\t\t\treturn pointerTarget;\n\t\t}\n\t\tif (Array.isArray(pointerTarget.target) && segment === '-') {\n\t\t\tsegment = String(pointerTarget.target.length - 1);\n\t\t}\n\t\tif (index + 1 < segments.length) {\n\t\t\tconst nextSegment: any = segments[index + 1];\n\t\t\tlet target = pointerTarget.target[segment];\n\n\t\t\tif (target === undefined && !continueOnUndefined) {\n\t\t\t\tpointerTarget.target = undefined;\n\t\t\t\treturn pointerTarget;\n\t\t\t}\n\n\t\t\tif (clone || target === undefined) {\n\t\t\t\tif (Array.isArray(target)) {\n\t\t\t\t\ttarget = [...target];\n\t\t\t\t} else if (typeof target === 'object') {\n\t\t\t\t\ttarget = { ...target };\n\t\t\t\t} else if (isNaN(nextSegment) || isNaN(parseInt(nextSegment, 0))) {\n\t\t\t\t\ttarget = {};\n\t\t\t\t} else {\n\t\t\t\t\ttarget = [];\n\t\t\t\t}\n\t\t\t\tpointerTarget.target[segment] = target;\n\t\t\t\tpointerTarget.target = target;\n\t\t\t} else {\n\t\t\t\tpointerTarget.target = target;\n\t\t\t}\n\t\t} else {\n\t\t\tpointerTarget.segment = segment;\n\t\t}\n\t\treturn pointerTarget;\n\t}, pointerTarget);\n}\n\nexport class Pointer<T = any, U = any> {\n\tprivate readonly _segments: string[];\n\n\tconstructor(segments: string | string[]) {\n\t\tif (Array.isArray(segments)) {\n\t\t\tthis._segments = segments;\n\t\t} else {\n\t\t\tthis._segments = (segments[0] === '/' ? segments : `/${segments}`).split('/');\n\t\t\tthis._segments.shift();\n\t\t}\n\t\tif (segments.length === 0 || ((segments.length === 1 && segments[0] === '/') || segments[0] === '')) {\n\t\t\tthrow new Error('Access to the root is not supported.');\n\t\t}\n\t\tthis._segments = this._segments.map(decode);\n\t}\n\n\tpublic get segments(): string[] {\n\t\treturn this._segments;\n\t}\n\n\tpublic get path(): string {\n\t\treturn `/${this._segments.map(encode).join('/')}`;\n\t}\n\n\tget(object: T): U {\n\t\tconst pointerTarget: PointerTarget = walk(this.segments, object, false, false);\n\t\tif (pointerTarget.target === undefined) {\n\t\t\treturn undefined as any;\n\t\t}\n\t\treturn pointerTarget.target[pointerTarget.segment];\n\t}\n\n\ttoJSON(): string {\n\t\treturn this.toString();\n\t}\n\n\ttoString(): string {\n\t\treturn this.path;\n\t}\n}\n","import Promise from '../shim/Promise';\n\n/**\n * Used through the toolkit as a consistent API to manage how callers can \"cleanup\"\n * when doing a function.\n */\nexport interface Handle {\n\t/**\n\t * Perform the destruction/cleanup logic associated with this Handle\n\t */\n\tdestroy(): void;\n}\n\n/**\n * No op function used to replace a Destroyable instance's `destroy` method, once the instance has been destroyed\n */\nfunction noop(): Promise<boolean> {\n\treturn Promise.resolve(false);\n}\n\n/**\n * No op function used to replace a Destroyable instance's `own` method, once the instance has been destroyed\n */\nfunction destroyed(): never {\n\tthrow new Error('Call made to destroyed method');\n}\n\nexport class Destroyable {\n\t/**\n\t * The instance's handles\n\t */\n\tprivate handles: Handle[];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.handles = [];\n\t}\n\n\t/**\n\t * Register handles for the instance that will be destroyed when `this.destroy` is called\n\t *\n\t * @param {Handle} handle The handle to add for the instance\n\t * @returns {Handle} A wrapper Handle. When the wrapper Handle's `destroy` method is invoked, the original handle is\n\t *                   removed from the instance, and its `destroy` method is invoked.\n\t */\n\town(handle: Handle): Handle {\n\t\tconst { handles: _handles } = this;\n\t\t_handles.push(handle);\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\t_handles.splice(_handles.indexOf(handle));\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Destroys all handlers registered for the instance\n\t *\n\t * @returns {Promise<any} A Promise that resolves once all handles have been destroyed\n\t */\n\tdestroy(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.handles.forEach((handle) => {\n\t\t\t\thandle && handle.destroy && handle.destroy();\n\t\t\t});\n\t\t\tthis.destroy = noop;\n\t\t\tthis.own = destroyed;\n\t\t\tresolve(true);\n\t\t});\n\t}\n}\n\nexport default Destroyable;\n","import { Map } from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport { Constructor, InjectorFactory, InjectorItem, RegistryLabel, WidgetBaseInterface } from './interfaces';\nimport { Registry, RegistryEventObject, RegistryItem } from './Registry';\n\nexport type RegistryHandlerEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class RegistryHandler extends Evented<RegistryHandlerEventMap> {\n\tprivate _registry = new Registry();\n\tprivate _registryWidgetLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprivate _registryInjectorLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprotected baseRegistry!: Registry;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.own(this._registry);\n\t\tconst destroy = () => {\n\t\t\tif (this.baseRegistry) {\n\t\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis.baseRegistry = undefined as any;\n\t\t\t}\n\t\t};\n\t\tthis.own({ destroy });\n\t}\n\n\tpublic set base(baseRegistry: Registry) {\n\t\tif (this.baseRegistry) {\n\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t}\n\t\tthis.baseRegistry = baseRegistry;\n\t}\n\n\tpublic get base(): Registry {\n\t\treturn this.baseRegistry;\n\t}\n\n\tpublic define(label: RegistryLabel, widget: RegistryItem): void {\n\t\tthis._registry.define(label, widget);\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injector: InjectorFactory): void {\n\t\tthis._registry.defineInjector(label, injector);\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn this._registry.has(label) || Boolean(this.baseRegistry && this.baseRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn this._registry.hasInjector(label) || Boolean(this.baseRegistry && this.baseRegistry.hasInjector(label));\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean = false\n\t): Constructor<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'get', this._registryWidgetLabelMap);\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel, globalPrecedence: boolean = false): InjectorItem<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'getInjector', this._registryInjectorLabelMap);\n\t}\n\n\tprivate _get(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean,\n\t\tgetFunctionName: 'getInjector' | 'get',\n\t\tlabelMap: Map<Registry, RegistryLabel[]>\n\t): any {\n\t\tconst registries = globalPrecedence ? [this.baseRegistry, this._registry] : [this._registry, this.baseRegistry];\n\t\tfor (let i = 0; i < registries.length; i++) {\n\t\t\tconst registry: any = registries[i];\n\t\t\tif (!registry) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst item = registry[getFunctionName](label);\n\t\t\tconst registeredLabels = labelMap.get(registry) || [];\n\t\t\tif (item) {\n\t\t\t\treturn item;\n\t\t\t} else if (registeredLabels.indexOf(label) === -1) {\n\t\t\t\tconst handle = registry.on(label, (event: RegistryEventObject) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.action === 'loaded' &&\n\t\t\t\t\t\t(this as any)[getFunctionName](label, globalPrecedence) === event.item\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.emit({ type: 'invalidate' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.own(handle);\n\t\t\t\tlabelMap.set(registry, [...registeredLabels, label]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default RegistryHandler;\n","import { Theme, Classes, ClassNames, ThemeWithVariant, ThemeWithVariants, NamedVariant } from './../interfaces';\nimport { create, invalidator, diffProperty, getRegistry } from '../vdom';\nimport icache from './icache';\nimport injector from './injector';\nimport Set from '../../shim/Set';\nimport { auto } from '../diff';\nimport Registry from '../Registry';\nimport {\n\tThemeInjector,\n\tisThemeInjectorPayloadWithVariant,\n\tisThemeWithVariants,\n\tisThemeWithVariant,\n\tThemeInjectorPayload,\n\tThemeWithVariantsInjectorPayload\n} from '../ThemeInjector';\n\nexport { Theme, Classes, ClassNames } from './../interfaces';\n\nexport interface ThemeProperties {\n\ttheme?: Theme | ThemeWithVariant;\n\tclasses?: Classes;\n}\n\nexport const THEME_KEY = ' _key';\n\nexport const INJECTED_THEME_KEY = '__theme_injector';\n\nfunction registerThemeInjector(theme: Theme | ThemeWithVariant | undefined, themeRegistry: Registry): ThemeInjector {\n\tconst themeInjector = new ThemeInjector(theme);\n\tthemeRegistry.defineInjector(INJECTED_THEME_KEY, (invalidator) => {\n\t\tthemeInjector.setInvalidator(invalidator);\n\t\treturn () => themeInjector;\n\t});\n\treturn themeInjector;\n}\n\nconst factory = create({ invalidator, icache, diffProperty, injector, getRegistry }).properties<ThemeProperties>();\n\nexport const theme = factory(\n\t({ middleware: { invalidator, icache, diffProperty, injector, getRegistry }, properties }) => {\n\t\tlet themeKeys = new Set();\n\n\t\tdiffProperty('theme', properties, (current, next) => {\n\t\t\tconst { changed } = auto(current.theme, next.theme, 3);\n\t\t\tif (changed) {\n\t\t\t\ticache.clear();\n\t\t\t\tinvalidator();\n\t\t\t}\n\t\t});\n\t\tdiffProperty('classes', (current: ThemeProperties, next: ThemeProperties) => {\n\t\t\tlet result = false;\n\t\t\tif ((current.classes && !next.classes) || (!current.classes && next.classes)) {\n\t\t\t\tresult = true;\n\t\t\t} else if (current.classes && next.classes) {\n\t\t\t\tconst keys = [...themeKeys.values()];\n\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\tlet key = keys[i];\n\t\t\t\t\tresult = auto(current.classes[key], next.classes[key], 2).changed;\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\ticache.clear();\n\t\t\t\tinvalidator();\n\t\t\t}\n\t\t});\n\n\t\tfunction getTheme() {\n\t\t\tconst { theme } = properties();\n\t\t\tif (theme) {\n\t\t\t\treturn theme;\n\t\t\t}\n\t\t\tconst themeInjector = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\tif (themeInjector) {\n\t\t\t\tconst themePayload = themeInjector.get();\n\t\t\t\tif (isThemeInjectorPayloadWithVariant(themePayload)) {\n\t\t\t\t\treturn { theme: themePayload.theme, variant: themePayload.variant };\n\t\t\t\t} else if (themePayload) {\n\t\t\t\t\treturn themePayload.theme;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst themeInjector = injector.get(INJECTED_THEME_KEY);\n\t\tif (!themeInjector) {\n\t\t\tconst registry = getRegistry();\n\t\t\tif (registry) {\n\t\t\t\tregisterThemeInjector(undefined, registry.base);\n\t\t\t}\n\t\t}\n\t\tinjector.subscribe(INJECTED_THEME_KEY, () => {\n\t\t\ticache.clear();\n\t\t\tinvalidator();\n\t\t});\n\n\t\tfunction set(theme: Theme): void;\n\t\tfunction set<T extends ThemeWithVariants>(theme: T, variant?: keyof T['variants'] | NamedVariant): void;\n\t\tfunction set<T extends ThemeWithVariants>(\n\t\t\ttheme: Theme | T,\n\t\t\tvariant?: keyof T['variants'] | NamedVariant\n\t\t): void {\n\t\t\tconst currentTheme = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\tif (currentTheme) {\n\t\t\t\tif (isThemeWithVariants(theme)) {\n\t\t\t\t\tcurrentTheme.set(theme, variant);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTheme.set(theme);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tclasses<T extends ClassNames>(css: T): T {\n\t\t\t\tconst cachedTheme = icache.get<T>(css);\n\t\t\t\tif (cachedTheme) {\n\t\t\t\t\treturn cachedTheme;\n\t\t\t\t}\n\t\t\t\tconst { [THEME_KEY]: key, ...classes } = css;\n\t\t\t\tthemeKeys.add(key);\n\t\t\t\tlet theme = classes as ClassNames;\n\t\t\t\tlet { classes: currentClasses } = properties();\n\t\t\t\tlet currentTheme = getTheme();\n\n\t\t\t\tif (currentTheme && isThemeWithVariant(currentTheme)) {\n\t\t\t\t\tcurrentTheme = isThemeWithVariants(currentTheme.theme)\n\t\t\t\t\t\t? currentTheme.theme.theme\n\t\t\t\t\t\t: currentTheme.theme;\n\t\t\t\t}\n\n\t\t\t\tif (currentTheme && currentTheme[key]) {\n\t\t\t\t\ttheme = { ...theme, ...currentTheme[key] };\n\t\t\t\t}\n\t\t\t\tif (currentClasses && currentClasses[key]) {\n\t\t\t\t\tconst classKeys = Object.keys(currentClasses[key]);\n\t\t\t\t\tfor (let i = 0; i < classKeys.length; i++) {\n\t\t\t\t\t\tconst classKey = classKeys[i];\n\t\t\t\t\t\tif (theme[classKey]) {\n\t\t\t\t\t\t\ttheme[classKey] = `${theme[classKey]} ${currentClasses[key][classKey].join(' ')}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ticache.set(css, theme, false);\n\t\t\t\treturn theme as T;\n\t\t\t},\n\t\t\tvariant() {\n\t\t\t\tconst theme = getTheme();\n\t\t\t\tif (theme && isThemeWithVariant(theme)) {\n\t\t\t\t\treturn theme.variant.value.root;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset,\n\t\t\tget(): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload | undefined {\n\t\t\t\tconst currentTheme = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\t\tif (currentTheme) {\n\t\t\t\t\treturn currentTheme.get();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n);\n\nexport default theme;\n","import { create, v } from '../core/vdom';\nimport has from '../core/has';\nimport injector from '../core/middleware/injector';\nimport { VNodeProperties } from '../core/interfaces';\nimport { Params } from './interfaces';\nimport Router from './Router';\n\nexport interface LinkProperties extends VNodeProperties {\n\tkey?: string;\n\trouterKey?: string;\n\tisOutlet?: boolean;\n\tparams?: Params;\n\tonClick?: (event: MouseEvent) => void;\n\tto: string;\n}\n\nconst factory = create({ injector }).properties<LinkProperties>();\n\nexport const Link = factory(function Link({ middleware: { injector }, properties, children }) {\n\tlet { routerKey = 'router', to, isOutlet = true, target, params = {}, onClick, ...props } = properties();\n\tconst router = injector.get<Router>(routerKey);\n\tlet href: string | undefined = to;\n\n\tlet linkProps: VNodeProperties;\n\tif (router) {\n\t\tif (isOutlet) {\n\t\t\thref = router.link(href, params);\n\t\t}\n\t\tconst onclick = (event: MouseEvent) => {\n\t\t\tonClick && onClick(event);\n\n\t\t\tif (!event.defaultPrevented && event.button === 0 && !event.metaKey && !event.ctrlKey && !target) {\n\t\t\t\tif (!has('build-serve') || !has('build-time-rendered')) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thref !== undefined && router.setPath(href);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tlinkProps = { ...props, onclick, href };\n\t} else {\n\t\tlinkProps = { ...props, href };\n\t}\n\treturn v('a', linkProps, children());\n});\n\nexport default Link;\n","import { create } from '@dojo/framework/core/vdom';\nimport coreTheme, {\n\tThemeProperties as CoreThemeProperties\n} from '@dojo/framework/core/middleware/theme';\nimport { ThemeWithVariant, ClassNames, Theme } from '@dojo/framework/core/interfaces';\nimport { isThemeInjectorPayloadWithVariant } from '@dojo/framework/core/ThemeInjector';\n\nconst factory = create({ coreTheme });\nexport const THEME_KEY = ' _key';\n\nfunction uppercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toUpperCase()}${value.slice(1)}`;\n}\n\nfunction lowercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toLowerCase()}${value.slice(1)}`;\n}\n\nfunction isThemeWithVariant(theme: any): theme is ThemeWithVariant {\n\treturn theme && theme.hasOwnProperty('variant');\n}\n\nexport interface ThemeProperties extends CoreThemeProperties {}\n\nexport const theme = factory(function({ middleware: { coreTheme }, properties }) {\n\tfunction getTheme() {\n\t\tconst { theme } = properties();\n\t\tif (theme) {\n\t\t\treturn theme;\n\t\t}\n\n\t\tconst themePayload = coreTheme.get();\n\t\tif (isThemeInjectorPayloadWithVariant(themePayload)) {\n\t\t\treturn { theme: themePayload.theme, variant: themePayload.variant };\n\t\t} else if (themePayload) {\n\t\t\treturn themePayload.theme;\n\t\t}\n\t}\n\n\treturn {\n\t\tcompose: <T extends ClassNames, B extends ClassNames>(\n\t\t\tbaseCss: B,\n\t\t\tcss: T,\n\t\t\tprefix?: string\n\t\t): Theme | ThemeWithVariant => {\n\t\t\tconst theme = getTheme();\n\t\t\tconst baseKey = baseCss[THEME_KEY];\n\t\t\tconst variantKey = css[THEME_KEY];\n\t\t\tconst virtualCss = Object.keys(baseCss).reduce(\n\t\t\t\t(virtualCss, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn virtualCss;\n\t\t\t\t\t}\n\t\t\t\t\tif (prefix && !virtualCss[`${prefix}${uppercaseFirstChar(key)}`]) {\n\t\t\t\t\t\tvirtualCss[`${prefix}${uppercaseFirstChar(key)}`] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\tif (!css[key]) {\n\t\t\t\t\t\tvirtualCss[key] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn virtualCss;\n\t\t\t\t},\n\t\t\t\t{ [THEME_KEY]: variantKey } as ClassNames\n\t\t\t);\n\t\t\tconst virtualTheme = coreTheme.classes(virtualCss);\n\t\t\tconst variantTheme = coreTheme.classes(css);\n\t\t\tlet baseTheme = coreTheme.classes(baseCss);\n\t\t\tif (prefix) {\n\t\t\t\tconst prefixedCss = Object.keys({ ...virtualTheme, ...variantTheme }).reduce(\n\t\t\t\t\t(prefixCss, key) => {\n\t\t\t\t\t\tif (key.indexOf(prefix) === 0 && key !== prefix) {\n\t\t\t\t\t\t\tconst classKey = lowercaseFirstChar(key.replace(prefix, ''));\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!variantTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key].trim()\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = `${baseTheme[classKey]} ${virtualTheme[\n\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t].trim()}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = variantTheme[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prefixCss;\n\t\t\t\t\t},\n\t\t\t\t\t{} as ClassNames\n\t\t\t\t);\n\t\t\t\tbaseTheme = { ...baseTheme, ...prefixedCss };\n\n\t\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariant: theme.variant\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...theme,\n\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst constructedTheme = Object.keys(baseTheme).reduce(\n\t\t\t\t(theme, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn theme;\n\t\t\t\t\t}\n\t\t\t\t\tconst variantComposesClass = variantTheme[key] && variantTheme[key].trim();\n\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\ttheme[key] = variantComposesClass;\n\t\t\t\t\t} else if (virtualTheme[key] && virtualTheme[key].trim()) {\n\t\t\t\t\t\ttheme[key] = `${theme[key]} ${virtualTheme[key].trim()}`;\n\t\t\t\t\t}\n\t\t\t\t\treturn theme;\n\t\t\t\t},\n\t\t\t\t{ ...baseTheme } as ClassNames\n\t\t\t);\n\n\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\treturn {\n\t\t\t\t\ttheme: {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t[baseKey]: constructedTheme\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t},\n\t\t\t\t\tvariant: theme.variant\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...theme,\n\t\t\t\t[baseKey]: constructedTheme\n\t\t\t};\n\t\t},\n\t\t...coreTheme\n\t};\n});\n\nexport default theme;\n","import { Evented } from '../core/Evented';\nimport { Patch, PatchOperation } from './state/Patch';\nimport { Pointer } from './state/Pointer';\nimport Map from '../shim/Map';\n\n/**\n * The \"path\" to a value of type T on and object of type M. The path string is a JSON Pointer to the location of\n * `value` within `state`.\n *\n */\nexport interface Path<M, T> {\n\tpath: string;\n\tstate: M;\n\tvalue: T;\n}\n\n/**\n * An interface that enables typed traversal of an arbitrary type M. `path` and `at` can be used to generate\n * `Path`s that allow access to properties within M via the `get` method. The returned `Path`s can also be passed to the\n * utility methods `add`, `replace`, and `delete` in order to generate typed operations for modifying the state of a store.\n */\nexport interface State<M> {\n\tget<S>(path: Path<M, S>): S;\n\tat<S extends Path<M, Array<any>>>(path: S, index: number): Path<M, S['value'][0]>;\n\tpath: StatePaths<M>;\n}\n\nexport interface StatePaths<M> {\n\t<T, P0 extends keyof Required<T>>(path: Path<M, T>, a: P0): Path<M, Required<T>[P0]>;\n\t<T, P0 extends keyof T, P1 extends keyof Required<T>[P0]>(path: Path<M, T>, a: P0, b: P1): Path<\n\t\tM,\n\t\tRequired<Required<T>[P0]>[P1]\n\t>;\n\t<T, P0 extends keyof T, P1 extends keyof Required<T>[P0], P2 extends keyof Required<Required<T>[P0]>[P1]>(\n\t\tpath: Path<M, T>,\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2\n\t): Path<M, Required<Required<Required<T>[P0]>[P1]>[P2]>;\n\t<\n\t\tT,\n\t\tP0 extends keyof T,\n\t\tP1 extends keyof Required<T>[P0],\n\t\tP2 extends keyof Required<Required<T>[P0]>[P1],\n\t\tP3 extends keyof Required<Required<Required<T>[P0]>[P1]>[P2]\n\t>(\n\t\tpath: Path<M, T>,\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2,\n\t\td: P3\n\t): Path<M, Required<Required<Required<Required<T>[P0]>[P1]>[P2]>[P3]>;\n\t<\n\t\tT,\n\t\tP0 extends keyof T,\n\t\tP1 extends keyof Required<T>[P0],\n\t\tP2 extends keyof Required<Required<T>[P0]>[P1],\n\t\tP3 extends keyof Required<Required<Required<T>[P0]>[P1]>[P2],\n\t\tP4 extends keyof Required<Required<Required<Required<T>[P0]>[P1]>[P2]>[P3]\n\t>(\n\t\tpath: Path<M, T>,\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2,\n\t\td: P3,\n\t\te: P4\n\t): Path<M, Required<Required<Required<Required<Required<T>[P0]>[P1]>[P2]>[P3]>[P4]>;\n\t<P0 extends keyof M>(a: P0): Path<M, Required<M>[P0]>;\n\t<P0 extends keyof M, P1 extends keyof Required<M>[P0]>(a: P0, b: P1): Path<M, Required<Required<M>[P0]>[P1]>;\n\t<P0 extends keyof M, P1 extends keyof Required<M>[P0], P2 extends keyof Required<Required<M>[P0]>[P1]>(\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2\n\t): Path<M, Required<Required<Required<M>[P0]>[P1]>[P2]>;\n\t<\n\t\tP0 extends keyof M,\n\t\tP1 extends keyof Required<M>[P0],\n\t\tP2 extends keyof Required<Required<M>[P0]>[P1],\n\t\tP3 extends keyof Required<Required<Required<M>[P0]>[P1]>[P2]\n\t>(\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2,\n\t\td: P3\n\t): Path<M, Required<Required<Required<Required<M>[P0]>[P1]>[P2]>[P3]>;\n\t<\n\t\tP0 extends keyof M,\n\t\tP1 extends keyof Required<M>[P0],\n\t\tP2 extends keyof Required<Required<M>[P0]>[P1],\n\t\tP3 extends keyof Required<Required<Required<M>[P0]>[P1]>[P2],\n\t\tP4 extends keyof Required<Required<Required<Required<M>[P0]>[P1]>[P2]>[P3]\n\t>(\n\t\ta: P0,\n\t\tb: P1,\n\t\tc: P2,\n\t\td: P3,\n\t\te: P4\n\t): Path<M, Required<Required<Required<Required<Required<M>[P0]>[P1]>[P2]>[P3]>[P4]>;\n}\n\ninterface OnChangeCallback {\n\tcallbackId: number;\n\tcallback: () => void;\n}\n\ninterface OnChangeValue {\n\tcallbacks: OnChangeCallback[];\n\tpreviousValue: any;\n}\n\nfunction isString(segment?: string): segment is string {\n\treturn typeof segment === 'string';\n}\n\nexport interface MutableState<T = any> extends State<T> {\n\t/**\n\t * Applies store operations to state and returns the undo operations\n\t */\n\tapply(operations: PatchOperation<T>[]): PatchOperation<T>[];\n}\n\nexport class DefaultState<T = any> implements MutableState<T> {\n\t/**\n\t * The private state object\n\t */\n\tprivate _state = {} as T;\n\n\t/**\n\t * Returns the state at a specific pointer path location.\n\t */\n\tpublic get = <U = any>(path: Path<T, U>): U => {\n\t\treturn path.value;\n\t};\n\n\t/**\n\t * Applies store operations to state and returns the undo operations\n\t */\n\tpublic apply = (operations: PatchOperation<T>[]): PatchOperation<T>[] => {\n\t\tconst patch = new Patch(operations);\n\t\tconst patchResult = patch.apply(this._state);\n\t\tthis._state = patchResult.object;\n\t\treturn patchResult.undoOperations;\n\t};\n\n\tpublic at = <U = any>(path: Path<T, Array<U>>, index: number): Path<T, U> => {\n\t\tconst array = this.get(path);\n\t\tconst value = array && array[index];\n\n\t\treturn {\n\t\t\tpath: `${path.path}/${index}`,\n\t\t\tstate: path.state,\n\t\t\tvalue\n\t\t};\n\t};\n\n\tpublic path: State<T>['path'] = (path: string | Path<T, any>, ...segments: (string | undefined)[]) => {\n\t\tif (typeof path === 'string') {\n\t\t\tsegments = [path, ...segments];\n\t\t} else {\n\t\t\tsegments = [...new Pointer(path.path).segments, ...segments];\n\t\t}\n\n\t\tconst stringSegments = segments.filter<string>(isString);\n\t\tconst hasMultipleSegments = stringSegments.length > 1;\n\t\tconst pointer = new Pointer(hasMultipleSegments ? stringSegments : stringSegments[0] || '');\n\n\t\treturn {\n\t\t\tpath: pointer.path,\n\t\t\tstate: this._state,\n\t\t\tvalue: pointer.get(this._state)\n\t\t};\n\t};\n}\n\n/**\n * Application state store\n */\nexport class Store<T = any> extends Evented implements MutableState<T> {\n\tprivate _adapter: MutableState<T> = new DefaultState<T>();\n\n\tprivate _changePaths = new Map<string, OnChangeValue>();\n\n\tprivate _callbackId = 0;\n\n\t/**\n\t * Returns the state at a specific pointer path location.\n\t */\n\tpublic get = <U = any>(path: Path<T, U>): U => {\n\t\treturn this._adapter.get(path);\n\t};\n\n\tconstructor(options?: { state?: MutableState<T> }) {\n\t\tsuper();\n\t\tif (options && options.state) {\n\t\t\tthis._adapter = options.state;\n\t\t\tthis.path = this._adapter.path.bind(this._adapter);\n\t\t}\n\t}\n\n\t/**\n\t * Applies store operations to state and returns the undo operations\n\t */\n\tpublic apply = (operations: PatchOperation<T>[], invalidate: boolean = false): PatchOperation<T>[] => {\n\t\tconst result = this._adapter.apply(operations);\n\n\t\tif (invalidate) {\n\t\t\tthis.invalidate();\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tpublic at = <U = any>(path: Path<T, Array<U>>, index: number): Path<T, U> => {\n\t\treturn this._adapter.at(path, index);\n\t};\n\n\tpublic onChange = <U = any>(paths: Path<T, U> | Path<T, U>[], callback: () => void) => {\n\t\tconst callbackId = this._callbackId;\n\t\tif (!Array.isArray(paths)) {\n\t\t\tpaths = [paths];\n\t\t}\n\t\tpaths.forEach((path) => this._addOnChange(path, callback, callbackId));\n\t\tthis._callbackId += 1;\n\t\treturn {\n\t\t\tremove: () => {\n\t\t\t\t(paths as Path<T, U>[]).forEach((path) => {\n\t\t\t\t\tconst onChange = this._changePaths.get(path.path);\n\t\t\t\t\tif (onChange) {\n\t\t\t\t\t\tonChange.callbacks = onChange.callbacks.filter((callback) => {\n\t\t\t\t\t\t\treturn callback.callbackId !== callbackId;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tprivate _addOnChange = <U = any>(path: Path<T, U>, callback: () => void, callbackId: number): void => {\n\t\tlet changePaths = this._changePaths.get(path.path);\n\t\tif (!changePaths) {\n\t\t\tchangePaths = { callbacks: [], previousValue: this.get(path) };\n\t\t}\n\t\tchangePaths.callbacks.push({ callbackId, callback });\n\t\tthis._changePaths.set(path.path, changePaths);\n\t};\n\n\tprivate _runOnChanges() {\n\t\tconst callbackIdsCalled: number[] = [];\n\t\tthis._changePaths.forEach((value: OnChangeValue, path: string) => {\n\t\t\tconst { previousValue, callbacks } = value;\n\t\t\tconst pointer = new Pointer(path);\n\t\t\tconst newValue = pointer.segments.length\n\t\t\t\t? (this._adapter as any).path(pointer.segments[0] as keyof T, ...pointer.segments.slice(1)).value\n\t\t\t\t: undefined;\n\t\t\tif (previousValue !== newValue) {\n\t\t\t\tthis._changePaths.set(path, { callbacks, previousValue: newValue });\n\t\t\t\tcallbacks.forEach((callbackItem) => {\n\t\t\t\t\tconst { callback, callbackId } = callbackItem;\n\t\t\t\t\tif (callbackIdsCalled.indexOf(callbackId) === -1) {\n\t\t\t\t\t\tcallbackIdsCalled.push(callbackId);\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Emits an invalidation event\n\t */\n\tpublic invalidate(): any {\n\t\tthis._runOnChanges();\n\t\tthis.emit({ type: 'invalidate' });\n\t}\n\n\tpublic path: State<T>['path'] = this._adapter.path.bind(this._adapter);\n}\n\nexport default Store;\n","import axios from \"axios\";\n\nexport type WorldType = \"GREENLAND\" | \"LAVALAND\" | \"WINTERLAND\";\n\nexport interface MapSummary {\n    author: string;\n    height: number;\n    id: string;\n    name: string;\n    numPlayers: number;\n    width: number;\n    worldType: WorldType;\n}\n\nexport interface Position {\n    x: number;\n    y: number;\n}\n\nexport type TerrainType =\n    | \"SAVANNAH\"\n    | \"MOUNTAIN1\"\n    | \"SNOW\"\n    | \"SWAMP\"\n    | \"DESERT1\"\n    | \"WATER\"\n    | \"WATER_BUILDABLE\"\n    | \"DESERT2\"\n    | \"MEADOW1\"\n    | \"MEADOW2\"\n    | \"MEADOW3\"\n    | \"MOUNTAIN2\"\n    | \"MOUNTAIN3\"\n    | \"MOUNTAIN4\"\n    | \"STEPPE\"\n    | \"MEADOW_FLOWER\"\n    | \"LAVA\"\n    | \"MAGENTA\"\n    | \"MOUNTAIN_MEADOW\"\n    | \"WATER_BLOCKS_SHIPS\"\n    | \"LAVA2\"\n    | \"LAVA3\"\n    | \"LAVA4\"\n    | \"MOUNTAIN_BUILDABLE\";\n\nexport interface MapNode {\n    altitude: number;\n    position: Position;\n    terrain1: TerrainType;\n    terrain2: TerrainType;\n}\n\nexport interface MapDefinition extends MapSummary {\n    nodes: MapNode[];\n}\n\nexport async function findAll(): Promise<MapSummary[]> {\n    const response = await axios.get<MapSummary[]>(\"/api/maps\");\n    return response.data;\n}\n\nexport async function read(id: string): Promise<MapDefinition> {\n    const response = await axios.get<MapDefinition>(`/api/map/${id}`);\n    return response.data;\n}\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","import { Evented, EventObject } from '../core/Evented';\n\nexport type InjectorEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class Injector<T = any> extends Evented<InjectorEventMap> {\n\tprivate _payload: T;\n\tprivate _invalidator: undefined | (() => void);\n\n\tconstructor(payload: T) {\n\t\tsuper();\n\t\tthis._payload = payload;\n\t}\n\n\tpublic setInvalidator(invalidator: () => void) {\n\t\tthis._invalidator = invalidator;\n\t}\n\n\tpublic get(): T {\n\t\treturn this._payload;\n\t}\n\n\tpublic set(payload: T): void {\n\t\tthis._payload = payload;\n\t\tif (this._invalidator) {\n\t\t\tthis._invalidator();\n\t\t}\n\t}\n}\n\nexport default Injector;\n","import global from '../shim/global';\nimport { Theme, ThemeWithVariants, ThemeWithVariant, NamedVariant } from './interfaces';\nimport Injector from './Injector';\nimport cssVars from '../shim/cssVariables';\nimport Map from '../shim/Map';\nimport has from './has';\n\nexport interface ThemeWithVariantsInjectorPayload {\n\ttheme: ThemeWithVariants;\n\tvariant: NamedVariant;\n}\n\nexport interface ThemeInjectorPayload {\n\ttheme: Theme;\n}\n\nexport function isVariantModule(variant: string | NamedVariant): variant is NamedVariant {\n\treturn typeof variant !== 'string';\n}\n\nexport function isThemeWithVariant(theme: Theme | ThemeWithVariants | ThemeWithVariant): theme is ThemeWithVariant {\n\treturn theme && theme.hasOwnProperty('variant');\n}\n\nexport function isThemeWithVariants(theme: Theme | ThemeWithVariants | ThemeWithVariant): theme is ThemeWithVariants {\n\treturn theme && theme.hasOwnProperty('variants');\n}\n\nexport function isThemeInjectorPayloadWithVariant(\n\ttheme: ThemeInjectorPayload | ThemeWithVariantsInjectorPayload | undefined\n): theme is ThemeWithVariantsInjectorPayload {\n\treturn !!theme && theme.hasOwnProperty('variant');\n}\n\nlet processCssVariant = function(_: string) {};\n\nif (!has('dom-css-variables')) {\n\tconst setUpCssVariantSupport = () => {\n\t\tconst styleId = '__dojo_processed_styles';\n\t\tconst processedCssMap = new Map<string, string>();\n\t\tlet variantStyleElement: HTMLStyleElement | undefined;\n\n\t\tfunction applyStyles(css: string) {\n\t\t\tconst style = document.createElement('style');\n\t\t\tstyle.textContent = css;\n\t\t\tstyle.setAttribute('id', styleId);\n\t\t\tif (variantStyleElement && variantStyleElement.parentNode) {\n\t\t\t\tvariantStyleElement.parentNode.replaceChild(style, variantStyleElement);\n\t\t\t} else {\n\t\t\t\tglobal.document.head.appendChild(style);\n\t\t\t}\n\t\t\tvariantStyleElement = style;\n\t\t}\n\n\t\treturn function processCssVariant(variantName: string) {\n\t\t\tconst processedCss = processedCssMap.get(variantName);\n\t\t\tif (processedCss) {\n\t\t\t\tapplyStyles(processedCss);\n\t\t\t} else {\n\t\t\t\tcssVars({\n\t\t\t\t\texclude: `style[id=${styleId}]`,\n\t\t\t\t\tonSuccess: (css) => {\n\t\t\t\t\t\tlet temp = css;\n\t\t\t\t\t\tlet index = temp.indexOf(variantName);\n\t\t\t\t\t\tlet variantCss = '';\n\t\t\t\t\t\twhile (index !== -1) {\n\t\t\t\t\t\t\ttemp = temp.substring(index + variantName.length);\n\t\t\t\t\t\t\tconst match = temp.match(/\\{([^}]+)\\}/);\n\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\tif (variantCss) {\n\t\t\t\t\t\t\t\t\tvariantCss = `${variantCss.substring(0, variantCss.length - 1)}${match[0].substring(\n\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvariantCss = match[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tindex = temp.indexOf(variantName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (variantCss) {\n\t\t\t\t\t\t\tcss = `:root ${variantCss}${css}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn css;\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: (css) => {\n\t\t\t\t\t\tprocessedCssMap.set(variantName, css);\n\t\t\t\t\t\tapplyStyles(css);\n\t\t\t\t\t},\n\t\t\t\t\tupdateDOM: false,\n\t\t\t\t\tsilent: true\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\tprocessCssVariant = setUpCssVariantSupport();\n}\n\nfunction createThemeInjectorPayload(\n\ttheme: Theme | ThemeWithVariants | ThemeWithVariant,\n\tvariant?: string | NamedVariant\n): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload {\n\tif (isThemeWithVariant(theme)) {\n\t\tif (typeof theme.variant === 'string') {\n\t\t\treturn {\n\t\t\t\ttheme: theme.theme,\n\t\t\t\tvariant: { name: theme.variant, value: theme.theme.variants[theme.variant] }\n\t\t\t};\n\t\t}\n\t\treturn { theme: theme.theme, variant: theme.variant };\n\t} else if (isThemeWithVariants(theme)) {\n\t\tvariant = variant || 'default';\n\t\tif (isVariantModule(variant)) {\n\t\t\tif (!has('dom-css-variables')) {\n\t\t\t\tprocessCssVariant(variant.value.root);\n\t\t\t}\n\t\t\treturn { theme, variant };\n\t\t}\n\t\tif (!has('dom-css-variables')) {\n\t\t\tprocessCssVariant(theme.variants[variant].root);\n\t\t}\n\n\t\treturn { theme: theme, variant: { name: variant, value: theme.variants[variant] } };\n\t}\n\treturn { theme };\n}\n\nexport class ThemeInjector extends Injector {\n\tconstructor(theme?: Theme | ThemeWithVariants | ThemeWithVariant) {\n\t\tsuper(theme ? createThemeInjectorPayload(theme) : theme);\n\t}\n\n\tset<T extends ThemeWithVariants>(theme: T, variant?: keyof T['variants'] | NamedVariant): void;\n\tset(theme: ThemeWithVariant): void;\n\tset(theme: Theme): void;\n\tset(theme: Theme | ThemeWithVariants | ThemeWithVariant, variant?: string | NamedVariant) {\n\t\tsuper.set(createThemeInjectorPayload(theme, variant));\n\t}\n\n\tget(): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload | undefined {\n\t\treturn super.get();\n\t}\n}\n\nexport default ThemeInjector;\n","/**\n * Helper function to generate a value property descriptor\n *\n * @param value        The value the property descriptor should be set to\n * @param enumerable   If the property should be enumberable, defaults to false\n * @param writable     If the property should be writable, defaults to true\n * @param configurable If the property should be configurable, defaults to true\n * @return             The property descriptor object\n */\nexport function getValueDescriptor<T>(\n\tvalue: T,\n\tenumerable: boolean = false,\n\twritable: boolean = true,\n\tconfigurable: boolean = true\n): TypedPropertyDescriptor<T> {\n\treturn {\n\t\tvalue: value,\n\t\tenumerable: enumerable,\n\t\twritable: writable,\n\t\tconfigurable: configurable\n\t};\n}\n\n/**\n * A helper function which wraps a function where the first argument becomes the scope\n * of the call\n *\n * @param nativeFunction The source function to be wrapped\n */\nexport function wrapNative<T, U, R>(nativeFunction: (arg1: U) => R): (target: T, arg1: U) => R;\nexport function wrapNative<T, U, V, R>(nativeFunction: (arg1: U, arg2: V) => R): (target: T, arg1: U, arg2: V) => R;\nexport function wrapNative<T, U, V, W, R>(\n\tnativeFunction: (arg1: U, arg2: V, arg3: W) => R\n): (target: T, arg1: U, arg2: V, arg3: W) => R;\nexport function wrapNative<T, U, V, W, X, R>(\n\tnativeFunction: (arg1: U, arg2: V, arg3: W) => R\n): (target: T, arg1: U, arg2: V, arg3: W) => R;\nexport function wrapNative<T, U, V, W, X, Y, R>(\n\tnativeFunction: (arg1: U, arg2: V, arg3: W, arg4: Y) => R\n): (target: T, arg1: U, arg2: V, arg3: W, arg4: Y) => R;\nexport function wrapNative(nativeFunction: (...args: any[]) => any): (target: any, ...args: any[]) => any {\n\treturn function(target: any, ...args: any[]): any {\n\t\treturn nativeFunction.apply(target, args);\n\t};\n}\n","`!has('es6-iterator')`;\nimport { isArrayLike, isIterable, Iterable } from './iterator';\nimport has from '../core/has';\nimport { wrapNative } from './support/util';\n\nexport interface MapCallback<T, U> {\n\t/**\n\t * A callback function when mapping\n\t *\n\t * @param element The element that is currently being mapped\n\t * @param index The current index of the element\n\t */\n\t(element: T, index: number): U;\n}\n\nexport interface FindCallback<T> {\n\t/**\n\t * A callback function when using find\n\t *\n\t * @param element The element that is currenty being analysed\n\t * @param index The current index of the element that is being analysed\n\t * @param array The source array\n\t */\n\t(element: T, index: number, array: ArrayLike<T>): boolean;\n}\n\n/* ES6 Array static methods */\n\nexport interface From {\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @param mapFunction A map function to call on each element in the array\n\t * @param thisArg The execution context for the map function\n\t * @return The new Array\n\t */\n\t<T, U>(source: ArrayLike<T> | Iterable<T>, mapFunction: MapCallback<T, U>, thisArg?: any): Array<U>;\n\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @return The new Array\n\t */\n\t<T>(source: ArrayLike<T> | Iterable<T>): Array<T>;\n}\n\nexport interface Flat {\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[][]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>>>,\n\t\tdepth: 4\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>>,\n\t\tdepth: 3\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>,\n\t\tdepth: 2\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: ReadonlyArray<U[]> | ReadonlyArray<ReadonlyArray<U>>, depth?: 1): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: ReadonlyArray<U>, depth: 0): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth. If no depth is provided, flat method defaults to the depth of 1.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: any[], depth?: number): any[];\n}\n\nexport interface FlatMap {\n\t/**\n\t * Calls a defined callback function on each element of an array. Then, flattens the result into\n\t * a new array.\n\t * This is identical to a map followed by flat with depth 1.\n\t *\n\t * @param callback A function that accepts up to three arguments. The flatMap method calls the\n\t * callback function one time for each element in the array.\n\t * @param thisArg An object to which the this keyword can refer in the callback function. If\n\t * thisArg is omitted, undefined is used as the this value.\n\t */\n\t<U, T extends any, This = undefined>(\n\t\tarr: T[],\n\t\tcallback: (this: This, value: T, index: number, array: T[]) => U | ReadonlyArray<U>,\n\t\tthisArg?: This\n\t): U[];\n}\n\nexport let from: From;\n\n/**\n * Creates a new array from the function parameters.\n *\n * @param arguments Any number of arguments for the array\n * @return An array from the given arguments\n */\nexport let of: <T>(...items: T[]) => Array<T>;\n\n/* ES6 Array instance methods */\n\n/**\n * Copies data internally within an array or array-like object.\n *\n * @param target The target array-like object\n * @param offset The index to start copying values to; if negative, it counts backwards from length\n * @param start The first (inclusive) index to copy; if negative, it counts backwards from length\n * @param end The last (exclusive) index to copy; if negative, it counts backwards from length\n * @return The target\n */\nexport let copyWithin: <T>(target: ArrayLike<T>, offset: number, start: number, end?: number) => ArrayLike<T>;\n\n/**\n * Fills elements of an array-like object with the specified value.\n *\n * @param target The target to fill\n * @param value The value to fill each element of the target with\n * @param start The first index to fill\n * @param end The (exclusive) index at which to stop filling\n * @return The filled target\n */\nexport let fill: <T>(target: ArrayLike<T>, value: T, start?: number, end?: number) => ArrayLike<T>;\n\n/**\n * Finds and returns the first instance matching the callback or undefined if one is not found.\n *\n * @param target An array-like object\n * @param callback A function returning if the current value matches a criteria\n * @param thisArg The execution context for the find function\n * @return The first element matching the callback, or undefined if one does not exist\n */\nexport let find: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => T | undefined;\n\n/**\n * Performs a linear search and returns the first index whose value satisfies the passed callback,\n * or -1 if no values satisfy it.\n *\n * @param target An array-like object\n * @param callback A function returning true if the current value satisfies its criteria\n * @param thisArg The execution context for the find function\n * @return The first index whose value satisfies the passed callback, or -1 if no values satisfy it\n */\nexport let findIndex: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => number;\n\n/* ES7 Array instance methods */\n\n/**\n * Determines whether an array includes a given value\n *\n * @param target the target array-like object\n * @param searchElement the item to search for\n * @param fromIndex the starting index to search from\n * @return `true` if the array includes the element, otherwise `false`\n */\nexport let includes: <T>(target: ArrayLike<T>, searchElement: T, fromIndex?: number) => boolean;\n\n/**\n * Flattens arrays to the depth specified\n *\n * @param target An array-like object\n * @param depth The depth to flatten too, defaults to 1.\n */\nexport let flat: Flat;\n\nexport let flatMap: FlatMap;\n\n// Util functions for filled implementations\n\nlet toLength: any;\nlet toInteger: any;\nlet normalizeOffset: any;\n\nif (!has('es6-array') || !has('es6-array-fill') || !has('es7-array')) {\n\tconst MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n\t/**\n\t * Ensures a non-negative, non-infinite, safe integer.\n\t *\n\t * @param length The number to validate\n\t * @return A proper length\n\t */\n\ttoLength = function toLength(length: number): number {\n\t\tif (isNaN(length)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlength = Number(length);\n\t\tif (isFinite(length)) {\n\t\t\tlength = Math.floor(length);\n\t\t}\n\t\t// Ensure a non-negative, real, safe integer\n\t\treturn Math.min(Math.max(length, 0), MAX_SAFE_INTEGER);\n\t};\n\n\t/**\n\t * From ES6 7.1.4 ToInteger()\n\t *\n\t * @param value A value to convert\n\t * @return An integer\n\t */\n\ttoInteger = function toInteger(value: any): number {\n\t\tvalue = Number(value);\n\t\tif (isNaN(value)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (value === 0 || !isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value > 0 ? 1 : -1) * Math.floor(Math.abs(value));\n\t};\n\n\t/**\n\t * Normalizes an offset against a given length, wrapping it if negative.\n\t *\n\t * @param value The original offset\n\t * @param length The total length to normalize against\n\t * @return If negative, provide a distance from the end (length); otherwise provide a distance from 0\n\t */\n\tnormalizeOffset = function normalizeOffset(value: number, length: number): number {\n\t\treturn value < 0 ? Math.max(length + value, 0) : Math.min(value, length);\n\t};\n}\n\nif (!has('es6-array')) {\n\tArray.from = function from(\n\t\tthis: ArrayConstructor,\n\t\tarrayLike: Iterable<any> | ArrayLike<any>,\n\t\tmapFunction?: MapCallback<any, any>,\n\t\tthisArg?: any\n\t): Array<any> {\n\t\tif (arrayLike == null) {\n\t\t\tthrow new TypeError('from: requires an array-like object');\n\t\t}\n\n\t\tif (mapFunction && thisArg) {\n\t\t\tmapFunction = mapFunction.bind(thisArg);\n\t\t}\n\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst Constructor = this;\n\t\tconst length: number = toLength((arrayLike as any).length);\n\n\t\t// Support extension\n\t\tconst array: any[] =\n\t\t\ttypeof Constructor === 'function' ? <any[]>Object(new Constructor(length)) : new Array(length);\n\n\t\tif (!isArrayLike(arrayLike) && !isIterable(arrayLike)) {\n\t\t\treturn array;\n\t\t}\n\n\t\t// if this is an array and the normalized length is 0, just return an empty array. this prevents a problem\n\t\t// with the iteration on IE when using a NaN array length.\n\t\tif (isArrayLike(arrayLike)) {\n\t\t\tif (length === 0) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < arrayLike.length; i++) {\n\t\t\t\tarray[i] = mapFunction ? mapFunction(arrayLike[i], i) : arrayLike[i];\n\t\t\t}\n\t\t} else {\n\t\t\tlet i = 0;\n\t\t\tfor (const value of arrayLike) {\n\t\t\t\tarray[i] = mapFunction ? mapFunction(value, i) : value;\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\tif ((arrayLike as any).length !== undefined) {\n\t\t\tarray.length = length;\n\t\t}\n\n\t\treturn array;\n\t};\n\n\tArray.of = function of<T>(...items: T[]): Array<T> {\n\t\treturn Array.prototype.slice.call(items);\n\t};\n\n\tArray.prototype.copyWithin = function copyWithin(offset: number, start: number, end?: number) {\n\t\tif (this == null) {\n\t\t\tthrow new TypeError('copyWithin: target must be an array-like object');\n\t\t}\n\n\t\tconst length = toLength(this.length);\n\t\toffset = normalizeOffset(toInteger(offset), length);\n\t\tstart = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\t\tlet count = Math.min(end! - start, length - offset);\n\n\t\tlet direction = 1;\n\t\tif (offset > start && offset < start + count) {\n\t\t\tdirection = -1;\n\t\t\tstart += count - 1;\n\t\t\toffset += count - 1;\n\t\t}\n\n\t\twhile (count > 0) {\n\t\t\tif (start in this) {\n\t\t\t\tthis[offset] = this[start];\n\t\t\t} else {\n\t\t\t\tdelete this[offset];\n\t\t\t}\n\n\t\t\toffset += direction;\n\t\t\tstart += direction;\n\t\t\tcount--;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\ttype Predicate = (this: {} | void, value: any, index: number, obj: any[]) => boolean;\n\n\tArray.prototype.find = function find(callback: Predicate, thisArg?: {}) {\n\t\tconst index = this.findIndex(callback, thisArg);\n\t\treturn index !== -1 ? this[index] : undefined;\n\t};\n\n\tArray.prototype.findIndex = function findIndex(callback: Predicate, thisArg?: {}): number {\n\t\tconst length = toLength(this.length);\n\n\t\tif (!callback) {\n\t\t\tthrow new TypeError('find: second argument must be a function');\n\t\t}\n\n\t\tif (thisArg) {\n\t\t\tcallback = callback.bind(thisArg);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tif (callback(this[i], i, this)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\nif (!has('es6-array-fill')) {\n\tArray.prototype.fill = function fill(value: any, start?: number, end?: number) {\n\t\tconst length = toLength(this.length);\n\t\tlet i = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\n\t\twhile (i < (end || 0)) {\n\t\t\tthis[i++] = value;\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\nif (!has('es7-array')) {\n\tArray.prototype.includes = function includes(searchElement, fromIndex = 0) {\n\t\tlet len = toLength(this.length);\n\n\t\tfor (let i = fromIndex; i < len; ++i) {\n\t\t\tconst currentElement = this[i];\n\t\t\tif (\n\t\t\t\tsearchElement === currentElement ||\n\t\t\t\t(searchElement !== searchElement && currentElement !== currentElement)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n}\n\nif (!has('es2019-array')) {\n\tArray.prototype.flat = function flat(depth: number = 1) {\n\t\treturn depth > 0\n\t\t\t? this.reduce((acc, val) => acc.concat(Array.isArray(val) ? val.flat(depth - 1) : val), [])\n\t\t\t: this.slice();\n\t};\n\n\tArray.prototype.flatMap = function flatMap(callback: any) {\n\t\treturn this.map(callback).flat();\n\t};\n}\n\nfrom = Array.from;\nof = Array.of;\ncopyWithin = wrapNative(Array.prototype.copyWithin);\nfill = wrapNative(Array.prototype.fill);\nfind = wrapNative(Array.prototype.find);\nflat = wrapNative(Array.prototype.flat) as any;\nflatMap = wrapNative(Array.prototype.flatMap) as any;\nfindIndex = wrapNative(Array.prototype.findIndex);\nincludes = wrapNative(Array.prototype.includes);\n\nexport default Array;\n","import { Evented, EventObject } from '../core/Evented';\nimport Map from '../shim/Map';\nimport { NodeHandlerInterface } from './interfaces';\n\n/**\n * Enum to identify the type of event.\n * Listening to 'Projector' will notify when projector is created or updated\n * Listening to 'Widget' will notify when widget root is created or updated\n */\nexport enum NodeEventType {\n\tProjector = 'Projector',\n\tWidget = 'Widget'\n}\n\nexport type NodeHandlerEventMap = {\n\tProjector: EventObject<NodeEventType.Projector>;\n\tWidget: EventObject<NodeEventType.Widget>;\n};\n\nexport class NodeHandler extends Evented<NodeHandlerEventMap> implements NodeHandlerInterface {\n\tprivate _nodeMap = new Map<string | number, Element>();\n\n\tpublic get(key: string | number): Element | undefined {\n\t\treturn this._nodeMap.get(key);\n\t}\n\n\tpublic has(key: string | number): boolean {\n\t\treturn this._nodeMap.has(key);\n\t}\n\n\tpublic add(element: Element, key: string | number): void {\n\t\tthis._nodeMap.set(key, element);\n\t\tthis.emit({ type: `${key}` });\n\t}\n\n\tpublic addRoot(): void {\n\t\tthis.emit({ type: NodeEventType.Widget });\n\t}\n\n\tpublic remove(key: string | number) {\n\t\tthis._nodeMap.delete(key);\n\t}\n\n\tpublic addProjector(): void {\n\t\tthis.emit({ type: NodeEventType.Projector });\n\t}\n\n\tpublic clear(): void {\n\t\tthis._nodeMap.clear();\n\t}\n}\n\nexport default NodeHandler;\n","import Map from '../shim/Map';\nimport WeakMap from '../shim/WeakMap';\nimport { auto } from './diff';\nimport {\n\tAfterRender,\n\tBeforeProperties,\n\tBeforeRender,\n\tDiffPropertyReaction,\n\tDNode,\n\tRender,\n\tWidgetMetaConstructor,\n\tWidgetBaseInterface,\n\tWidgetProperties,\n\tMetaBase,\n\tRenderResult\n} from './interfaces';\nimport RegistryHandler from './RegistryHandler';\nimport NodeHandler from './NodeHandler';\nimport { WIDGET_BASE_TYPE } from './Registry';\nimport { Handle } from '../core/Destroyable';\nimport { Base } from './meta/Base';\nimport { widgetInstanceMap, v } from './vdom';\n\ninterface ReactionFunctionConfig {\n\tpropertyName: string;\n\treaction: DiffPropertyReaction;\n}\n\nexport type BoundFunctionData = { boundFunc: (...args: any[]) => any; scope: any };\n\nconst decoratorMap = new WeakMap<Function, Map<string, any[]>>();\nconst builtDecoratorMap = new WeakMap<Function, Map<string, any[]>>();\nconst boundAuto = auto.bind(null);\n\nfunction isDomMeta(meta: any): meta is Base {\n\treturn Boolean(meta.afterRender);\n}\n\nconst IGNORE_LIST: (string | symbol)[] = ['render', ...Object.getOwnPropertyNames(Object.getPrototypeOf({}))];\n\nconst autoBindCache = new Map<any, string[]>();\n\nfunction autoBind(instance: any) {\n\tlet prototype = instance.constructor.prototype;\n\n\tlet keys: string[] = [];\n\n\tif (autoBindCache.has(prototype)) {\n\t\tkeys = autoBindCache.get(prototype) as string[];\n\t} else {\n\t\twhile (prototype) {\n\t\t\tconst ownKeys = Object.getOwnPropertyNames(prototype);\n\t\t\tif (prototype.constructor.hasOwnProperty('_type')) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst descriptors = Object.getOwnPropertyDescriptors(prototype);\n\t\t\tconst descriptorKeys = Object.keys(descriptors);\n\t\t\tconst getterKeys = descriptorKeys.filter((key) => descriptors[key].get || descriptors[key].set);\n\t\t\tconst filteredKeys = ownKeys.filter((key) => getterKeys.indexOf(key) === -1);\n\n\t\t\tkeys = [...keys, ...filteredKeys];\n\t\t\tprototype = Object.getPrototypeOf(prototype);\n\t\t}\n\n\t\tkeys = keys.filter((k) => typeof instance[k] === 'function' && IGNORE_LIST.indexOf(k) === -1);\n\n\t\tautoBindCache.set(prototype, keys);\n\t}\n\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key = keys[i];\n\n\t\tconst boundFunc = instance[key].bind(instance);\n\t\tObject.defineProperty(instance, key, {\n\t\t\tconfigurable: true,\n\t\t\tget() {\n\t\t\t\treturn boundFunc;\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Main widget base for all widgets to extend\n */\nexport class WidgetBase<P = WidgetProperties, C extends DNode = DNode> implements WidgetBaseInterface<P, C> {\n\t/**\n\t * static identifier\n\t */\n\tstatic _type = WIDGET_BASE_TYPE;\n\n\t/**\n\t * property specifically for typing when using tsx\n\t */\n\t/* tslint:disable-next-line:variable-name */\n\tpublic __properties__!: this['properties'] & WidgetProperties & { __children__?: DNode | (DNode | DNode[])[] };\n\n\t/**\n\t * children array\n\t */\n\tprivate _children: (C | null)[];\n\n\t/**\n\t * Indicates if it is the initial set properties cycle\n\t */\n\tprivate _initialProperties = true;\n\n\t/**\n\t * internal widget properties\n\t */\n\tprivate _properties: P & WidgetProperties & { [index: string]: any };\n\n\t/**\n\t * Array of property keys considered changed from the previous set properties\n\t */\n\tprivate _changedPropertyKeys: string[] = [];\n\n\t/**\n\t * map of decorators that are applied to this widget\n\t */\n\tprivate _decoratorCache: Map<string, any[]>;\n\n\tprivate _registry: RegistryHandler = new RegistryHandler();\n\n\tprivate _metaMap: Map<WidgetMetaConstructor<any>, MetaBase> | undefined;\n\n\tprivate _boundRenderFunc: Render;\n\n\tprivate _boundInvalidate: () => void;\n\n\tprivate _nodeHandler: NodeHandler = new NodeHandler();\n\n\tprivate _handles: Handle[] = [];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis._children = [];\n\t\tthis._decoratorCache = new Map<string, any[]>();\n\t\tthis._properties = {} as P;\n\t\tthis._boundRenderFunc = this.render.bind(this);\n\t\tthis._boundInvalidate = this.invalidate.bind(this);\n\t\tthis.own(this._registry);\n\t\tthis.own(this._registry.on('invalidate', this._boundInvalidate));\n\n\t\twidgetInstanceMap.set(this, {\n\t\t\tdirty: true,\n\t\t\tonAttach: (): void => {\n\t\t\t\tthis.onAttach();\n\t\t\t},\n\t\t\tonDetach: (): void => {\n\t\t\t\tthis.onDetach();\n\t\t\t\tthis.destroy();\n\t\t\t},\n\t\t\tnodeHandler: this._nodeHandler,\n\t\t\trendering: false,\n\t\t\tinputProperties: {},\n\t\t\tregistry: this.registry\n\t\t});\n\n\t\tthis.own({\n\t\t\tdestroy: () => {\n\t\t\t\twidgetInstanceMap.delete(this);\n\t\t\t\tthis._nodeHandler.clear();\n\t\t\t\tthis._nodeHandler.destroy();\n\t\t\t}\n\t\t});\n\n\t\tthis._runAfterConstructors();\n\t}\n\n\tprotected meta<T extends MetaBase>(MetaType: WidgetMetaConstructor<T>): T {\n\t\tif (this._metaMap === undefined) {\n\t\t\tthis._metaMap = new Map<WidgetMetaConstructor<any>, MetaBase>();\n\t\t}\n\t\tlet cached = this._metaMap.get(MetaType);\n\t\tif (!cached) {\n\t\t\tcached = new MetaType({\n\t\t\t\tinvalidate: this._boundInvalidate,\n\t\t\t\tnodeHandler: this._nodeHandler,\n\t\t\t\tbind: this\n\t\t\t});\n\t\t\tthis.own(cached);\n\t\t\tthis._metaMap.set(MetaType, cached);\n\t\t}\n\n\t\treturn cached as T;\n\t}\n\n\tprotected onAttach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tprotected onDetach(): void {\n\t\t// Do nothing by default.\n\t}\n\n\tpublic get properties(): Readonly<P> & Readonly<WidgetProperties> {\n\t\treturn this._properties;\n\t}\n\n\tpublic get changedPropertyKeys(): string[] {\n\t\treturn [...this._changedPropertyKeys];\n\t}\n\n\tpublic __setProperties__(originalProperties: this['properties']): void {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData) {\n\t\t\tinstanceData.inputProperties = originalProperties;\n\t\t}\n\t\tconst properties = this._runBeforeProperties(originalProperties);\n\t\tconst registeredDiffPropertyNames = this.getDecorator('registeredDiffProperty');\n\t\tconst changedPropertyKeys: string[] = [];\n\t\tconst propertyNames = Object.keys(properties);\n\n\t\tif (this._initialProperties) {\n\t\t\tautoBind(this);\n\t\t}\n\n\t\tif (this._initialProperties === false || registeredDiffPropertyNames.length !== 0) {\n\t\t\tconst allProperties = [...propertyNames, ...Object.keys(this._properties)];\n\t\t\tconst checkedProperties: (string | number)[] = [];\n\t\t\tconst diffPropertyResults: any = {};\n\t\t\tlet runReactions = false;\n\n\t\t\tfor (let i = 0; i < allProperties.length; i++) {\n\t\t\t\tconst propertyName = allProperties[i];\n\t\t\t\tif (checkedProperties.indexOf(propertyName) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcheckedProperties.push(propertyName);\n\t\t\t\tconst previousProperty = this._properties[propertyName];\n\t\t\t\tconst newProperty = properties[propertyName];\n\t\t\t\tif (registeredDiffPropertyNames.indexOf(propertyName) !== -1) {\n\t\t\t\t\trunReactions = true;\n\t\t\t\t\tconst diffFunctions = this.getDecorator(`diffProperty:${propertyName}`);\n\t\t\t\t\tfor (let i = 0; i < diffFunctions.length; i++) {\n\t\t\t\t\t\tconst result = diffFunctions[i](previousProperty, newProperty);\n\t\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst result = boundAuto(previousProperty, newProperty);\n\t\t\t\t\tif (result.changed && changedPropertyKeys.indexOf(propertyName) === -1) {\n\t\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t\t}\n\t\t\t\t\tif (propertyName in properties) {\n\t\t\t\t\t\tdiffPropertyResults[propertyName] = result.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (runReactions) {\n\t\t\t\tconst reactionFunctions: ReactionFunctionConfig[] = this.getDecorator('diffReaction');\n\t\t\t\tconst executedReactions: Function[] = [];\n\t\t\t\treactionFunctions.forEach(({ reaction, propertyName }) => {\n\t\t\t\t\tconst propertyChanged = changedPropertyKeys.indexOf(propertyName) !== -1;\n\t\t\t\t\tconst reactionRun = executedReactions.indexOf(reaction) !== -1;\n\t\t\t\t\tif (propertyChanged && !reactionRun) {\n\t\t\t\t\t\treaction.call(this, this._properties, diffPropertyResults);\n\t\t\t\t\t\texecutedReactions.push(reaction);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._properties = diffPropertyResults;\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t} else {\n\t\t\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\t\t\tconst propertyName = propertyNames[i];\n\t\t\t\tif (typeof properties[propertyName] === 'function') {\n\t\t\t\t\tproperties[propertyName] = properties[propertyName];\n\t\t\t\t} else {\n\t\t\t\t\tchangedPropertyKeys.push(propertyName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._changedPropertyKeys = changedPropertyKeys;\n\t\t\tthis._properties = { ...properties };\n\t\t}\n\t\tthis._initialProperties = false;\n\n\t\tif (this._changedPropertyKeys.length > 0) {\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tpublic get children(): (C | null)[] {\n\t\treturn this._children;\n\t}\n\n\tpublic __setChildren__(children: (C | null)[]): void {\n\t\tif (this._children.length > 0 || children.length > 0) {\n\t\t\tthis._children = children;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tpublic __render__(): RenderResult {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData) {\n\t\t\tinstanceData.dirty = false;\n\t\t}\n\t\tconst render = this._runBeforeRenders();\n\t\tconst dNode = this._runAfterRenders(render());\n\t\treturn dNode;\n\t}\n\n\tpublic invalidate(): void {\n\t\tconst instanceData = widgetInstanceMap.get(this);\n\t\tif (instanceData && instanceData.invalidate) {\n\t\t\tinstanceData.invalidate();\n\t\t}\n\t}\n\n\tprotected render(): DNode | DNode[] {\n\t\treturn v('div', {}, this.children);\n\t}\n\n\t/**\n\t * Function to add decorators to WidgetBase\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @param value The value of the decorator\n\t */\n\tprotected addDecorator(decoratorKey: string, value: any): void {\n\t\tvalue = Array.isArray(value) ? value : [value];\n\t\tif (this.hasOwnProperty('constructor')) {\n\t\t\tlet decoratorList = decoratorMap.get(this.constructor);\n\t\t\tif (!decoratorList) {\n\t\t\t\tdecoratorList = new Map<string, any[]>();\n\t\t\t\tdecoratorMap.set(this.constructor, decoratorList);\n\t\t\t}\n\n\t\t\tlet specificDecoratorList = decoratorList.get(decoratorKey);\n\t\t\tif (!specificDecoratorList) {\n\t\t\t\tspecificDecoratorList = [];\n\t\t\t\tdecoratorList.set(decoratorKey, specificDecoratorList);\n\t\t\t}\n\t\t\tspecificDecoratorList.push(...value);\n\t\t} else {\n\t\t\tconst decorators = this.getDecorator(decoratorKey);\n\t\t\tthis._decoratorCache.set(decoratorKey, [...decorators, ...value]);\n\t\t}\n\t}\n\n\t/**\n\t * Function to build the list of decorators from the global decorator map.\n\t *\n\t * @param decoratorKey  The key of the decorator\n\t * @return An array of decorator values\n\t * @private\n\t */\n\tprivate _buildDecoratorList(decoratorKey: string): any[] {\n\t\tconst allDecorators = [];\n\n\t\tlet constructor = this.constructor;\n\n\t\twhile (constructor) {\n\t\t\tconst instanceMap = decoratorMap.get(constructor);\n\t\t\tif (instanceMap) {\n\t\t\t\tconst decorators = instanceMap.get(decoratorKey);\n\n\t\t\t\tif (decorators) {\n\t\t\t\t\tallDecorators.unshift(...decorators);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconstructor = Object.getPrototypeOf(constructor);\n\t\t}\n\n\t\tconst buildDecorators = builtDecoratorMap.get(this.constructor) || new Map();\n\t\tbuildDecorators.set(decoratorKey, allDecorators);\n\t\tbuiltDecoratorMap.set(this.constructor, buildDecorators);\n\t\treturn allDecorators;\n\t}\n\n\t/**\n\t * Function to retrieve decorator values\n\t *\n\t * @param decoratorKey The key of the decorator\n\t * @returns An array of decorator values\n\t */\n\tprotected getDecorator(decoratorKey: string): any[] {\n\t\tlet decoratorCache = builtDecoratorMap.get(this.constructor);\n\t\tlet allDecorators =\n\t\t\tthis._decoratorCache.get(decoratorKey) || (decoratorCache && decoratorCache.get(decoratorKey));\n\n\t\tif (allDecorators !== undefined) {\n\t\t\treturn allDecorators;\n\t\t}\n\n\t\tallDecorators = this._buildDecoratorList(decoratorKey);\n\n\t\tallDecorators = [...allDecorators];\n\t\tthis._decoratorCache.set(decoratorKey, allDecorators);\n\t\treturn allDecorators;\n\t}\n\n\tpublic get registry(): RegistryHandler {\n\t\treturn this._registry;\n\t}\n\n\tprivate _runBeforeProperties(properties: any) {\n\t\tconst beforeProperties: BeforeProperties[] = this.getDecorator('beforeProperties');\n\t\tif (beforeProperties.length > 0) {\n\t\t\treturn beforeProperties.reduce(\n\t\t\t\t(properties, beforePropertiesFunction) => {\n\t\t\t\t\treturn { ...properties, ...beforePropertiesFunction.call(this, properties) };\n\t\t\t\t},\n\t\t\t\t{ ...properties }\n\t\t\t);\n\t\t}\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Run all registered before renders and return the updated render method\n\t */\n\tprivate _runBeforeRenders(): Render {\n\t\tconst beforeRenders = this.getDecorator('beforeRender');\n\n\t\tif (beforeRenders.length > 0) {\n\t\t\treturn beforeRenders.reduce((render: Render, beforeRenderFunction: BeforeRender) => {\n\t\t\t\tconst updatedRender = beforeRenderFunction.call(this, render, this._properties, this._children);\n\t\t\t\tif (!updatedRender) {\n\t\t\t\t\tconsole.warn('Render function not returned from beforeRender, using previous render');\n\t\t\t\t\treturn render;\n\t\t\t\t}\n\t\t\t\treturn updatedRender;\n\t\t\t}, this._boundRenderFunc);\n\t\t}\n\t\treturn this._boundRenderFunc;\n\t}\n\n\t/**\n\t * Run all registered after renders and return the decorated DNodes\n\t *\n\t * @param dNode The DNodes to run through the after renders\n\t */\n\tprivate _runAfterRenders(dNode: DNode | DNode[]): DNode | DNode[] {\n\t\tconst afterRenders = this.getDecorator('afterRender');\n\n\t\tif (afterRenders.length > 0) {\n\t\t\tdNode = afterRenders.reduce((dNode: DNode | DNode[], afterRenderFunction: AfterRender) => {\n\t\t\t\treturn afterRenderFunction.call(this, dNode);\n\t\t\t}, dNode);\n\t\t}\n\n\t\tif (this._metaMap !== undefined) {\n\t\t\tthis._metaMap.forEach((meta) => {\n\t\t\t\tisDomMeta(meta) && meta.afterRender();\n\t\t\t});\n\t\t}\n\n\t\treturn dNode;\n\t}\n\n\tprivate _runAfterConstructors(): void {\n\t\tconst afterConstructors = this.getDecorator('afterConstructor');\n\n\t\tif (afterConstructors.length > 0) {\n\t\t\tafterConstructors.forEach((afterConstructor) => afterConstructor.call(this));\n\t\t}\n\t}\n\n\tprotected own(handle: Handle): void {\n\t\tthis._handles.push(handle);\n\t}\n\n\tprotected destroy() {\n\t\twhile (this._handles.length > 0) {\n\t\t\tconst handle = this._handles.pop();\n\t\t\tif (handle) {\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default WidgetBase;\n","import { Pointer, walk, PointerTarget } from './Pointer';\nimport { getFriendlyDifferenceMessage, isEqual } from './compare';\n\nexport enum OperationType {\n\tADD = 'add',\n\tREMOVE = 'remove',\n\tREPLACE = 'replace',\n\tTEST = 'test'\n}\n\nexport interface BaseOperation<T = any, U = any> {\n\top: OperationType;\n\tpath: Pointer<T, U>;\n}\n\nexport interface AddPatchOperation<T = any, U = any> extends BaseOperation<T, U> {\n\top: OperationType.ADD;\n\tvalue: U;\n}\n\nexport interface RemovePatchOperation<T = any, U = any> extends BaseOperation<T, U> {\n\top: OperationType.REMOVE;\n}\n\nexport interface ReplacePatchOperation<T = any, U = any> extends BaseOperation<T, U> {\n\top: OperationType.REPLACE;\n\tvalue: U;\n}\n\nexport interface TestPatchOperation<T = any, U = any> extends BaseOperation<T, U> {\n\top: OperationType.TEST;\n\tvalue: U;\n}\n\nexport type PatchOperation<T = any, U = any> =\n\t| AddPatchOperation<T, U>\n\t| RemovePatchOperation<T, U>\n\t| ReplacePatchOperation<T, U>\n\t| TestPatchOperation<T, U>;\n\nexport interface PatchResult<T = any, U = any> {\n\tobject: T;\n\tundoOperations: PatchOperation<T, U>[];\n}\n\nfunction add(pointerTarget: PointerTarget, value: any): any {\n\tlet index = parseInt(pointerTarget.segment, 10);\n\tif (Array.isArray(pointerTarget.target) && !isNaN(index)) {\n\t\tpointerTarget.target.splice(index, 0, value);\n\t} else {\n\t\tpointerTarget.target[pointerTarget.segment] = value;\n\t}\n\treturn pointerTarget.object;\n}\n\nfunction replace(pointerTarget: PointerTarget, value: any): any {\n\tlet index = parseInt(pointerTarget.segment, 10);\n\tif (Array.isArray(pointerTarget.target) && !isNaN(index)) {\n\t\tpointerTarget.target.splice(index, 1, value);\n\t} else {\n\t\tpointerTarget.target[pointerTarget.segment] = value;\n\t}\n\treturn pointerTarget.object;\n}\n\nfunction remove(pointerTarget: PointerTarget): any {\n\tif (Array.isArray(pointerTarget.target)) {\n\t\tpointerTarget.target.splice(parseInt(pointerTarget.segment, 10), 1);\n\t} else {\n\t\tdelete pointerTarget.target[pointerTarget.segment];\n\t}\n\treturn pointerTarget.object;\n}\n\nfunction inverse(operation: PatchOperation, state: any): PatchOperation[] {\n\tif (operation.op === OperationType.ADD) {\n\t\tconst op: RemovePatchOperation = {\n\t\t\top: OperationType.REMOVE,\n\t\t\tpath: operation.path\n\t\t};\n\t\tconst test: TestPatchOperation = {\n\t\t\top: OperationType.TEST,\n\t\t\tpath: operation.path,\n\t\t\tvalue: operation.value\n\t\t};\n\t\treturn [test, op];\n\t} else if (operation.op === OperationType.REPLACE) {\n\t\tconst value = operation.path.get(state);\n\t\tlet op: RemovePatchOperation | ReplacePatchOperation;\n\t\tif (value === undefined) {\n\t\t\top = {\n\t\t\t\top: OperationType.REMOVE,\n\t\t\t\tpath: operation.path\n\t\t\t};\n\t\t} else {\n\t\t\top = {\n\t\t\t\top: OperationType.REPLACE,\n\t\t\t\tpath: operation.path,\n\t\t\t\tvalue: operation.path.get(state)\n\t\t\t};\n\t\t}\n\t\tconst test: TestPatchOperation = {\n\t\t\top: OperationType.TEST,\n\t\t\tpath: operation.path,\n\t\t\tvalue: operation.value\n\t\t};\n\t\treturn [test, op];\n\t} else {\n\t\treturn [\n\t\t\t{\n\t\t\t\top: OperationType.ADD,\n\t\t\t\tpath: operation.path,\n\t\t\t\tvalue: operation.path.get(state)\n\t\t\t}\n\t\t];\n\t}\n}\n\nexport class Patch<T = any> {\n\tprivate _operations: PatchOperation<T>[];\n\n\tconstructor(operations: PatchOperation<T> | PatchOperation<T>[]) {\n\t\tthis._operations = Array.isArray(operations) ? operations : [operations];\n\t}\n\n\tpublic apply(object: any): PatchResult<T> {\n\t\tlet undoOperations: PatchOperation<T>[] = [];\n\t\tconst patchedObject = this._operations.reduce((patchedObject, next) => {\n\t\t\tlet object;\n\t\t\tconst pointerTarget = walk(next.path.segments, patchedObject);\n\t\t\tswitch (next.op) {\n\t\t\t\tcase OperationType.ADD:\n\t\t\t\t\tobject = add(pointerTarget, next.value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OperationType.REPLACE:\n\t\t\t\t\tobject = replace(pointerTarget, next.value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OperationType.REMOVE:\n\t\t\t\t\tobject = remove(pointerTarget);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OperationType.TEST:\n\t\t\t\t\tconst current = pointerTarget.target[pointerTarget.segment];\n\t\t\t\t\tif (!isEqual(current, next.value)) {\n\t\t\t\t\t\tconst location = next.path.path;\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Test operation failure at \"${location}\". ${getFriendlyDifferenceMessage(\n\t\t\t\t\t\t\t\tnext.value,\n\t\t\t\t\t\t\t\tcurrent\n\t\t\t\t\t\t\t)}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn patchedObject;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('Unknown operation');\n\t\t\t}\n\t\t\tundoOperations = [...inverse(next, patchedObject), ...undoOperations];\n\t\t\treturn object;\n\t\t}, object);\n\t\treturn { object: patchedObject, undoOperations };\n\t}\n}\n","import Set from '../../shim/Set';\nimport { from } from '../../shim/array';\n\nexport function isObject(value: any): value is Object {\n\treturn Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport function isEqual(a: any, b: any): boolean {\n\tif (Array.isArray(a) && Array.isArray(b)) {\n\t\treturn a.length === b.length && a.every((element: any, i: number) => isEqual(element, b[i]));\n\t} else if (isObject(a) && isObject(b)) {\n\t\tconst keysForA = Object.keys(a).sort();\n\t\tconst keysForB = Object.keys(b).sort();\n\t\treturn isEqual(keysForA, keysForB) && keysForA.every((key) => isEqual(a[key], b[key]));\n\t} else {\n\t\treturn a === b;\n\t}\n}\n\nfunction findArrayDifference(a: any[], b: any[]): number {\n\tconst min = Math.min(a.length, b.length);\n\tfor (let i = 0; i < min; i++) {\n\t\tif (!isEqual(a[i], b[i])) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\tif (a.length !== b.length) {\n\t\treturn min;\n\t}\n\n\treturn -1;\n}\n\nfunction findShallowObjectKeyDifference(a: { [key: string]: any }, b: { [key: string]: any }): string | undefined {\n\tconst keys = from(new Set([...Object.keys(a), ...Object.keys(b)]).values());\n\n\tfor (let key of keys) {\n\t\tif (!isEqual(a[key], b[key])) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n\nexport function getFriendlyDifferenceMessage(expected: any, actual: any): string {\n\tconst actualType = getFriendlyTypeName(actual);\n\tconst expectedType = getFriendlyTypeName(expected);\n\n\tif (Array.isArray(expected) && Array.isArray(actual)) {\n\t\tconst offset = findArrayDifference(expected, actual);\n\n\t\tif (offset !== -1) {\n\t\t\treturn `Arrays differed at offset ${offset}`;\n\t\t}\n\t\treturn 'Arrays are identical';\n\t} else if (isObject(expected) && isObject(actual)) {\n\t\tconst key = findShallowObjectKeyDifference(expected, actual);\n\n\t\tif (key) {\n\t\t\tconst expectedValue = expected[key];\n\t\t\tconst actualValue = actual[key];\n\t\t\treturn `Expected \"${expectedValue}\" for object property ${key} but got \"${actualValue}\" instead`;\n\t\t}\n\t\treturn 'Objects are identical';\n\t} else if (!isEqual(expected, actual)) {\n\t\tif (actualType === expectedType) {\n\t\t\treturn `Expected \"${expected}\" but got \"${actual}\" instead`;\n\t\t} else {\n\t\t\treturn `Expected ${expectedType} \"${expected}\" but got ${actualType} \"${actual}\" instead`;\n\t\t}\n\t}\n\n\treturn 'Values are identical';\n}\n\nfunction getFriendlyTypeName(value: any): string {\n\tif (Array.isArray(value)) {\n\t\treturn 'array';\n\t}\n\treturn typeof value;\n}\n","import { destroy, invalidator, create } from '../vdom';\nimport injector from '../middleware/injector';\nimport Store, { StatePaths, Path } from '../../stores/Store';\nimport { Process } from '../../stores/process';\n\nconst factory = create({ destroy, invalidator, injector });\n\nexport const createStoreMiddleware = <S = any>(initial?: (store: Store<S>) => void) => {\n\tlet store = new Store<S>();\n\tlet initialized = false;\n\tinitial && initial(store);\n\tconst storeMiddleware = factory(({ middleware: { destroy, invalidator, injector } }) => {\n\t\tconst handles: any[] = [];\n\t\tdestroy(() => {\n\t\t\tlet handle: any;\n\t\t\twhile ((handle = handles.pop())) {\n\t\t\t\thandle();\n\t\t\t}\n\t\t});\n\t\tif (!initialized) {\n\t\t\tconst injectedStore = injector.get<Store<S>>('state');\n\t\t\tif (injectedStore) {\n\t\t\t\tstore = injectedStore;\n\t\t\t}\n\t\t\tinitialized = true;\n\t\t}\n\t\tconst registeredPaths: string[] = [];\n\t\tconst path: StatePaths<S> = (path: any, ...segments: any) => {\n\t\t\treturn (store as any).path(path, ...segments);\n\t\t};\n\t\treturn {\n\t\t\tget<U = any>(path: Path<S, U>): U {\n\t\t\t\tif (registeredPaths.indexOf(path.path) === -1) {\n\t\t\t\t\tconst handle = store.onChange(path, () => {\n\t\t\t\t\t\tinvalidator();\n\t\t\t\t\t});\n\t\t\t\t\thandles.push(() => handle.remove());\n\t\t\t\t\tregisteredPaths.push(path.path);\n\t\t\t\t}\n\t\t\t\treturn store.get(path);\n\t\t\t},\n\t\t\tpath,\n\t\t\tat<U = any>(path: Path<S, U[]>, index: number) {\n\t\t\t\treturn store.at(path, index);\n\t\t\t},\n\t\t\texecutor<T extends Process<any, any>>(process: T): ReturnType<T> {\n\t\t\t\treturn process(store) as any;\n\t\t\t}\n\t\t};\n\t});\n\treturn storeMiddleware;\n};\n\nexport default createStoreMiddleware;\n","import createStoreMiddleware from \"@dojo/framework/core/middleware/store\";\nimport State from \"../interfaces\";\n\nexport default createStoreMiddleware<State>();\n","import * as accordionPane from './accordion.m.css';\nimport * as avatar from './avatar.m.css';\nimport * as breadcrumbGroup from './breadcrumb-group.m.css';\nimport * as button from './button.m.css';\nimport * as calendar from './calendar.m.css';\nimport * as card from './card.m.css';\nimport * as checkboxGroup from './checkbox-group.m.css';\nimport * as checkbox from './checkbox.m.css';\nimport * as chipTypeahead from './chip-typeahead.m.css';\nimport * as chip from './chip.m.css';\nimport * as dateInput from './date-input.m.css';\nimport * as dialog from './dialog.m.css';\nimport * as floatingActionButton from './floating-action-button.m.css';\nimport * as form from './form.m.css';\nimport * as gridBody from './grid-body.m.css';\nimport * as gridCell from './grid-cell.m.css';\nimport * as gridFooter from './grid-footer.m.css';\nimport * as gridHeader from './grid-header.m.css';\nimport * as gridPaginatedFooter from './grid-paginated-footer.m.css';\nimport * as gridPlaceholderRow from './grid-placeholder-row.m.css';\nimport * as gridRow from './grid-row.m.css';\nimport * as grid from './grid.m.css';\nimport * as headerCard from './header-card.m.css';\nimport * as header from './header.m.css';\nimport * as helperText from './helper-text.m.css';\nimport * as icon from './icon.m.css';\nimport * as label from './label.m.css';\nimport * as listItem from './list-item.m.css';\nimport * as list from './list.m.css';\nimport * as loadingIndicator from './loading-indicator.m.css';\nimport * as menuItem from './menu-item.m.css';\nimport * as nativeSelect from './native-select.m.css';\nimport * as outlinedButton from './outlined-button.m.css';\nimport * as pagination from './pagination.m.css';\nimport * as passwordInput from './password-input.m.css';\nimport * as progress from './progress.m.css';\nimport * as radioGroup from './radio-group.m.css';\nimport * as radio from './radio.m.css';\nimport * as raisedButton from './raised-button.m.css';\nimport * as rangeSlider from './range-slider.m.css';\nimport * as result from './result.m.css';\nimport * as select from './select.m.css';\nimport * as slidePane from './slide-pane.m.css';\nimport * as slider from './slider.m.css';\nimport * as snackbar from './snackbar.m.css';\nimport * as speedDial from './speed-dial.m.css';\nimport * as switchControl from './switch.m.css';\nimport * as tabContainer from './tab-container.m.css';\nimport * as textArea from './text-area.m.css';\nimport * as textInput from './text-input.m.css';\nimport * as threeColumnLayout from './three-column-layout.m.css';\nimport * as timePicker from './time-picker.m.css';\nimport * as titlePane from './title-pane.m.css';\nimport * as tooltip from './tooltip.m.css';\nimport * as twoColumnLayout from './two-column-layout.m.css';\nimport * as typeahead from './typeahead.m.css';\nimport * as darkVariant from './variants/dark.m.css';\nimport * as defaultVariant from './variants/default.m.css';\n\nexport default {\n\ttheme: {\n\t\t'@dojo/widgets/accordion': accordionPane,\n\t\t'@dojo/widgets/avatar': avatar,\n\t\t'@dojo/widgets/breadcrumb-group': breadcrumbGroup,\n\t\t'@dojo/widgets/button': button,\n\t\t'@dojo/widgets/calendar': calendar,\n\t\t'@dojo/widgets/card': card,\n\t\t'@dojo/widgets/checkbox-group': checkboxGroup,\n\t\t'@dojo/widgets/checkbox': checkbox,\n\t\t'@dojo/widgets/chip': chip,\n\t\t'@dojo/widgets/date-input': dateInput,\n\t\t'@dojo/widgets/dialog': dialog,\n\t\t'@dojo/widgets/floating-action-button': floatingActionButton,\n\t\t'@dojo/widgets/form': form,\n\t\t'@dojo/widgets/grid-body': gridBody,\n\t\t'@dojo/widgets/grid-cell': gridCell,\n\t\t'@dojo/widgets/grid-footer': gridFooter,\n\t\t'@dojo/widgets/grid-header': gridHeader,\n\t\t'@dojo/widgets/grid-placeholder-row': gridPlaceholderRow,\n\t\t'@dojo/widgets/grid-paginated-footer': gridPaginatedFooter,\n\t\t'@dojo/widgets/grid-row': gridRow,\n\t\t'@dojo/widgets/grid': grid,\n\t\t'@dojo/widgets/header-card': headerCard,\n\t\t'@dojo/widgets/header': header,\n\t\t'@dojo/widgets/helper-text': helperText,\n\t\t'@dojo/widgets/icon': icon,\n\t\t'@dojo/widgets/label': label,\n\t\t'@dojo/widgets/list-item': listItem,\n\t\t'@dojo/widgets/loading-indicator': loadingIndicator,\n\t\t'@dojo/widgets/menu-item': menuItem,\n\t\t'@dojo/widgets/chip-typeahead': chipTypeahead,\n\t\t'@dojo/widgets/list': list,\n\t\t'@dojo/widgets/outlined-button': outlinedButton,\n\t\t'@dojo/widgets/native-select': nativeSelect,\n\t\t'@dojo/widgets/pagination': pagination,\n\t\t'@dojo/widgets/password-input': passwordInput,\n\t\t'@dojo/widgets/progress': progress,\n\t\t'@dojo/widgets/radio-group': radioGroup,\n\t\t'@dojo/widgets/radio': radio,\n\t\t'@dojo/widgets/raised-button': raisedButton,\n\t\t'@dojo/widgets/range-slider': rangeSlider,\n\t\t'@dojo/widgets/result': result,\n\t\t'@dojo/widgets/select': select,\n\t\t'@dojo/widgets/slide-pane': slidePane,\n\t\t'@dojo/widgets/slider': slider,\n\t\t'@dojo/widgets/snackbar': snackbar,\n\t\t'@dojo/widgets/speed-dial': speedDial,\n\t\t'@dojo/widgets/switch': switchControl,\n\t\t'@dojo/widgets/tab-container': tabContainer,\n\t\t'@dojo/widgets/text-area': textArea,\n\t\t'@dojo/widgets/text-input': textInput,\n\t\t'@dojo/widgets/three-column-layout': threeColumnLayout,\n\t\t'@dojo/widgets/time-picker': timePicker,\n\t\t'@dojo/widgets/title-pane': titlePane,\n\t\t'@dojo/widgets/tooltip': tooltip,\n\t\t'@dojo/widgets/two-column-layout': twoColumnLayout,\n\t\t'@dojo/widgets/typeahead': typeahead\n\t},\n\tvariants: {\n\t\tdefault: defaultVariant,\n\t\tdark: darkVariant\n\t}\n};\n","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/accordion.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/accordion\",\"root\":\"accordion-m__root__Rxs8b\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/avatar.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/avatar\",\"root\":\"avatar-m__root__1VkSv\",\"avatarColor\":\"avatar-m__avatarColor__3OmuK\",\"avatarColorSecondary\":\"avatar-m__avatarColorSecondary__vkqqN\",\"small\":\"avatar-m__small__2Tqpi\",\"medium\":\"avatar-m__medium__2_v9Q\",\"large\":\"avatar-m__large__1bumt\",\"circle\":\"avatar-m__circle__2IbnP\",\"square\":\"avatar-m__square__32U8B\",\"rounded\":\"avatar-m__rounded__dtC5b\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/breadcrumb-group.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/breadcrumb-group\",\"root\":\"breadcrumb-group-m__root__2c_G5\",\"listItem\":\"breadcrumb-group-m__listItem__3N7sj\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/button\",\"root\":\"button-m__root__28pvq\",\"pressed\":\"button-m__pressed__3sV_C\",\"disabled\":\"button-m__disabled__f4Azn\",\"label\":\"button-m__label__mkUVZ\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/calendar.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/calendar\",\"root\":\"calendar-m__root__1tLGM\",\"dateGrid\":\"calendar-m__dateGrid__3Deul\",\"weekday\":\"calendar-m__weekday__IVdDz\",\"date\":\"calendar-m__date__2HZ0l\",\"abbr\":\"calendar-m__abbr__NAXva\",\"todayDate\":\"calendar-m__todayDate__1X8CM\",\"inactiveDate\":\"calendar-m__inactiveDate__2Gk9b\",\"selectedDate\":\"calendar-m__selectedDate__2X9KT\",\"topMatter\":\"calendar-m__topMatter__3N546\",\"monthTrigger\":\"calendar-m__monthTrigger__3PjRC\",\"yearTrigger\":\"calendar-m__yearTrigger__iE25Z\",\"previous\":\"calendar-m__previous__ScgW3\",\"next\":\"calendar-m__next__3VwlS\",\"monthTriggerActive\":\"calendar-m__monthTriggerActive__17804\",\"yearTriggerActive\":\"calendar-m__yearTriggerActive__2SWmn\",\"calendarPagingIcon\":\"calendar-m__calendarPagingIcon__EmDza icon-m__icon__2JzPg\",\"monthGrid\":\"calendar-m__monthGrid__D5Viu\",\"yearGrid\":\"calendar-m__yearGrid__2btl0\",\"monthFields\":\"calendar-m__monthFields__25gUW\",\"yearFields\":\"calendar-m__yearFields__316-R\",\"monthRadio\":\"calendar-m__monthRadio__q9SIE\",\"yearRadio\":\"calendar-m__yearRadio__1KTig\",\"monthRadioLabel\":\"calendar-m__monthRadioLabel__1FkZH\",\"yearRadioLabel\":\"calendar-m__yearRadioLabel__16Ui_\",\"monthRadioChecked\":\"calendar-m__monthRadioChecked__3uX63\",\"yearRadioChecked\":\"calendar-m__yearRadioChecked__SkQUn\",\"monthRadioInput\":\"calendar-m__monthRadioInput__3p-Ha\",\"yearRadioInput\":\"calendar-m__yearRadioInput__1jypV\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/card.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/card\",\"root\":\"card-m__root__2O8hE\",\"actions\":\"card-m__actions__16a2H\",\"actionButtons\":\"card-m__actionButtons__I3DkN\",\"actionIcons\":\"card-m__actionIcons__1txrb\",\"primary\":\"card-m__primary__X0sgt\",\"content\":\"card-m__content__1yyco\",\"media\":\"card-m__media__2VVB0\",\"mediaSquare\":\"card-m__mediaSquare__1V7A9\",\"media16by9\":\"card-m__media16by9__2iLHJ\",\"header\":\"card-m__header__294wg\",\"titleWrapper\":\"card-m__titleWrapper__1vlU9\",\"contentWrapper\":\"card-m__contentWrapper__2XDys\",\"title\":\"card-m__title__1st_D\",\"subtitle\":\"card-m__subtitle__2a3KJ\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/checkbox-group.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/checkbox-group\",\"root\":\"checkbox-group-m__root__1BVCZ\",\"legend\":\"checkbox-group-m__legend__2lYxD label-m__root__2OY2Q\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/checkbox.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/checkbox\",\"root\":\"checkbox-m__root__25_UT\",\"input\":\"checkbox-m__input__k7une\",\"inputWrapper\":\"checkbox-m__inputWrapper__J_orM icon-m__checkIcon___SgNE icon-m__icon__2JzPg\",\"checked\":\"checkbox-m__checked__2GgYs\",\"focused\":\"checkbox-m__focused__1ox0Y\",\"onLabel\":\"checkbox-m__onLabel__2S2Uj\",\"offLabel\":\"checkbox-m__offLabel__3YMm8\",\"disabled\":\"checkbox-m__disabled__1rzbj\",\"readonly\":\"checkbox-m__readonly__1z_i8\",\"invalid\":\"checkbox-m__invalid__3uIrz\",\"valid\":\"checkbox-m__valid__3n96h\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/chip-typeahead.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/chip-typeahead\",\"root\":\"chip-typeahead-m__root__sjZeg\",\"value\":\"chip-typeahead-m__value__2uqjJ\",\"selectedIcon\":\"chip-typeahead-m__selectedIcon__3Y90y\",\"input\":\"chip-typeahead-m__input__2EPdN\",\"inputWrapper\":\"chip-typeahead-m__inputWrapper__2u6zp\",\"values\":\"chip-typeahead-m__values__ebPIz\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/chip.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/chip\",\"root\":\"chip-m__root__38BHL\",\"label\":\"chip-m__label__qUnxa\",\"closeIcon\":\"chip-m__closeIcon__1SV6f\",\"clickable\":\"chip-m__clickable__1N1eC\",\"disabled\":\"chip-m__disabled__2k7b5\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/date-input.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/date-input\",\"root\":\"date-input-m__root__2Yzvp\",\"input\":\"date-input-m__input__3TdOm\",\"toggleCalendarButton\":\"date-input-m__toggleCalendarButton__3qDqH\",\"popup\":\"date-input-m__popup__1ZIaA\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/dialog.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/dialog\",\"root\":\"dialog-m__root__NAZCT\",\"main\":\"dialog-m__main__3spJM\",\"underlayVisible\":\"dialog-m__underlayVisible__3Eqbz\",\"title\":\"dialog-m__title__1P-PZ\",\"content\":\"dialog-m__content__6tbsZ\",\"close\":\"dialog-m__close__2sN1M\",\"closeIcon\":\"dialog-m__closeIcon__3LrDH\",\"actions\":\"dialog-m__actions__sY9bD\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/floating-action-button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/floating-action-button\",\"root\":\"floating-action-button-m__root__2piV7\",\"extended\":\"floating-action-button-m__extended__2XVgZ\",\"small\":\"floating-action-button-m__small__2P-SA\",\"pressed\":\"floating-action-button-m__pressed__2TjQj button-m__pressed__3sV_C\",\"label\":\"floating-action-button-m__label__2Cyv7 button-m__label__mkUVZ\",\"disabled\":\"floating-action-button-m__disabled__1eqKe\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/form.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/form\",\"groupRoot\":\"form-m__groupRoot__xOvIb\",\"column\":\"form-m__column__c4hQg\",\"fieldRoot\":\"form-m__fieldRoot__fLBSE\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-body.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-body\",\"root\":\"grid-body-m__root__2zbEx\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-cell.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-cell\",\"root\":\"grid-cell-m__root__34wXf\",\"input\":\"grid-cell-m__input__2g0he\",\"edit\":\"grid-cell-m__edit__3hH3_\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-footer.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-footer\",\"root\":\"grid-footer-m__root__3p2-L\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-header\",\"root\":\"grid-header-m__root__HYjsh\",\"cell\":\"grid-header-m__cell__2HBju\",\"sortable\":\"grid-header-m__sortable__Cdm4W\",\"sorted\":\"grid-header-m__sorted__280sg\",\"sort\":\"grid-header-m__sort__31J7s\",\"-webkit-filter\":\"grid-header-m__filter__2Yr-S\",\"filter\":\"grid-header-m__filter__2Yr-S\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-paginated-footer.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-paginated-footer\",\"root\":\"grid-paginated-footer-m__root__23Cev\",\"details\":\"grid-paginated-footer-m__details__3Fazr\",\"more\":\"grid-paginated-footer-m__more__1mDXK\",\"pageNav\":\"grid-paginated-footer-m__pageNav__2afTM\",\"pageNumber\":\"grid-paginated-footer-m__pageNumber__2lhSZ\",\"active\":\"grid-paginated-footer-m__active__iaKed\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-placeholder-row.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-placeholder-row\",\"root\":\"grid-placeholder-row-m__root__UivAF grid-row-m__root__NKTOq\",\"loading\":\"grid-placeholder-row-m__loading__2UpDv\",\"spin\":\"grid-placeholder-row-m__spin__11VRU\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid-row.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-row\",\"root\":\"grid-row-m__root__NKTOq\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/grid.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid\",\"root\":\"grid-m__root__3e-Fb\",\"header\":\"grid-m__header__Xgbwh\",\"filterGroup\":\"grid-m__filterGroup__lccgY\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/header-card.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/header-card\",\"root\":\"header-card-m__root__l4KKu\",\"header\":\"header-card-m__header__3iFIG\",\"headerContent\":\"header-card-m__headerContent__2Kz4-\",\"avatar\":\"header-card-m__avatar__kU5oC\",\"title\":\"header-card-m__title__3M9XE\",\"subtitle\":\"header-card-m__subtitle__2o1Ge\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/header\",\"root\":\"header-m__root__1WDVi\",\"row\":\"header-m__row__3ZCgD\",\"primary\":\"header-m__primary__1cNeA\",\"secondary\":\"header-m__secondary__3uElU\",\"sticky\":\"header-m__sticky__1tiQe\",\"leading\":\"header-m__leading__1C73V\",\"title\":\"header-m__title__2xNxF\",\"actions\":\"header-m__actions__3hd87\",\"action\":\"header-m__action__3QPqq\",\"trailing\":\"header-m__trailing__r7k1p\",\"spacer\":\"header-m__spacer__1njcI\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/helper-text.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/helper-text\",\"root\":\"helper-text-m__root__2HclM\",\"text\":\"helper-text-m__text__2vI1Z\",\"valid\":\"helper-text-m__valid__Qigz0\",\"invalid\":\"helper-text-m__invalid__zjI0U\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/icon.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/icon\",\"icon\":\"icon-m__icon__2JzPg\",\"clockIcon\":\"icon-m__clockIcon__2S5I7\",\"eyeIcon\":\"icon-m__eyeIcon__2UFzR\",\"eyeSlashIcon\":\"icon-m__eyeSlashIcon__1-jQ3\",\"plusIcon\":\"icon-m__plusIcon__C2hAP\",\"minusIcon\":\"icon-m__minusIcon__3yz6D\",\"checkIcon\":\"icon-m__checkIcon___SgNE\",\"closeIcon\":\"icon-m__closeIcon__60eFq\",\"leftIcon\":\"icon-m__leftIcon__86k5d\",\"rightIcon\":\"icon-m__rightIcon__2jTr-\",\"upIcon\":\"icon-m__upIcon__C6vkW\",\"downIcon\":\"icon-m__downIcon__3YfxA\",\"upAltIcon\":\"icon-m__upAltIcon__2h5Ff\",\"downAltIcon\":\"icon-m__downAltIcon__1A_IX\",\"searchIcon\":\"icon-m__searchIcon__1GW-J\",\"barsIcon\":\"icon-m__barsIcon__33nJG\",\"settingsIcon\":\"icon-m__settingsIcon__mUrFB\",\"alertIcon\":\"icon-m__alertIcon__tXYqM\",\"helpIcon\":\"icon-m__helpIcon__AWIZ1\",\"infoIcon\":\"icon-m__infoIcon__2nM8O\",\"cancelIcon\":\"icon-m__cancelIcon__1gsBL\",\"checkedBoxIcon\":\"icon-m__checkedBoxIcon__31wsd\",\"phoneIcon\":\"icon-m__phoneIcon__2SYAN\",\"editIcon\":\"icon-m__editIcon__3z6EX\",\"dateIcon\":\"icon-m__dateIcon__2Olo4\",\"linkIcon\":\"icon-m__linkIcon__1NOjY\",\"locationIcon\":\"icon-m__locationIcon__2MwHF\",\"secureIcon\":\"icon-m__secureIcon__2AVyP\",\"mailIcon\":\"icon-m__mailIcon__10-91\",\"starIcon\":\"icon-m__starIcon__1FwGO\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/label.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/label\",\"root\":\"label-m__root__2OY2Q\",\"secondary\":\"label-m__secondary__2JgjM\",\"required\":\"label-m__required__2p83z\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/list-item.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/list-item\",\"root\":\"list-item-m__root__dUG_o\",\"active\":\"list-item-m__active__3tRcp\",\"selected\":\"list-item-m__selected__1sHW5\",\"disabled\":\"list-item-m__disabled__3VhQD\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/list.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/list\",\"root\":\"list-m__root__3ee5s\",\"menu\":\"list-m__menu___jE2c\",\"divider\":\"list-m__divider__2pf5q\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/loading-indicator.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/loading-indicator\",\"root\":\"loading-indicator-m__root__1S_Do\",\"buffer\":\"loading-indicator-m__buffer__2N8zx\",\"bar\":\"loading-indicator-m__bar__2QYHV\",\"primary\":\"loading-indicator-m__primary__1OxUO\",\"progress\":\"loading-indicator-m__progress__EoLqt\",\"inner\":\"loading-indicator-m__inner__3GTa2\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/menu-item.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/menu-item\",\"root\":\"menu-item-m__root__1HFs_\",\"active\":\"menu-item-m__active__2iRtR\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/native-select.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/native-select\",\"root\":\"native-select-m__root__2A2KN\",\"inputWrapper\":\"native-select-m__inputWrapper__3v5as\",\"select\":\"native-select-m__select__7f8t5\",\"arrow\":\"native-select-m__arrow__3m49y\",\"disabled\":\"native-select-m__disabled__1TaDk\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/outlined-button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/outlined-button\",\"root\":\"outlined-button-m__root__1j7qa\",\"pressed\":\"outlined-button-m__pressed__2iuy5\",\"label\":\"outlined-button-m__label__SD9Eo\",\"disabled\":\"outlined-button-m__disabled__3POiK\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/pagination.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/pagination\",\"root\":\"pagination-m__root__L7VlA\",\"linksWrapper\":\"pagination-m__linksWrapper__2jtOw\",\"prev\":\"pagination-m__prev__vFB9g\",\"next\":\"pagination-m__next__xfQUm\",\"icon\":\"pagination-m__icon__31lQc\",\"label\":\"pagination-m__label__HE0yp\",\"link\":\"pagination-m__link__3db0U\",\"currentPage\":\"pagination-m__currentPage__InwXB\",\"selectWrapper\":\"pagination-m__selectWrapper__3vqQT\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/password-input.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/password-input\",\"root\":\"password-input-m__root__gH-Hk text-input-m__root__2yKLO\",\"toggleButton\":\"password-input-m__toggleButton__3vybc\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/progress.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/progress\",\"root\":\"progress-m__root__2XHXH\",\"output\":\"progress-m__output__vKJw-\",\"bar\":\"progress-m__bar__sB2fc\",\"progress\":\"progress-m__progress__2V0hS\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/radio-group.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/radio-group\",\"root\":\"radio-group-m__root__3VCTl\",\"legend\":\"radio-group-m__legend__ZiCRP\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/radio.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/radio\",\"root\":\"radio-m__root__VefZS\",\"input\":\"radio-m__input__3HytW\",\"inputWrapper\":\"radio-m__inputWrapper__1Zous\",\"radioBackground\":\"radio-m__radioBackground__8HvZ0\",\"radioOuter\":\"radio-m__radioOuter__2v-Zg\",\"radioInner\":\"radio-m__radioInner__3f5tV\",\"focused\":\"radio-m__focused__3nJo1\",\"checked\":\"radio-m__checked__2yRzd\",\"disabled\":\"radio-m__disabled__B3g_v\",\"readonly\":\"radio-m__readonly__5rLlH\",\"invalid\":\"radio-m__invalid__EfJNI\",\"valid\":\"radio-m__valid__1-Pzb\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/raised-button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/raised-button\",\"root\":\"raised-button-m__root__8rmm4\",\"pressed\":\"raised-button-m__pressed__3Yr5d\",\"label\":\"raised-button-m__label__3lT-j\",\"disabled\":\"raised-button-m__disabled__1M-Lp\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/range-slider.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/range-slider\",\"root\":\"range-slider-m__root__104A-\",\"inputWrapper\":\"range-slider-m__inputWrapper__lTUjE\",\"filled\":\"range-slider-m__filled__XRsjH\",\"thumb\":\"range-slider-m__thumb__qHz5U\",\"input\":\"range-slider-m__input__3dB_q\",\"focused\":\"range-slider-m__focused__355WG\",\"hasOutput\":\"range-slider-m__hasOutput__3mwgj\",\"outputTooltip\":\"range-slider-m__outputTooltip__2RQbx\",\"output\":\"range-slider-m__output__2IwRP\",\"disabled\":\"range-slider-m__disabled__3wxJ-\",\"readonly\":\"range-slider-m__readonly__2W81l\",\"invalid\":\"range-slider-m__invalid__3jnT9\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/result.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/result\",\"root\":\"result-m__root__1s4Al\",\"iconWrapper\":\"result-m__iconWrapper__1nmlS\",\"statusIcon\":\"result-m__statusIcon__3PF2C\",\"iconIcon\":\"result-m__iconIcon__Nu6vI icon-m__icon__2JzPg\",\"actions\":\"result-m__actions__22GMb\",\"actionButtons\":\"result-m__actionButtons__1epeV\",\"contentWrapper\":\"result-m__contentWrapper__2esbQ\",\"content\":\"result-m__content__3eBjD\",\"titleWrapper\":\"result-m__titleWrapper__EmGbs\",\"title\":\"result-m__title__1yfPE\",\"subtitle\":\"result-m__subtitle__3e_ij\",\"alert\":\"result-m__alert__3NSTh\",\"error\":\"result-m__error__1KZCT\",\"info\":\"result-m__info__2T1qW\",\"success\":\"result-m__success__3deJM\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/select.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/select\",\"root\":\"select-m__root__vSQDW\",\"trigger\":\"select-m__trigger__cQJRQ\",\"value\":\"select-m__value__9wfTg\",\"placeholder\":\"select-m__placeholder__2UlZ1\",\"arrow\":\"select-m__arrow__3p83i\",\"menuWrapper\":\"select-m__menuWrapper__OePaS\",\"disabled\":\"select-m__disabled__3zDEP\",\"readonly\":\"select-m__readonly__3yUii\",\"invalid\":\"select-m__invalid__2G3mI\",\"valid\":\"select-m__valid__3Kr6J\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/slide-pane.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/slide-pane\",\"root\":\"slide-pane-m__root__2TQzV\",\"underlayVisible\":\"slide-pane-m__underlayVisible__2dXLD\",\"pane\":\"slide-pane-m__pane__2_qpl\",\"content\":\"slide-pane-m__content__3B7wz\",\"title\":\"slide-pane-m__title__2Dwsi\",\"close\":\"slide-pane-m__close__2Tp8H\",\"closeIcon\":\"slide-pane-m__closeIcon__2mfZI\",\"left\":\"slide-pane-m__left__3pSsl\",\"right\":\"slide-pane-m__right__1qBIY\",\"top\":\"slide-pane-m__top__2Ouqt\",\"bottom\":\"slide-pane-m__bottom__2Wm48\",\"slideIn\":\"slide-pane-m__slideIn__QKvGX\",\"slideOut\":\"slide-pane-m__slideOut__3C58O\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/slider.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/slider\",\"root\":\"slider-m__root__1fQ-Q\",\"inputWrapper\":\"slider-m__inputWrapper__1HBJS\",\"track\":\"slider-m__track__2DGhE\",\"fill\":\"slider-m__fill__4FdQ9\",\"thumb\":\"slider-m__thumb__26xCj\",\"input\":\"slider-m__input__2DrOc\",\"outputTooltip\":\"slider-m__outputTooltip__yLzFO\",\"output\":\"slider-m__output__KwPnR\",\"vertical\":\"slider-m__vertical__1lBx-\",\"disabled\":\"slider-m__disabled__LideH\",\"readonly\":\"slider-m__readonly__14OUb\",\"invalid\":\"slider-m__invalid__2uaAc\",\"valid\":\"slider-m__valid__1F6U5\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/snackbar.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/snackbar\",\"root\":\"snackbar-m__root__3DYwa\",\"content\":\"snackbar-m__content__2dPUv\",\"label\":\"snackbar-m__label__D1Lkn\",\"actions\":\"snackbar-m__actions__fQHb6\",\"open\":\"snackbar-m__open__1trii\",\"success\":\"snackbar-m__success__FTGZN\",\"error\":\"snackbar-m__error__1sGDA\",\"leading\":\"snackbar-m__leading__342U0\",\"stacked\":\"snackbar-m__stacked__1Wgqe\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/speed-dial.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/speed-dial\",\"root\":\"speed-dial-m__root__25wC2\",\"up\":\"speed-dial-m__up__1Xsxq\",\"actions\":\"speed-dial-m__actions__1Vkvy\",\"action\":\"speed-dial-m__action__5KwHg\",\"down\":\"speed-dial-m__down__3XH-V\",\"left\":\"speed-dial-m__left__t60Au\",\"right\":\"speed-dial-m__right__3uqbN\",\"open\":\"speed-dial-m__open__e_6NN\",\"actionTransition\":\"speed-dial-m__actionTransition__3Pc7W\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/switch.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/switch\",\"root\":\"switch-m__root__1GFoq\",\"inputWrapper\":\"switch-m__inputWrapper__37KNw\",\"label\":\"switch-m__label__2IMGM\",\"thumb\":\"switch-m__thumb__3xB-N\",\"track\":\"switch-m__track__1U4WH\",\"underlay\":\"switch-m__underlay__1_0bA\",\"nativeControl\":\"switch-m__nativeControl__3isSL\",\"checked\":\"switch-m__checked__o1Lvq\",\"disabled\":\"switch-m__disabled__1Mmee\",\"readonly\":\"switch-m__readonly__o78hN\",\"focused\":\"switch-m__focused__w-VpX\",\"offLabel\":\"switch-m__offLabel__2b7ED\",\"onLabel\":\"switch-m__onLabel__2nH4q\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/tab-container.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/tab-container\",\"root\":\"tab-container-m__root__3r_9I\",\"tabButtons\":\"tab-container-m__tabButtons__3D03V\",\"tabButton\":\"tab-container-m__tabButton__1Rtmj\",\"disabledTabButton\":\"tab-container-m__disabledTabButton__-3pyN\",\"activeTabButton\":\"tab-container-m__activeTabButton__3O1dt\",\"close\":\"tab-container-m__close__2R550\",\"closeable\":\"tab-container-m__closeable__2ZpGe\",\"tab\":\"tab-container-m__tab__14Gr-\",\"alignLeft\":\"tab-container-m__alignLeft__3uIbQ\",\"tabs\":\"tab-container-m__tabs__2dU3y\",\"alignRight\":\"tab-container-m__alignRight__NCc1f\",\"alignBottom\":\"tab-container-m__alignBottom__3hOao\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/text-area.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/text-area\",\"root\":\"text-area-m__root__2NVkd\",\"input\":\"text-area-m__input__Vx3AV\",\"disabled\":\"text-area-m__disabled__ZjqlP\",\"readonly\":\"text-area-m__readonly__3NoH6\",\"invalid\":\"text-area-m__invalid__3Z9ZA\",\"valid\":\"text-area-m__valid__2mAxH\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/text-input.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/text-input\",\"root\":\"text-input-m__root__2yKLO\",\"wrapper\":\"text-input-m__wrapper__2yH16\",\"input\":\"text-input-m__input__2OqON\",\"inputWrapper\":\"text-input-m__inputWrapper__Bf3IL\",\"focused\":\"text-input-m__focused__Bz5Ku\",\"disabled\":\"text-input-m__disabled__1KyyV\",\"readonly\":\"text-input-m__readonly__2dMQl\",\"invalid\":\"text-input-m__invalid__wejhD\",\"valid\":\"text-input-m__valid__2CP3A\",\"addonRoot\":\"text-input-m__addonRoot__DQCsb\",\"addonFilled\":\"text-input-m__addonFilled__18Yy8\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/three-column-layout.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/three-column-layout\",\"leading\":\"three-column-layout-m__leading__10E32\",\"trailing\":\"three-column-layout-m__trailing__1__Yd\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/time-picker.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/time-picker\",\"root\":\"time-picker-m__root__2uRZv\",\"input\":\"time-picker-m__input__3e4IV\",\"toggleMenuButton\":\"time-picker-m__toggleMenuButton__1eb2P\",\"popup\":\"time-picker-m__popup__3ANpm\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/title-pane.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/title-pane\",\"root\":\"title-pane-m__root__1cmLi\",\"titleButton\":\"title-pane-m__titleButton__hMwuO\",\"content\":\"title-pane-m__content__33Ft6\",\"contentTransition\":\"title-pane-m__contentTransition__1GWDf\",\"open\":\"title-pane-m__open__2GqTv\",\"arrow\":\"title-pane-m__arrow__1RFCq\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/tooltip.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/tooltip\",\"root\":\"tooltip-m__root__1j6Iv\",\"content\":\"tooltip-m__content__1N9s1\",\"bottom\":\"tooltip-m__bottom__2dGm7\",\"top\":\"tooltip-m__top__2QOyL\",\"left\":\"tooltip-m__left__2vQ3o\",\"right\":\"tooltip-m__right__j1o47\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/two-column-layout.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/two-column-layout\",\"small\":\"two-column-layout-m__small__2sTw2\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/typeahead.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/typeahead\",\"root\":\"typeahead-m__root__2Em3D\",\"triggerWrapper\":\"typeahead-m__triggerWrapper__3ijZT\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/variants/dark.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/dark\",\"root\":\"dark-m__root__36GXf\"};;","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/dojo/variants/default.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/default\",\"root\":\"default-m__root__1h1rO\"};;","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"web-settlers/App\",\"root\":\"App-m__root__2249f4LaFAR\",\"main\":\"App-m__main__2249f42QTbx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"web-settlers/Footer\",\"root\":\"Footer-m__root__2249f41zPMX\"};","require('/home/paul/IdeaProjects/WebSettlers/ui/node_modules/@dojo/widgets/theme/default/header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/header\",\"root\":\"header-m__root__1Wu1d\",\"row\":\"header-m__row__3e0zv\",\"primary\":\"header-m__primary__2eL4c\",\"secondary\":\"header-m__secondary__keWQu\",\"sticky\":\"header-m__sticky__3Rxub\",\"leading\":\"header-m__leading__EGBZf\",\"title\":\"header-m__title__3AvG7\",\"actions\":\"header-m__actions__3MCfn\",\"action\":\"header-m__action__1tpKL\",\"trailing\":\"header-m__trailing__1qern\",\"spacer\":\"header-m__spacer__3HogK\"};;","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"web-settlers/Header\",\"root\":\"Header-m__root__2249f415XcQ\",\"link\":\"Header-m__link__2249f42GEKH\",\"selected\":\"Header-m__selected__2249f412TDn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"web-settlers/glPanel\",\"root\":\"glPanel-m__root__2249f42Ej83\",\"canvas\":\"glPanel-m__canvas__2249f41BqOe\"};","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n"],"sourceRoot":""}