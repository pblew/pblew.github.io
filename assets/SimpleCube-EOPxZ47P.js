import{c as k,f as E,C as B,a as O,n as h,u as U,G as z,d as K,b as j,e as b,r as W,g as $,t as q,V as Y}from"./VTextField-DDrnnwWa.js";import{d as S,r as P,c as R,o as v,u as L,w as t,a as n,V as H,b as p,e as l,f as x,t as V,g as C,h as J,F as D,i as Q,j as X,m as N,k as Z,l as ee,n as oe,p as I,q as ne}from"./index-B19zD5W-.js";import{V as te}from"./VMenu-CcLqGeYH.js";function re(o){const s=o.getParameter(o.VERSION);let e=o.getParameter(o.VENDOR),a=o.getParameter(o.RENDERER);const u=o.getSupportedExtensions()??[],d=!navigator.userAgent.includes("Firefox/")&&o.getExtension("WEBGL_debug_renderer_info");return d&&(e=o.getParameter(d.UNMASKED_VENDOR_WEBGL),a=o.getParameter(d.UNMASKED_RENDERER_WEBGL)),{version:s,vendor:e,renderer:a,extensions:u}}const ae=({vertexes:o,normals:s,colours:e,indexes:a})=>({vertexes:Float32Array.from(o),normals:Float32Array.from(s),colours:Float32Array.from(e),indexes:Uint32Array.from(a)});var se=`#version 300 es
precision highp float;in vec4 v_colour;in vec3 v_normal;uniform vec3 u_reverseLightDirection;out vec4 outColour;void main(void){vec3 normal=normalize(v_normal);float light=dot(normal,u_reverseLightDirection);outColour=v_colour;outColour.rgb*=light;}`,ie=`#version 300 es
in vec3 a_position;in vec4 a_colour;in vec3 a_normal;uniform mat4 u_projection;uniform mat4 u_modelView;out vec4 v_colour;out vec3 v_normal;void main(void){gl_Position=u_projection*u_modelView*vec4(a_position,1.0);v_colour=a_colour;v_normal=a_normal;}`;const le=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],ue=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],ce=[1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],de=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],fe={vertexes:le,normals:ue,colours:ce,indexes:de},me=10,ve=S({__name:"CubeScene",setup(o,{expose:s}){const e=[se],a=[ie],u=k(B.LookAt,E(3,2,3),E(0,0,0)),d=O(),f=E(.75,.5,.25);h(f,f);let c;const y=P(),_=U(u,(r,[i],{keyboard:A},{projection:g,view:F})=>{A.bind("KeyL",()=>c.setDrawMode(r.LINE_LOOP)),A.bind("KeyK",()=>c.setDrawMode(r.TRIANGLES)),i.setClearColour(K),i.bindUniform("u_projection",m=>r.uniformMatrix4fv(m,!1,g)),i.bindUniform("u_modelView",m=>r.uniformMatrix4fv(m,!1,F)),i.bindUniform("u_reverseLightDirection",m=>r.uniform3fv(m,f)),y.value=re(r);const{colours:T,indexes:w,normals:G,vertexes:M}=ae(fe);c=j(r,i,r.TRIANGLES,w.length,b("a_position",M,3,r.FLOAT),b("a_normal",G,3,r.FLOAT),b("a_colour",T,4,r.FLOAT),$(w))},void 0,()=>{c.activate(),c.draw()},r=>{const i=r/me;u.arc(i),W(f,f,d,q(i))},()=>{c?.delete()});return s({fps:_.fps,info:y}),(r,i)=>(v(),R(z,{ref:"glPanel","fragment-sources":e,"vertex-sources":a,onInit:L(_).init,onResize:L(_).resize,onExit:L(_).exit},null,8,["onInit","onResize","onExit"]))}}),_e=S({__name:"GlInfo",props:{info:{}},setup(o){return(s,e)=>(v(),R(te,{location:"bottom center"},{activator:t(({props:a})=>[n(Q,{location:"top"},{activator:t(({props:u})=>[n(X,N(N(a,u),{icon:"mdi-information-variant-circle-outline",tile:""}),null,16)]),default:t(()=>[e[0]||(e[0]=l(" WebGL Information ",-1))]),_:2},1024)]),default:t(()=>[n(H,{density:"compact","bg-color":"secondary"},{default:t(()=>[n(p,null,{default:t(()=>[...e[1]||(e[1]=[l("Version",-1)])]),_:1}),n(x,null,{default:t(()=>[l(V(o.info?.version),1)]),_:1}),n(p,null,{default:t(()=>[...e[2]||(e[2]=[l("Vendor",-1)])]),_:1}),n(x,null,{default:t(()=>[l(V(o.info?.vendor),1)]),_:1}),n(p,null,{default:t(()=>[...e[3]||(e[3]=[l("Renderer",-1)])]),_:1}),n(x,null,{default:t(()=>[l(V(o.info?.renderer),1)]),_:1}),n(p,null,{default:t(()=>[...e[4]||(e[4]=[l("Extensions",-1)])]),_:1}),n(x,null,{default:t(()=>[(v(!0),C(D,null,J(o.info?.extensions,a=>(v(),C(D,{key:a},[l(V(a),1),e[5]||(e[5]=Z("br",null,null,-1))],64))),128))]),_:1})]),_:1})]),_:1}))}}),Re=S({__name:"SimpleCube",setup(o){const s=P(void 0);return(e,a)=>(v(),R(ee,{fluid:"",class:"d-flex flex-column pa-0"},{default:t(()=>[n(ne,{class:"flex-grow-0 flex-shrink-0",color:"secondary"},{default:t(()=>[n(oe),n(I,{class:"mr-3","max-width":"56"},{default:t(()=>[n(_e,{info:s.value?.info},null,8,["info"])]),_:1}),n(I,{class:"mr-3","max-width":"56"},{default:t(()=>[n(Y,{class:"noMouse","hide-details":"",label:"fps","model-value":s.value?.fps,readonly:""},null,8,["model-value"])]),_:1})]),_:1}),n(ve,{ref_key:"cubeScene",ref:s},null,512)]),_:1}))}});export{Re as default};
