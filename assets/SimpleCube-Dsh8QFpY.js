import{r as y,g as G,b as D,y as I,m as P,c as O,G as z,a as F,f as d,C as V,d as M,n as T,u as U,e as k,h as j,i as f,j as B,k as K,t as $}from"./Float32Buffer-Ew42swuu.js";import{d as x,a as W,u as X,_ as Y,r as q,o as L,c as R}from"./index-Bx4UKsSY.js";import{C as H}from"./Colours-CbczBoye.js";import{N as J}from"./Normals-D8NgAgJk.js";function Q(e){var o;const i=e.getParameter(e.VERSION);let a=e.getParameter(e.VENDOR),r=e.getParameter(e.RENDERER);const n=(o=e.getSupportedExtensions())!=null?o:[],t=!navigator.userAgent.includes("Firefox/")&&e.getExtension("WEBGL_debug_renderer_info");return t&&(a=e.getParameter(t.UNMASKED_VENDOR_WEBGL),r=e.getParameter(t.UNMASKED_RENDERER_WEBGL)),{version:i,vendor:a,renderer:r,extensions:n}}const _=4,E=[y,G,D,I,P,O],C=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Z=E.reduce((e,i,a)=>{const{r,g:n,b:t,a:o}=i,u=a*_;return e.setColour(u,r,n,t,o),e.setColour(u+1,r,n,t,o),e.setColour(u+2,r,n,t,o),e.setColour(u+3,r,n,t,o),e},new H(E.length*_)),ee=C.reduce((e,i,a)=>{const[r,n,t]=i,o=a*_;return e.setNormal(o,r,n,t),e.setNormal(o+1,r,n,t),e.setNormal(o+2,r,n,t),e.setNormal(o+3,r,n,t),e},new J(C.length*_)),oe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),ne=new Uint32Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]);function te(){return{colours:Z,normals:ee,vertexes:oe,indexes:ne}}var re=`#version 300 es
precision highp float;in vec4 v_colour;in vec3 v_normal;uniform vec3 u_reverseLightDirection;out vec4 outColour;void main(void){vec3 normal=normalize(v_normal);float light=dot(normal,u_reverseLightDirection);outColour=v_colour;outColour.rgb*=light;}`,se=`#version 300 es
in vec3 a_position;in vec4 a_colour;in vec3 a_normal;uniform mat4 u_projection;uniform mat4 u_modelView;out vec4 v_colour;out vec3 v_normal;void main(void){gl_Position=u_projection*u_modelView*vec4(a_position,1.0);v_colour=a_colour;v_normal=a_normal;}`;const ae=x({name:"CubeScene",components:{GlPanel:z},setup(){const e=[re],i=[se],a=F(V.LookAt,d(3,2,3),d(0,0,0)),r=M(),n=d(.75,.5,.25);T(n,n);const t=10;let o,u;const l=U(a,(s,[c],S,b)=>{const{keyboard:v}=S;v.bind("KeyL",()=>o.setDrawMode(s.LINES)),v.bind("KeyK",()=>o.setDrawMode(s.TRIANGLES));const{projection:A,view:N}=b;c.setClearColour(k),c.bindUniform("u_projection",m=>s.uniformMatrix4fv(m,!1,A)),c.bindUniform("u_modelView",m=>s.uniformMatrix4fv(m,!1,N)),c.bindUniform("u_reverseLightDirection",m=>s.uniform3fv(m,n)),u=Q(s);const{colours:g,indexes:p,normals:h,vertexes:w}=te();o=j(s,c,s.TRIANGLES,p.length,f("a_position",w,3,s.FLOAT),f("a_normal",h,3,s.FLOAT),f("a_colour",g,4,s.FLOAT),K(p))},void 0,()=>{const{fps:s}=l;o.activate(),o.draw(),W({...u,fps:X(s)})},s=>{const c=s/t;a.arc(c),B(n,n,r,$(c))},()=>{o.delete()});return{fragmentSources:e,vertexSources:i,onGLInit:l.init,onGLResize:l.resize,onGLExit:l.exit}}});function ie(e,i,a,r,n,t){const o=q("gl-panel");return L(),R(o,{ref:"glPanel","fragment-sources":e.fragmentSources,"vertex-sources":e.vertexSources,onInit:e.onGLInit,onResize:e.onGLResize,onExit:e.onGLExit},null,8,["fragment-sources","vertex-sources","onInit","onResize","onExit"])}const ce=Y(ae,[["render",ie]]),Ee=x({__name:"SimpleCube",setup(e){return(i,a)=>(L(),R(ce,{ref:"cubeScene"},null,512))}});export{Ee as default};
