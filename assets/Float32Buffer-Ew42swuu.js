var $t=Object.defineProperty;var Dt=(t,e,n)=>e in t?$t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>(Dt(t,typeof e!="symbol"?e+"":e,n),n);import{C as gt,f as R,H as ct,bl as vt,z as Mt,J as tt,bm as Bt,K as mt,bn as Nt,bo as zt,bc as Ot,d as kt,b as bt,i as Gt,ag as K,l as J,a1 as ht,a$ as Xt,bh as Wt,bp as Yt,ah as dt,aK as Ht,N as qt,aL as Kt,aW as jt,ad as Qt,E as Jt,aO as xt,aI as Zt,I as te,aP as ee,_ as ne,a3 as ie,o as re,x as se,bq as Ct,br as oe,e as Y,v as ae,n as ce,p as ot,s as he,ap as fe,bs as de,bt as ue,g as le,G as pe,bu as ve,bv as me,u as xe,a as _e}from"./index-Bx4UKsSY.js";const ye=Mt({target:[Object,Array]},"v-dialog-transition"),Ee=gt()({name:"VDialogTransition",props:ye(),setup(t,e){let{slots:n}=e;const i={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,s){var f;await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),r.style.visibility="";const{x:o,y:a,sx:c,sy:d,speed:u}=yt(t.target,r),l=tt(r,[{transform:`translate(${o}px, ${a}px) scale(${c}, ${d})`,opacity:0},{}],{duration:225*u,easing:Bt});(f=_t(r))==null||f.forEach(h=>{tt(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*u,easing:mt})}),l.finished.then(()=>s())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,s){var f;await new Promise(h=>requestAnimationFrame(h));const{x:o,y:a,sx:c,sy:d,speed:u}=yt(t.target,r);tt(r,[{},{transform:`translate(${o}px, ${a}px) scale(${c}, ${d})`,opacity:0}],{duration:125*u,easing:Nt}).finished.then(()=>s()),(f=_t(r))==null||f.forEach(h=>{tt(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*u,easing:mt})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>t.target?R(vt,ct({name:"dialog-transition"},i,{css:!1}),n):R(vt,{name:"dialog-transition"},n)}});function _t(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function yt(t,e){const n=zt(t),i=Ot(e),[r,s]=getComputedStyle(e).transformOrigin.split(" ").map(w=>parseFloat(w)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||a==="left"?c-=n.width/2:(o==="right"||a==="right")&&(c+=n.width/2);let d=n.top+n.height/2;o==="top"||a==="top"?d-=n.height/2:(o==="bottom"||a==="bottom")&&(d+=n.height/2);const u=n.width/i.width,l=n.height/i.height,f=Math.max(1,u,l),h=u/f||0,m=l/f||0,x=i.width*i.height/(window.innerWidth*window.innerHeight),v=x>.12?Math.min(1.5,(x-.12)*10+1):1;return{x:c-(r+i.left),y:d-(s+i.top),sx:h,sy:m,speed:v}}var Q=1e-6,L=typeof Float32Array!="undefined"?Float32Array:Array,Ae=Math.PI/180;function X(t){return t*Ae}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function we(){var t=new L(9);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function N(){var t=new L(16);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Te(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ge(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function be(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],u=e[8],l=e[9],f=e[10],h=e[11],m=e[12],x=e[13],v=e[14],w=e[15],p=n*a-i*o,_=n*c-r*o,E=n*d-s*o,A=i*c-r*a,g=i*d-s*a,y=r*d-s*c,T=u*x-l*m,b=u*v-f*m,D=u*w-h*m,V=l*v-f*x,k=l*w-h*x,j=f*w-h*v,S=p*j-_*k+E*V+A*D-g*b+y*T;return S?(S=1/S,t[0]=(a*j-c*k+d*V)*S,t[1]=(r*k-i*j-s*V)*S,t[2]=(x*y-v*g+w*A)*S,t[3]=(f*g-l*y-h*A)*S,t[4]=(c*D-o*j-d*b)*S,t[5]=(n*j-r*D+s*b)*S,t[6]=(v*E-m*y-w*_)*S,t[7]=(u*y-f*E+h*_)*S,t[8]=(o*k-a*D+d*T)*S,t[9]=(i*D-n*k-s*T)*S,t[10]=(m*g-x*E+w*p)*S,t[11]=(l*E-u*g-h*p)*S,t[12]=(a*b-o*V-c*T)*S,t[13]=(n*V-i*b+r*T)*S,t[14]=(x*_-m*A-v*p)*S,t[15]=(u*A-l*_+f*p)*S,t):null}function Ce(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=e[6],u=e[7],l=e[8],f=e[9],h=e[10],m=e[11],x=e[12],v=e[13],w=e[14],p=e[15],_=n[0],E=n[1],A=n[2],g=n[3];return t[0]=_*i+E*a+A*l+g*x,t[1]=_*r+E*c+A*f+g*v,t[2]=_*s+E*d+A*h+g*w,t[3]=_*o+E*u+A*m+g*p,_=n[4],E=n[5],A=n[6],g=n[7],t[4]=_*i+E*a+A*l+g*x,t[5]=_*r+E*c+A*f+g*v,t[6]=_*s+E*d+A*h+g*w,t[7]=_*o+E*u+A*m+g*p,_=n[8],E=n[9],A=n[10],g=n[11],t[8]=_*i+E*a+A*l+g*x,t[9]=_*r+E*c+A*f+g*v,t[10]=_*s+E*d+A*h+g*w,t[11]=_*o+E*u+A*m+g*p,_=n[12],E=n[13],A=n[14],g=n[15],t[12]=_*i+E*a+A*l+g*x,t[13]=_*r+E*c+A*f+g*v,t[14]=_*s+E*d+A*h+g*w,t[15]=_*o+E*u+A*m+g*p,t}function ei(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function et(t,e,n){var i=n[0],r=n[1],s=n[2],o=Math.hypot(i,r,s),a,c,d;return o<Q?null:(o=1/o,i*=o,r*=o,s*=o,a=Math.sin(e),c=Math.cos(e),d=1-c,t[0]=i*i*d+c,t[1]=r*i*d+s*a,t[2]=s*i*d-r*a,t[3]=0,t[4]=i*r*d-s*a,t[5]=r*r*d+c,t[6]=s*r*d+i*a,t[7]=0,t[8]=i*s*d+r*a,t[9]=r*s*d-i*a,t[10]=s*s*d+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Se(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,d=n*o,u=i*o,l=i*a,f=r*o,h=r*a,m=r*c,x=s*o,v=s*a,w=s*c;return t[0]=1-l-m,t[1]=u+w,t[2]=f-v,t[3]=0,t[4]=u-w,t[5]=1-d-m,t[6]=h+x,t[7]=0,t[8]=f+v,t[9]=h-x,t[10]=1-d-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Le(t,e,n,i,r){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t}var Re=Le;function Pe(t,e,n,i,r,s,o){var a=1/(e-n),c=1/(i-r),d=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(o+s)*d,t[15]=1,t}var Ie=Pe;function ft(t,e,n,i){var r,s,o,a,c,d,u,l,f,h,m=e[0],x=e[1],v=e[2],w=i[0],p=i[1],_=i[2],E=n[0],A=n[1],g=n[2];return Math.abs(m-E)<Q&&Math.abs(x-A)<Q&&Math.abs(v-g)<Q?ge(t):(u=m-E,l=x-A,f=v-g,h=1/Math.hypot(u,l,f),u*=h,l*=h,f*=h,r=p*f-_*l,s=_*u-w*f,o=w*l-p*u,h=Math.hypot(r,s,o),h?(h=1/h,r*=h,s*=h,o*=h):(r=0,s=0,o=0),a=l*o-f*s,c=f*r-u*o,d=u*s-l*r,h=Math.hypot(a,c,d),h?(h=1/h,a*=h,c*=h,d*=h):(a=0,c=0,d=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=l,t[7]=0,t[8]=o,t[9]=d,t[10]=f,t[11]=0,t[12]=-(r*m+s*x+o*v),t[13]=-(a*m+c*x+d*v),t[14]=-(u*m+l*x+f*v),t[15]=1,t)}function Ue(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}var Fe=Ce;function P(){var t=new L(3);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function z(t){var e=new L(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ve(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function F(t,e,n){var i=new L(3);return i[0]=t,i[1]=e,i[2]=n,i}function B(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function C(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function H(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function $(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function $e(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function O(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function De(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function W(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function nt(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function it(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],c=e[1],d=e[2],u=r*d-s*c,l=s*a-i*d,f=i*c-r*a,h=r*f-s*l,m=s*u-i*f,x=i*l-r*u,v=o*2;return u*=v,l*=v,f*=v,h*=2,m*=2,x*=2,t[0]=a+u+h,t[1]=c+l+m,t[2]=d+f+x,t}function ni(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}var Et=H,Be=Ve;(function(){var t=P();return function(e,n,i,r,s,o){var a,c;for(n||(n=3),i||(i=0),r?c=Math.min(r*n+i,e.length):c=e.length,a=i;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();function Ne(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function ii(t,e,n,i){var r=new L(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function ri(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ze(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(function(){var t=Ne();return function(e,n,i,r,s,o){var a,c;for(n||(n=4),i||(i=0),r?c=Math.min(r*n+i,e.length):c=e.length,a=i;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();function st(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Oe(t,e,n){n=n*.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function at(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],d=n[1],u=n[2],l=n[3],f,h,m,x,v;return h=r*c+s*d+o*u+a*l,h<0&&(h=-h,c=-c,d=-d,u=-u,l=-l),1-h>Q?(f=Math.acos(h),m=Math.sin(f),x=Math.sin((1-i)*f)/m,v=Math.sin(i*f)/m):(x=1-i,v=i),t[0]=x*r+v*c,t[1]=x*s+v*d,t[2]=x*o+v*u,t[3]=x*a+v*l,t}function ke(t,e){var n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),t[r]=.5*i,i=.5/i,t[3]=(e[s*3+o]-e[o*3+s])*i,t[s]=(e[s*3+r]+e[r*3+s])*i,t[o]=(e[o*3+r]+e[r*3+o])*i}return t}var St=ze;(function(){var t=P(),e=F(1,0,0),n=F(0,1,0);return function(i,r,s){var o=De(r,s);return o<-.999999?(W(t,e,r),Be(t)<1e-6&&W(t,n,r),O(t,t),Oe(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(W(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,St(i,i))}})();(function(){var t=st(),e=st();return function(n,i,r,s,o,a){return at(t,i,o,a),at(e,r,s,a),at(n,t,e,2*a*(1-a)),n}})();var At=function(){var t=we();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],St(e,ke(e,t))}}();function Ge(){var t=new L(2);return L!=Float32Array&&(t[0]=0,t[1]=0),t}function Xe(t,e,n){return t[0]=e,t[1]=n,t}function si(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function We(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}(function(){var t=Ge();return function(e,n,i,r,s,o){var a,c;for(n||(n=2),i||(i=0),r?c=Math.min(r*n+i,e.length):c=e.length,a=i;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function oi(t,e,n=e.length){const i=1/n;Xe(t,0,0),e.forEach(r=>We(t,t,r,i))}function ai(t,e,n=e.length){const i=1/n;B(t,0,0,0),e.forEach(r=>$e(t,t,r,i))}const Ye=(t,...e)=>{const n=[t[0]];return e.forEach((i,r)=>{n.push(i.toLocaleString(void 0,{maximumFractionDigits:3,minimumFractionDigits:3}).padStart(6)),n.push(t[r+1])}),n.join("")};function wt(t){return Ye`mat4(
    ${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}
    ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}
    ${t[8]}, ${t[9]}, ${t[10]}, ${t[11]}
    ${t[12]}, ${t[13]}, ${t[14]}, ${t[15]}
    )`}class He{constructor(e,n,i){M(this,"matrix");M(this,"worldUp");M(this,"u");M(this,"v");M(this,"n");M(this,"position");M(this,"_temp1");M(this,"_temp2");M(this,"_temp3");M(this,"_hasMoved");this.matrix=N(),this.worldUp=z(i),ft(this.matrix,e,n,this.worldUp),console.log("lookat",wt(this.matrix)),this.u=F(this.matrix[0],this.matrix[4],this.matrix[8]),this.v=F(this.matrix[1],this.matrix[5],this.matrix[9]),this.n=F(this.matrix[2],this.matrix[6],this.matrix[10]),this.position=F(this.matrix[12],this.matrix[13],this.matrix[14]),this.update(),this._hasMoved=!1,this._temp1=P(),this._temp2=P(),this._temp3=P()}hasMoved(){const e=this._hasMoved;return this._hasMoved=!1,e}moveTo(e,n,i){this.matrix[12]=e,this.matrix[13]=n,this.matrix[14]=i}update(){this.matrix[0]=this.u[0],this.matrix[1]=this.v[0],this.matrix[2]=this.n[0],this.matrix[3]=0,this.matrix[4]=this.u[1],this.matrix[5]=this.v[1],this.matrix[6]=this.n[1],this.matrix[7]=0,this.matrix[8]=this.u[2],this.matrix[9]=this.v[2],this.matrix[10]=this.n[2],this.matrix[11]=0,this.updatePosition()}updatePosition(){this.matrix[12]=this.position[0],this.matrix[13]=this.position[1],this.matrix[14]=this.position[2],this.matrix[15]=1,console.log("update",wt(this.matrix)),this._hasMoved=!0}lookAt(e,n,i){ft(this.matrix,this.position,F(e,n,i),this.worldUp)}truck(e){$(this._temp1,this.u,e),C(this.position,this.position,this._temp1),this.updatePosition()}pedestal(e){$(this._temp1,this.v,e),C(this.position,this.position,this._temp1),this.updatePosition()}dolly(e){$(this._temp1,this.n,e),C(this.position,this.position,this._temp1),this.updatePosition()}track(e,n){$(this._temp1,this.u,e),$(this._temp2,this.n,n),C(this._temp3,this._temp1,this._temp2),C(this.position,this.position,this._temp3),this.updatePosition()}arc(e){window.console.log("arc",e),this.update()}tilt(e){window.console.log("tilt",e),this.update()}pan(e){window.console.log("pan",e),this.update()}cant(e){window.console.log("cant",e),this.update()}}class qe{constructor(e,n,i){M(this,"matrix");M(this,"position");M(this,"target");M(this,"up");M(this,"worldUp");M(this,"_u");M(this,"_v");M(this,"_n");M(this,"_temp");M(this,"_transform");M(this,"_hasMoved");this.matrix=N(),this.position=z(e),this.target=z(n),this.up=z(i),this.worldUp=z(i),this._u=P(),this._v=P(),this._n=P(),this._temp=P(),this._transform=N(),this._hasMoved=!1,this.update()}update(){ft(this.matrix,this.position,this.target,this.up),this._hasMoved=!0}hasMoved(){const e=this._hasMoved;return this._hasMoved=!1,e}moveTo(e,n,i){B(this.position,e,n,i),this.update()}lookAt(e,n,i){B(this.target,e,n,i),this.update()}get n(){return Et(this._n,this.position,this.target),O(this._n,this._n),this._n}get flatN(){return Et(this._n,this.position,this.target),this._n[2]=0,O(this._n,this._n),this._n}get u(){return W(this._u,this.worldUp,this.n),O(this._u,this._u),this._u}get v(){return W(this._v,this.n,this.u),O(this._v,this._v),this._v}truck(e){$(this._u,this.u,e),C(this.position,this.position,this._u),C(this.target,this.target,this._u),this.update()}pedestal(e){$(this._v,this.v,e),C(this.position,this.position,this._v),C(this.target,this.target,this._v),this.update()}dolly(e){$(this._n,this.n,e),C(this.position,this.position,this._n),this.update()}track(e,n){$(this._u,this.u,e),$(this._n,this.flatN,n),C(this._temp,this._u,this._n),C(this.position,this.position,this._temp),C(this.target,this.target,this._temp),this.update()}arc(e){const n=X(e);H(this._temp,this.position,this.target),et(this._transform,n,this.v),nt(this._temp,this._temp,this._transform),C(this.position,this._temp,this.target),this.update()}tilt(e){const n=X(e);H(this._temp,this.target,this.position),et(this._transform,n,this.u),nt(this._temp,this._temp,this._transform),C(this.target,this._temp,this.position),this.update()}pan(e){const n=X(e);H(this._temp,this.target,this.position),et(this._transform,n,this.v),nt(this._temp,this._temp,this._transform),C(this.target,this._temp,this.position),this.update()}cant(e){const n=X(e);H(this._temp,this.up,this.position),et(this._transform,n,this.n),nt(this._temp,this._temp,this._transform),C(this.up,this._temp,this.position),this.update()}}class Ke{constructor(e,n,i){M(this,"matrix");M(this,"orientation");M(this,"flatOrientation");M(this,"position");M(this,"target");M(this,"worldUp");M(this,"front");M(this,"right");M(this,"up");M(this,"delta");M(this,"_hasMoved");this.matrix=N(),this.orientation=st(),this.flatOrientation=st(),this.position=z(e),this.target=z(n),this.worldUp=z(i),this.front=P(),this.right=P(),this.up=P(),this.delta=P(),this.update(),this._hasMoved=!1}update(){H(this.front,this.target,this.position),O(this.front,this.front),W(this.right,this.front,this.worldUp),O(this.right,this.right),W(this.up,this.right,this.front),O(this.up,this.up),At(this.orientation,this.front,this.right,this.up),At(this.flatOrientation,this.front,this.right,this.worldUp),Se(this.matrix,this.orientation),this.updatePosition()}updatePosition(){const[e,n,i]=this.position;this.matrix[12]=-(this.matrix[0]*e+this.matrix[4]*n+this.matrix[8]*i),this.matrix[13]=-(this.matrix[1]*e+this.matrix[5]*n+this.matrix[9]*i),this.matrix[14]=-(this.matrix[2]*e+this.matrix[6]*n+this.matrix[10]*i),this._hasMoved=!1}hasMoved(){const e=this._hasMoved;return this._hasMoved=!1,e}moveTo(e,n,i){B(this.position,e,n,i),this.update()}lookAt(e,n,i){B(this.target,e,n,i),this.update()}truck(e){B(this.delta,e,0,0),it(this.delta,this.delta,this.flatOrientation),C(this.position,this.position,this.delta),this.updatePosition()}pedestal(e){B(this.delta,0,e,0),it(this.delta,this.delta,this.flatOrientation),C(this.position,this.position,this.delta),this.updatePosition()}dolly(e){B(this.delta,0,0,e),it(this.delta,this.delta,this.orientation),C(this.position,this.position,this.delta),this.updatePosition()}track(e,n){B(this.delta,e,0,n),it(this.delta,this.delta,this.flatOrientation),C(this.position,this.position,this.delta),C(this.target,this.target,this.delta),this.updatePosition()}arc(e){const n=this.position[0]-this.target[0],i=this.position[1]-this.target[1],r=Math.atan2(n,i),s=Math.sqrt(n*n+i*i);this.moveTo(this.target[0]+s*Math.sin(r+X(e)),this.target[1]+s*Math.cos(r+X(e)),this.position[2]),this.update()}tilt(e){window.console.log("tilt",e)}pan(e){window.console.log("pan",e)}cant(e){window.console.log("cant",e)}}var je=(t=>(t[t.LookAt=0]="LookAt",t[t.Axes=1]="Axes",t[t.Quaternion=2]="Quaternion",t))(je||{});const Qe=F(0,1,0),ci=F(0,0,1);function hi(t,e=F(0,0,0),n=F(0,0,-1),i=Qe){switch(t){case 0:return new qe(e,n,i);case 1:return new He(e,n,i);case 2:return new Ke(e,n,i)}}const q=(t,e=0,n=1)=>Math.max(e,Math.min(n,t)),G=t=>(q(t)*255).toString(16).padStart(2,"0"),rt=t=>q(parseInt(t,16)/255);function U(t){if(t.charAt(0)!=="#"||t.length<7)throw`Invalid colour string: ${t}`;return ut(rt(t.substring(1,3)),rt(t.substring(3,5)),rt(t.substring(5,7)),t.length>=9?rt(t.substring(7,9)):1)}function fi(t){var e,n,i,r;return ut(q((e=t[0])!=null?e:0),q((n=t[1])!=null?n:0),q((i=t[2])!=null?i:0),q((r=t[3])!=null?r:1))}function di(t){return ut(((t&16711680)>>16)/255,((t&65280)>>8)/255,(t&255)/255,1)}function ut(t,e,n,i){return{r:t,g:e,b:n,a:i,toString:(r=!1)=>r?`${G(t)}${G(e)}${G(n)}${G(i)}`:`${G(t)}${G(e)}${G(n)}`,toArray:()=>[t,e,n,i]}}const Je=U("#000000ff"),ui=U("#e5194bff");U("#f48131ff");const li=U("#fde019ff");U("#beee45ff");const pi=U("#3cb243ff"),vi=U("#42d3f3ff"),mi=U("#4363d7ff"),xi=U("#901eb3ff");U("#7f7f7fff");const _i=U("#262626ff");U("#ffffffff");function Ze(t,e){var r,s;const n=e.value,i={passive:!((r=e.modifiers)!=null&&r.active)};window.addEventListener("resize",n,i),t._onResize=Object(t._onResize),t._onResize[e.instance.$.uid]={handler:n,options:i},(s=e.modifiers)!=null&&s.quiet||n()}function tn(t,e){var r;if(!((r=t._onResize)!=null&&r[e.instance.$.uid]))return;const{handler:n,options:i}=t._onResize[e.instance.$.uid];window.removeEventListener("resize",n,i),delete t._onResize[e.instance.$.uid]}const Lt={mounted:Ze,unmounted:tn},{NO_ERROR:en,INVALID_ENUM:nn,INVALID_VALUE:rn,INVALID_OPERATION:sn,OUT_OF_MEMORY:on,INVALID_FRAMEBUFFER_OPERATION:an,CONTEXT_LOST_WEBGL:cn}=WebGL2RenderingContext,hn=Object.freeze(new Map([[en,"No error has been recorded"],[nn,"An unacceptable value has been specified for an enumerated argument"],[rn,"A numeric argument is out of range"],[sn,"The specified command is not allowed for the current state"],[on,"Not enough memory is left to execute the command"],[an,"The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it"],[cn,"The WebGL context is lost"]]));function fn(t){var e;return(e=hn.get(t))!=null?e:`Unknown (${t})`}function dn(t,e){const n=t.getError();throw`${e}: ${fn(n)}`}function Z(t,e,n){return e===null&&dn(t,n),e}function Rt(t){const e=new Map;function n(s){e.forEach((o,a)=>s.withUniform(a,c=>o(c)))}function i(s,o){o?e.set(s,o):e.delete(s)}function r(s,o){o?i(s,a=>t.uniform1i(a,o.textureUnit-t.TEXTURE0)):i(s)}return{apply:n,bindUniform:i,bindTexture:r}}function un(t,e,n){const i=Z(t,t.createProgram(),"Failed to create program");if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw`Failed to link program: ${t.getProgramInfoLog(i)}`;return i}function ln(t,e){const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=new Map;for(let r=0;r<n;r++){const s=t.getActiveUniform(e,r),{name:o,type:a,size:c}=s,d=t.getUniformLocation(e,o);i.set(o,{name:o,type:a,size:c,location:d})}return i}function pn(t,e){const n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=new Map;for(let r=0;r<n;r++){const s=t.getActiveAttrib(e,r),{name:o,type:a,size:c}=s,d=t.getAttribLocation(e,o);i.set(o,{name:o,type:a,size:c,location:d})}return i}function vn(t,e,n){const i=un(t,e.compile(t),n.compile(t)),r=ln(t,i),s=pn(t,i),o=Rt(t),a=[t.BLEND,t.CULL_FACE,t.DEPTH_TEST];let c=t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,d=Je;function u(...y){a.splice(0,a.length,...y)}function l(...y){c=y.reduce((T,b)=>T|b,0)}function f(y){d=y}function h(y,T=!0){if(y.useProgram(i),a.forEach(b=>y.enable(b)),a.includes(y.BLEND)&&y.blendFuncSeparate(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA,y.ONE,y.ONE_MINUS_SRC_ALPHA),T){const{r:b,g:D,b:V,a:k}=d;y.clearColor(b,D,V,k),y.clear(c)}o.apply({withUniform:w})}function m(y){var T;return(T=r.get(y))==null?void 0:T.location}function x(y,T){m(y)!==void 0?o.bindUniform(y,T):console.warn(`Uniform ${y} does not exist on program`)}function v(y,T){m(y)!==void 0?o.bindTexture(y,T):console.warn(`Texture ${y} does not exist on program`)}function w(y,T){const b=m(y);b!==void 0&&T(b)}function p(y){var T;return(T=s.get(y))==null?void 0:T.location}function _(y,T){const b=p(y);b!==void 0&&T(b)}function E(y,T,b,D=!1){_(y,V=>{t.enableVertexAttribArray(V),t.vertexAttribPointer(V,T,b,D,0,0)})}function A(y){_(y,T=>{t.enableVertexAttribArray(T),t.vertexAttribPointer(T,4,t.FLOAT,!1,64,0),t.vertexAttribDivisor(T,1),t.enableVertexAttribArray(T+1),t.vertexAttribPointer(T+1,4,t.FLOAT,!1,64,16),t.vertexAttribDivisor(T+1,1),t.enableVertexAttribArray(T+2),t.vertexAttribPointer(T+2,4,t.FLOAT,!1,64,32),t.vertexAttribDivisor(T+2,1),t.enableVertexAttribArray(T+3),t.vertexAttribPointer(T+3,4,t.FLOAT,!1,64,48),t.vertexAttribDivisor(T+3,1)})}function g(){s.clear(),r.clear(),t.deleteProgram(i)}return{setEnableBits:u,setClearBits:l,setClearColour:f,activate:h,uniform:m,withUniform:w,bindUniform:x,bindTexture:v,attribute:p,bindAttribute:E,bindAttributeMat4:A,delete:g}}function mn(t,e,n){const i=Z(t,t.createShader(e),"Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw`Failed to compile shader: ${t.getShaderInfoLog(i)}`;return i}function Pt(t,e){let n;function i(r){return n===void 0&&(n=mn(r,e,t)),n}return{compile:i}}function xn(t){return Pt(t,WebGL2RenderingContext.FRAGMENT_SHADER)}function _n(t){return Pt(t,WebGL2RenderingContext.VERTEX_SHADER)}function*Tt(...t){const e=t.filter(n=>!!n).map(n=>n[Symbol.iterator]());for(;;){const n=e.map(i=>i.next());if(n.some(({done:i})=>i))break;yield n.map(({value:i})=>i)}}function yn(...t){return{forEach(e){for(const n of Tt(...t))e(...n)},*map(e){for(const n of Tt(...t))yield e(...n)}}}var En=(t=>(t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t))(En||{});const An={projectionMatrix:N(),programs:[]};function wn(t){let e,n;try{e=t.getContext("webgl2",{alpha:!0,antialias:!0,desynchronized:!0,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance",premultipliedAlpha:!1})}catch(i){n=i==null?void 0:i.toString()}if(!e)throw new Error(n!=null?n:"Your browser does not support WebGL2");return e}const Tn=kt({name:"GlPanel",directives:{Resize:Lt},props:{fragmentSources:{type:Array,required:!0},vertexSources:{type:Array,required:!0},projectionMode:{type:Number,required:!1,default:1}},emits:["init","resize","exit"],setup(t,{emit:e}){const n=bt(!1),{loadingStore:i}=Gt(),{setLoading:r}=i,s=K({projectionMatrix:N(),canvasStyle:{},root:void 0,canvas:void 0,gl:void 0,programs:[]}),o=J(()=>!!s.gl);function a(){const{root:f,canvas:h,gl:m}=s;if(!(f&&h&&m))return;const{height:x,width:v}=f.getBoundingClientRect(),{height:w,width:p}=h.getBoundingClientRect();x>0&&v>0&&(p!==v||w!==x)&&(h.height=x,h.width=v,m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight),c(x,v),e("resize",{height:x,width:v}))}function c(f,h){const m=h/f;if(t.projectionMode===0){const x=h/105,v=f/60/m;Ie(s.projectionMatrix,-x,x,-v,v,.1,1e3)}else Re(s.projectionMatrix,X(45),m,.1,500)}const d=ht(()=>t.projectionMode,()=>{const{canvas:f}=s;if(!f)return;const{height:h,width:m}=f.getBoundingClientRect();c(h,m)});function u(){var f;(f=s.canvas)==null||f.focus()}function l(f){s.canvasStyle.cursor=f}return Xt(()=>{try{s.gl=wn(s.canvas)}catch{n.value=!0,r(!1);return}a(),s.programs=Array.from(yn(t.fragmentSources,t.vertexSources).map((f,h)=>vn(s.gl,xn(f),_n(h)))),e("init",{...s}),u()}),Wt(()=>{d(),e("exit");const{gl:f,programs:h}=s;f&&(h.forEach(m=>m.delete()),setTimeout(()=>{var m;return(m=f.getExtension("WEBGL_lose_context"))==null?void 0:m.loseContext()},100))}),Yt(()=>{s.programs.splice(0,s.programs.length),s.gl=void 0}),{...dt(s),unsupported:n,isReady:o,onResize:a,focus:u,setMouseCursor:l}}}),gn=Mt({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Ht({origin:"center center",scrollStrategy:"block",transition:{component:Ee},zIndex:2400})},"VDialog"),Mn=gt()({name:"VDialog",props:gn(),emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n}=e;const i=qt(t,"modelValue"),{scopeId:r}=Kt(),s=bt();function o(c){var l,f;const d=c.relatedTarget,u=c.target;if(d!==u&&((l=s.value)!=null&&l.contentEl)&&((f=s.value)!=null&&f.globalTop)&&![document,s.value.contentEl].includes(u)&&!s.value.contentEl.contains(u)){const h=ee(s.value.contentEl);if(!h.length)return;const m=h[0],x=h[h.length-1];d===m?x.focus():m.focus()}}jt&&ht(()=>i.value&&t.retainFocus,c=>{c?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0}),ht(i,async c=>{var d,u;await Qt(),c?(d=s.value.contentEl)==null||d.focus({preventScroll:!0}):(u=s.value.activatorEl)==null||u.focus({preventScroll:!0})});const a=J(()=>ct({"aria-haspopup":"dialog","aria-expanded":String(i.value)},t.activatorProps));return Jt(()=>{const c=xt.filterProps(t);return R(xt,ct({ref:s,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},c,{modelValue:i.value,"onUpdate:modelValue":d=>i.value=d,"aria-modal":"true",activatorProps:a.value,role:"dialog"},r),{activator:n.activator,default:function(){for(var d=arguments.length,u=new Array(d),l=0;l<d;l++)u[l]=arguments[l];return R(Zt,{root:"VDialog"},{default:()=>{var f;return[(f=n.default)==null?void 0:f.call(n,...u)]}})}})}),te({},s)}}),bn=t=>(ve("data-v-a2fdc0d0"),t=t(),me(),t),Cn={ref:"root",class:"flex-fill"},Sn=bn(()=>Ct("a",{href:"https://www.khronos.org/api/webgl",target:"_blank"},"WebGL2",-1));function Ln(t,e,n,i,r,s){return ie((re(),se("div",Cn,[Ct("canvas",{ref:"canvas",class:"position-absolute",tabindex:"0",style:oe(t.canvasStyle),onClick:e[0]||(e[0]=(...o)=>t.focus&&t.focus(...o))},null,4),R(Mn,{"model-value":t.unsupported},{default:Y(()=>[R(ae,{color:"background"},{default:Y(()=>[R(ce,{class:"bg-error"},{default:Y(()=>[ot("Unsupported browser")]),_:1}),R(he,null,{default:Y(()=>[R(fe,{color:"error",class:"mr-4",icon:"mdi-emoticon-sad-outline",size:"48"}),ot(" Your browser doesn't support "),Sn]),_:1}),R(de),R(ue,null,{default:Y(()=>[R(le),R(pe,{color:"error",variant:"elevated",to:{name:"Home"}},{default:Y(()=>[ot("ok")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])])),[[Lt,t.onResize]])}const yi=ne(Tn,[["render",Ln],["__scopeId","data-v-a2fdc0d0"]]);function It(t,e,n,i,r){const s=Z(t,t.createBuffer(),"Failed to allocate buffer");return t.bindBuffer(e,s),t.bufferData(e,n,i,0,r),s}function Ei(t){return e=>{const n=e.ELEMENT_ARRAY_BUFFER,i=e.STATIC_DRAW,r=1,s=It(e,n,t,i);return{name:"__indexes",target:n,usage:i,size:r,buffer:s}}}function Ai(t,e,n,i,r=0){return(s,o)=>{const a=s.ARRAY_BUFFER,c=s.STATIC_DRAW,d=It(s,a,e,c);return o.bindAttribute(t,n,i),r>0&&s.vertexAttribDivisor(o.attribute(t),r),{name:t,target:a,usage:c,size:n,buffer:d}}}function Rn(t,e){if(t==null)throw e;return t}function Pn(t,e,n,{diffuse:i,normal:r,specular:s},o,a,c,...d){const u=K({buffers:new Map,drawMode:o,instanceCount:c}),l=Z(t,t.createVertexArray(),"Failed to create vertex array object");t.bindVertexArray(l),d.forEach(p=>{const _=p(t,e);u.buffers.set(_.name,_)}),t.bindVertexArray(null),n.bindTexture("u_diffuseMap",i),n.bindTexture("u_normalMap",r),n.bindTexture("u_specularMap",s);function f(){const{drawMode:p}=u;t.bindVertexArray(l),n.apply(e),i==null||i.activate(),r==null||r.activate(),s==null||s.activate(),u.instanceCount>1?t.drawElementsInstanced(p,a,t.UNSIGNED_INT,0,u.instanceCount):t.drawElements(p,a,t.UNSIGNED_INT,0)}function h(p){u.drawMode=p}function m(p){i==null||i.replaceImage(p)}function x(p){u.instanceCount=p}function v(p,_,E,A=0,g=0){const y=Rn(u.buffers.get(p),`Buffer named ${p} not found`),{target:T,buffer:b}=y;t.bindBuffer(T,b),t.bufferSubData(T,A,_,g,E)}function w(){i==null||i.delete(),r==null||r.delete(),s==null||s.delete(),t.deleteVertexArray(l)}return{...dt(u),draw:f,setDrawMode:h,setTextureImage:m,setInstanceCount:x,updateBuffer:v,delete:w}}const In=new Uint8Array([255,255,255,255]),Un=new Uint8Array([128,128,255,255]),Fn=new Uint8Array([0,0,0,255]);function lt(t,e,n,i){const r=Z(t,t.createTexture(),"Failed to create texture");function s(){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,r)}function o(c){s(),c?(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,c),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n)}function a(){t.deleteTexture(r)}return o(i),{textureUnit:e,texture:r,activate:s,replaceImage:o,delete:a}}function Vn(t,e,n=In){return lt(t,t.TEXTURE0,n,e)}function wi(t,e,n=Un){return lt(t,t.TEXTURE1,n,e)}function Ti(t,e,n=Fn){return lt(t,t.TEXTURE2,n,e)}function $n(t,e,n){return{diffuse:t,normal:e,specular:n}}function gi(t,e,n,i,...r){return Dn(t,e,n,i,1,...r)}function Dn(t,e,n,i,r,...s){const o=$n(Vn(t)),a=Rt(t),c=Pn(t,e,a,o,n,i,r,...s);return Bn(t,e,n,c)}function Bn(t,e,n,...i){const r=K({drawMode:n,instanceCount:0});function s(f=!0,h=null){t.bindFramebuffer(t.FRAMEBUFFER,h),e.activate(t,f)}function o(){i.forEach(f=>f.draw()),t.bindVertexArray(null)}function a(f){r.drawMode=f,i.forEach(h=>h.setDrawMode(f))}function c(f){i.forEach(h=>h.setTextureImage(f))}function d(f){r.instanceCount=f,i.forEach(h=>h.setInstanceCount(f))}function u(f,h,m,x=0,v=0){i.forEach(w=>w.updateBuffer(f,h,m,x,v))}function l(){i.forEach(f=>f.delete())}return{...dt(r),activate:s,draw:o,setDrawMode:a,setTexture:c,setInstanceCount:d,updateBuffer:u,delete:l}}const pt={addEventListener:(t,e,n)=>{},removeEventListener:(t,e,n)=>{}};function Ut(t){const e=new Set,n=new Map,i=c=>{n.has(c.code)&&c.preventDefault()},r=c=>{e.add(c.code),i(c)},s=c=>{e.delete(c.code),i(c)};function o(c,d){n.set(c,d)}function a(){n.forEach((c,d)=>{e.has(d)&&c()})}return t.addEventListener("keydown",r),t.addEventListener("keyup",s),{bind:o,apply:a}}const Nn=Ut(pt);var zn=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t))(zn||{}),On=(t=>(t[t.Ctrl=16]="Ctrl",t[t.Alt=32]="Alt",t[t.Shift=64]="Shift",t[t.Meta=128]="Meta",t))(On||{});function kn(){const t=document.createElement("div");t.style.fontSize="initial",t.style.display="none",document.body.appendChild(t);const e=window.getComputedStyle(t).fontSize;return document.body.removeChild(t),e?parseInt(e,10):16}function Gn(t,e){const{ctrlKey:n,altKey:i,shiftKey:r,metaKey:s}=e;return t|(n?16:0)|(i?32:0)|(r?64:0)|(s?128:0)}function Xn(t){return t&15}function Wn(t,e){const{deltaMode:n,deltaY:i}=t;let r=i%50;switch(n){case WheelEvent.DOM_DELTA_PIXEL:r=Math.round(i/e);break;case WheelEvent.DOM_DELTA_LINE:r=i;break;default:window.console.warn("Scroll delta mode not supported, deltaMode="+n+", deltaY="+i)}return r}function Ft(t){const e=kn(),n=new Map,i=new Map,r=new Set,s=new Set,o={x:0,y:0};let a=0;const c=(p,_=!1)=>{const{button:E}=p;(i.has(E)||_)&&p.preventDefault()},d=p=>{const{button:_,offsetX:E,offsetY:A}=p,g=Gn(_,p);n.set(g,{startPosition:{x:E,y:A},currentPosition:{x:E,y:A},movement:{dx:0,dy:0}}),c(p)},u=p=>{const{button:_}=p;[...n.keys()].filter(A=>Xn(A)===_).forEach(A=>n.delete(A)),c(p)},l=p=>{n.clear(),o.x=0,o.y=0,c(p)},f=p=>{const{movementX:_,movementY:E,offsetX:A,offsetY:g}=p;o.x=A,o.y=g,n.forEach(y=>{const{movement:T,currentPosition:b}=y;T.dx=_,T.dy=E,b.x=A,b.y=g}),c(p)},h=p=>{a+=Wn(p,e),c(p,!0)};function m(p,_){i.set(p,_)}function x(p){r.add(p)}function v(p){s.add(p)}function w(){i.forEach((p,_)=>{if(n.has(_)){const E=n.get(_);p(E),E.movement.dx=0,E.movement.dy=0}}),r.forEach(p=>p(o)),a!==0&&(s.forEach(p=>p(a)),a=0)}return t.addEventListener("mousedown",d),t.addEventListener("mouseup",u),t.addEventListener("mouseleave",l),t.addEventListener("mousemove",f),t.addEventListener("wheel",h),{bind:m,bindMove:x,bindScroll:v,apply:w}}const Yn=Ft(pt);function*Hn(t,e=0){let n=e;for(;n<t;)yield n++}function Vt(t){const e=new Map,n=new Set,i=u=>{u.preventDefault()},r=u=>{const{changedTouches:l}=u;for(const f of l){const{identifier:h,pageX:m,pageY:x}=f;e.has(h)&&console.error("Duplicate touch id: ",h),e.set(h,{startPosition:{x:m,y:x},currentPosition:{x:m,y:x},movement:{dx:0,dy:0}})}i(u)},s=u=>{const{changedTouches:l}=u,f=[];for(const h of Hn(l.length)){const m=l.item(h);m&&f.push(m.identifier)}f.forEach(h=>e.delete(h)),i(u)},o=u=>{const{changedTouches:l}=u;for(const f of l){const{identifier:h,pageX:m,pageY:x}=f;if(e.has(h)){const v=e.get(h),{currentPosition:w}=v,{x:p,y:_}=w;v.currentPosition.x=m,v.currentPosition.y=x,v.movement.dx=m-p,v.movement.dy=x-_}else console.error("Missing touch id: ",h)}i(u)},a=u=>{const{changedTouches:l}=u;for(const f of l){const{identifier:h}=f;e.has(h)}i(u)};function c(u){n.add(u)}function d(){const u=[...e.values()];u.length>0&&n.forEach(l=>l(u)),e.forEach(l=>{l.movement.dx=0,l.movement.dy=0})}return t.addEventListener("touchstart",r),t.addEventListener("touchend",s),t.addEventListener("touchmove",o),t.addEventListener("touchcancel",a),{bind:c,apply:d}}const qn=Vt(pt);function Kn(t){const e=K({buffer:new Array(t),index:-1}),n=J(()=>{const[s,o]=e.buffer.reduce((a,c)=>[a[0]+c,a[1]+1],[0,0]);return s/o}),i=J(()=>e.buffer.reduce((s,o)=>s+o,0));function r(s){isFinite(s)&&(e.index=++e.index%e.buffer.length,e.buffer[e.index]=s)}return{mean:n,sum:i,add:r}}function jn(t=30){const e=K({fpsBuffer:Kn(t),then:performance.now()}),n=J(()=>+xe(e.fpsBuffer.mean).toFixed(0));function i(r){const o=1e3/(r-e.then);e.fpsBuffer.add(o),e.then=r}return{fps:n,addTimestamp:i}}let I;requestAnimationFrame(()=>I=document.getElementById("__tooltip__"));function Qn(t,e,n){I&&(!!e?(I.style.display="block",I.style.left=`${t.x}px`,I.style.top=`${t.y}px`,I.style.backgroundColor=n?n.toString(!0):"",I.textContent=typeof e=="string"?e:JSON.stringify(e,void 0,2)):(I.style.display="none",I.style.left="",I.style.top="",I.style.backgroundColor="",I.textContent=""))}function Mi(t,e=()=>{},n=()=>{},i=()=>{},r=()=>{},s=()=>{}){const{addTimestamp:o,fps:a}=jn(),c=N(),d=K({glPanelState:An,modelViewMatrix:N(),modelViewInverseTransposeMatrix:N(),keyController:Nn,mouseController:Yn,touchController:qn,lastTimestamp:performance.now(),hAnim:NaN});function u(v){const{canvas:w,gl:p,programs:_,projectionMatrix:E}=v;d.glPanelState=v;const A=Ut(w),g=Ft(w),y=Vt(w);d.keyController=A,d.mouseController=g,d.touchController=y,e(p,_,{keyboard:A,mouse:g,touch:y},{projection:E,view:d.modelViewMatrix,inverseTransposeView:d.modelViewInverseTransposeMatrix}),setTimeout(()=>h(),100),d.lastTimestamp=performance.now(),d.hAnim=window.requestAnimationFrame(l)}function l(v){d.hAnim=window.requestAnimationFrame(l),f(),m(v),o(v)}function f(){const{glPanelState:v}=d,{gl:w,programs:p}=v;t.hasMoved()&&h(),i(w,p)}function h(){const{glPanelState:v,modelViewMatrix:w}=d,{gl:p,projectionMatrix:_}=v;p&&(Fe(c,_,w),n(p,c))}function m(v){const{modelViewMatrix:w,modelViewInverseTransposeMatrix:p,keyController:_,lastTimestamp:E,mouseController:A,touchController:g}=d,y=v-E;d.lastTimestamp=v,_.apply(),A.apply(),g.apply(),r(y),Ue(w,t.matrix)||(Te(w,t.matrix),be(p,w),Me(p,p))}function x(){const{hAnim:v}=d;v&&window.cancelAnimationFrame(v),_e(void 0),Qn({x:0,y:0},void 0),s()}return{init:u,resize:h,exit:x,fps:a}}var Jn=(t=>(t[t.FLOAT=1]="FLOAT",t[t.VEC2=2]="VEC2",t[t.VEC3=3]="VEC3",t[t.VEC4=4]="VEC4",t[t.MAT3=9]="MAT3",t[t.MAT4=16]="MAT4",t))(Jn||{});class bi extends Float32Array{constructor(n,i){super(n*i);M(this,"capacity");M(this,"itemSize");M(this,"usedIndexes");M(this,"_usedCount");this.capacity=n,this.itemSize=i,this.usedIndexes=new Array(n).fill(!1),this._usedCount=0}toString(){const{capacity:n,itemSize:i,_usedCount:r}=this;return`Float32Buffer[capacity=${n}, itemSize=${i}, usedCount=${r}]`}get usedCount(){return this._usedCount}get usedLength(){return this._usedCount*this.itemSize}clear(){this.fill(0),this.usedIndexes.fill(!1),this._usedCount=0}itemAt(n){const{itemSize:i,buffer:r}=this,s=n*i*Float32Array.BYTES_PER_ELEMENT;return new Float32Array(r,s,i)}itemAtMarkAsUsed(n){const{usedIndexes:i}=this;return i[n]||(i[n]=!0,this._usedCount++),this.itemAt(n)}setItem(n,...i){const{itemSize:r}=this,s=this.itemAtMarkAsUsed(n);for(let o=0;o<r;o++)s[o]=i[o]}}export{si as $,Pn as A,zn as B,je as C,Bn as D,Rt as E,bi as F,yi as G,C as H,Jn as I,H as J,W as K,Rn as L,On as M,Z as N,ii as O,nt as P,ri as Q,ge as R,En as S,yn as T,Je as U,Dn as V,Ee as W,It as X,Qe as Y,ci as Z,Ge as _,hi as a,fi as a0,ai as a1,oi as a2,mi as b,vi as c,P as d,_i as e,F as f,pi as g,gi as h,Ai as i,ni as j,Ei as k,Hn as l,xi as m,O as n,di as o,N as p,ei as q,ui as r,B as s,X as t,Mi as u,$n as v,Ti as w,wi as x,li as y,Vn as z};
