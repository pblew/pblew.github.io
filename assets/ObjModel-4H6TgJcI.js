import{K as D,a as A,L as E,N as $,n as W,s as X,O as Y,Q as K,R as Z}from"./VTextField-C8Tt_kfs.js";function ee(n){const i=new Float32Array(n*3),u=new Float32Array(n*3),m=new Float32Array(n*4),x=new Float32Array(n*2),l=new Float32Array(n*3),d=new Uint32Array(n);let f=0,v=0,y=0,g=0,r=0,F=0,h=0;function z(T,B,I,C,N){const[a,b,V]=T,[e,t,c]=B,{r:s,g:p,b:Q,a:R}=I;if(i[f++]=a,i[f++]=b,i[f++]=V,u[v++]=e,u[v++]=t,u[v++]=c,m[y++]=s,m[y++]=p,m[y++]=Q,m[y++]=R,C){const[q,G]=C;if(x[g++]=q,x[g++]=G,N){const[H,J,S]=N;l[r++]=H,l[r++]=J,l[r++]=S}}d[F++]=h++}function k(){d[F++]=h-1}return{vertexes:i,normals:u,colours:m,texcoords:x,tangents:l,indexes:d,emitVertex:z,emitDegenerateVertex:k}}function te(n,i,u,m,x,l,d,f,v,y,g){return{buffer:n,ambient:i,diffuse:u,emissive:m,opacity:x,opticalDensity:l,shininess:d,specular:f,diffuseMap:v,normalMap:y,specularMap:g}}function ne(n,i){return[n,i]}const U=A(),_=A(),M=$(),w=$();function j(n,i,u,m,x,l,d){D(U,u,i),D(_,m,i),E(M,l,x),E(w,d,x);const f=1/(M[0]*w[1]-w[0]*M[1]);return Number.isFinite(f)?(n[0]=f*(w[1]*U[0]-M[1]*_[0]),n[1]=f*(w[1]*U[1]-M[1]*_[1]),n[2]=f*(w[1]*U[2]-M[1]*_[2]),W(n,n)):X(n,1,0,0),n}const L=A(),P=A(),O=$(),o=A();function se(n){if(!n)return[];const{normals:i,texcoords:u,positions:m,parts:x}=n;return x.filter(l=>l.vertexCount>0).flatMap(l=>{const{vertexCount:d,materials:f,specularMap:v,normalMap:y,diffuseMap:g}=l,r=ee(d);return f.map(F=>{const{ambient:h,diffuse:z,emissive:k,opacity:T,opticalDensity:B,shininess:I,specular:C,faces:N}=F,a=Y([...z,T]);return N.forEach(b=>{const V=b.length,e=b.map(s=>m[s[0]]),t=b.map(s=>{const p=u[s[1]];return ne(p[0],1-p[1])}),c=b.map(s=>i[s[2]]);switch(V){case 3:j(o,e[0],e[1],e[2],t[0],t[1],t[2]),r.emitVertex(e[0],c[0],a,t[0],o),r.emitVertex(e[1],c[1],a,t[1],o),r.emitVertex(e[2],c[2],a,t[2],o);break;case 4:j(o,e[0],e[1],e[2],t[0],t[1],t[2]),r.emitVertex(e[0],c[0],a,t[0],o),r.emitVertex(e[1],c[1],a,t[1],o),r.emitVertex(e[2],c[2],a,t[2],o),j(o,e[0],e[2],e[3],t[0],t[2],t[3]),r.emitVertex(e[0],c[0],a,t[0],o),r.emitVertex(e[2],c[2],a,t[2],o),r.emitVertex(e[3],c[3],a,t[3],o);break;default:K(L,e,V),K(P,c,V),Z(O,t,V);for(let s=0;s<V;s++){const p=(s+1)%V;j(o,L,e[s],e[p],O,t[s],t[p]),r.emitVertex(L,P,a,O,o),r.emitVertex(e[s],c[s],a,t[s],o),r.emitVertex(e[p],c[p],a,t[p],o)}}}),te(r,h,z,k,T,B,I,C,g,y,v)})})}export{se as f};
